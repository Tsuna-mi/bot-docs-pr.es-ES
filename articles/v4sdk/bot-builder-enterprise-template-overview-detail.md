---
title: Introducción detallada a la plantilla del bot de empresa | Microsoft Docs
description: Aprenda sobre las decisiones de diseño de la plantilla del bot de empresa
author: darrenj
ms.author: darrenj
manager: kamrani
ms.topic: article
ms.prod: bot-framework
ms.date: 09/18/2018
monikerRange: azure-bot-service-4.0
ms.openlocfilehash: 6f295794ca7d3cc17688337e70df2a52cdb665ed
ms.sourcegitcommit: 3bf3dbb1a440b3d83e58499c6a2ac116fe04b2f6
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 09/23/2018
ms.locfileid: "46708832"
---
# <a name="enterprise-template---detailed-overview"></a><span data-ttu-id="894a3-103">Introducción detallada a la plantilla de empresa</span><span class="sxs-lookup"><span data-stu-id="894a3-103">Enterprise Template - Detailed Overview</span></span>

> [!NOTE]
> <span data-ttu-id="894a3-104">Este tema se aplica a la versión v4 del SDK.</span><span class="sxs-lookup"><span data-stu-id="894a3-104">This topics applies to v4 version of the SDK.</span></span> 

<span data-ttu-id="894a3-105">La plantilla del bot de empresa reúne una serie de procedimientos recomendados que hemos identificado mediante la creación de experiencias de conversación y automatiza la integración de los componentes que creemos muy ventajosos para los desarrolladores de Azure Bot Service.</span><span class="sxs-lookup"><span data-stu-id="894a3-105">The Enterprise Bot Template brings together a number of best practices we've identified through the building of conversational experiences and automates integration of components that we've found to be highly beneficial to Azure Bot Service developers.</span></span> <span data-ttu-id="894a3-106">En esta sección se cubre información de fondo de las decisiones clave para ayudar a explicar el funcionamiento de la plantilla.</span><span class="sxs-lookup"><span data-stu-id="894a3-106">This section covers some background to key decisions to help explain why the template works the way it does.</span></span>

## <a name="introduction-card"></a><span data-ttu-id="894a3-107">Tarjeta de presentación</span><span class="sxs-lookup"><span data-stu-id="894a3-107">Introduction Card</span></span>

<span data-ttu-id="894a3-108">Uno de los problemas clave que se produce en muchas experiencias conversacionales es que los usuarios finales no saben cómo empezar, lo que produce preguntas generales para las cuales el bot no tiene las mejores respuestas.</span><span class="sxs-lookup"><span data-stu-id="894a3-108">A key issue with many conversational experiences is end-users not knowing how to get started, leading to general questions that the Bot may not be best placed to answer.</span></span> <span data-ttu-id="894a3-109">Las primeras impresiones son importantes</span><span class="sxs-lookup"><span data-stu-id="894a3-109">First impressions matter!</span></span> <span data-ttu-id="894a3-110">Una tarjeta de presentación ofrece la oportunidad de mostrar las funcionalidades del bot a un usuario final y le sugiere preguntas iniciales con las que puede empezar.</span><span class="sxs-lookup"><span data-stu-id="894a3-110">An introduction card offers an opportunity to introduce the Bot's capabilities to an end user and suggests a few initial questions the user can use to get started.</span></span> <span data-ttu-id="894a3-111">También es una excelente oportunidad para exponer la personalidad del bot.</span><span class="sxs-lookup"><span data-stu-id="894a3-111">It's also a great opportunity to surface the personality of your Bot.</span></span>

<span data-ttu-id="894a3-112">Se proporciona una tarjeta de presentación estándar sencilla que se puede adaptar según sea necesario.</span><span class="sxs-lookup"><span data-stu-id="894a3-112">A simple introduction card is provided as standard which you can adapt as needed.</span></span>

## <a name="basic-language-understanding-luis-intents"></a><span data-ttu-id="894a3-113">Intenciones básicas de Language Understanding (LUIS)</span><span class="sxs-lookup"><span data-stu-id="894a3-113">Basic Language Understanding (LUIS) intents</span></span>

<span data-ttu-id="894a3-114">Todos los bots deben ser capaces de reconocer un nivel básico de idioma en la conversación.</span><span class="sxs-lookup"><span data-stu-id="894a3-114">Every Bot should handle a base level of conversational language understanding.</span></span> <span data-ttu-id="894a3-115">Por ejemplo, los saludos son algo básico que todos los bots deben controlar con facilidad.</span><span class="sxs-lookup"><span data-stu-id="894a3-115">Greetings for example are a basic thing every Bot should handle with ease.</span></span> <span data-ttu-id="894a3-116">Normalmente, los desarrolladores necesitan crear estas intenciones base y proporcionar datos de entrenamiento inicial para comenzar.</span><span class="sxs-lookup"><span data-stu-id="894a3-116">Typically, developers need to create these base intents and provide initial training data to get started.</span></span> <span data-ttu-id="894a3-117">La plantilla del bot de empresa ofrece archivos de LU de ejemplo para empezar y evita que los proyectos deban crearlos cada ve, al tiempo que garantiza un nivel base de funcionalidad lista para el uso.</span><span class="sxs-lookup"><span data-stu-id="894a3-117">The Enterprise Bot Template provides example LU files to get you started and avoids every project having to create these each time and ensures a base level of capability out of the box.</span></span>

<span data-ttu-id="894a3-118">Los archivos de LU proporcionan las siguientes intenciones en inglés, francés, italiano, alemán y español.</span><span class="sxs-lookup"><span data-stu-id="894a3-118">The LU files provide the following intents across English, French, Italian, German and Spanish.</span></span>

> <span data-ttu-id="894a3-119">Greeting, Help, Cancel, Restart, Escalate, ConfirmYes, ConfirmNo, ConfirmMore, Next, Goodbye</span><span class="sxs-lookup"><span data-stu-id="894a3-119">Greeting, Help, Cancel, Restart, Escalate, ConfirmYes, ConfirmNo, ConfirmMore, Next, Goodbye</span></span>

<span data-ttu-id="894a3-120">El formato de [LU](https://github.com/Microsoft/botbuilder-tools/blob/master/packages/Ludown/docs/lu-file-format.md) es similar a Markdown, lo que facilita la modificación y el control de código fuente.</span><span class="sxs-lookup"><span data-stu-id="894a3-120">The [LU](https://github.com/Microsoft/botbuilder-tools/blob/master/packages/Ludown/docs/lu-file-format.md) format is similar to MarkDown enabling easy modification and source control.</span></span> <span data-ttu-id="894a3-121">Después, la herramienta [LuDown](https://github.com/Microsoft/botbuilder-tools/tree/master/packages/Ludown) convierte los archivos .LU en modelos de LUIS para que los pueda publicar en su suscripción de LUIS ya sea mediante el portal o la herramienta de la CLI de [LUIS](https://github.com/Microsoft/botbuilder-tools/tree/master/packages/LUIS) (línea de comandos) asociada.</span><span class="sxs-lookup"><span data-stu-id="894a3-121">The [LuDown](https://github.com/Microsoft/botbuilder-tools/tree/master/packages/Ludown) tool is then used to convert .LU files into LUIS models which can then be published to your LUIS subscription either through the portal or the associated [LUIS](https://github.com/Microsoft/botbuilder-tools/tree/master/packages/LUIS) CLI (command line) tool.</span></span>

## <a name="content-moderator"></a><span data-ttu-id="894a3-122">Content Moderator</span><span class="sxs-lookup"><span data-stu-id="894a3-122">Content Moderator</span></span>

<span data-ttu-id="894a3-123">Content Moderator habilita la detección de posibles blasfemias y ayuda a comprobar los datos de carácter personal (DCP).</span><span class="sxs-lookup"><span data-stu-id="894a3-123">Content Moderator enables detection of potential profanity and helps check for personally identifiable information (PII).</span></span> <span data-ttu-id="894a3-124">Esto puede resultar útil para la integración en los bots para que reaccionen a las blasfemias o si el usuario comparte datos de carácter personal.</span><span class="sxs-lookup"><span data-stu-id="894a3-124">This can be helpful to integrate into Bots enabling a Bot to react to profanity or if the user shares PII information.</span></span> <span data-ttu-id="894a3-125">Por ejemplo, un bot se puede disculpar y rechazar a una persona o puede no guardar registros de telemetría si detecta información de carácter personal.</span><span class="sxs-lookup"><span data-stu-id="894a3-125">For example, a Bot can apologise and hand-off to a human or not store telemetry records if PII information is detected.</span></span>

<span data-ttu-id="894a3-126">Se proporciona un componente de middleware que supervisa los textos y las superficies con ```TextModeratorResult``` en el objeto TurnState.</span><span class="sxs-lookup"><span data-stu-id="894a3-126">A middleware component is provided that screen texts and surfaces through a ```TextModeratorResult``` on the TurnState object.</span></span>

## <a name="telemetry"></a><span data-ttu-id="894a3-127">Telemetría</span><span class="sxs-lookup"><span data-stu-id="894a3-127">Telemetry</span></span>

<span data-ttu-id="894a3-128">Proporcionar información sobre la involucración de los usuarios del Bot es muy importante.</span><span class="sxs-lookup"><span data-stu-id="894a3-128">Providing insights into the user engagement of your Bot has proven to be highly valuable.</span></span> <span data-ttu-id="894a3-129">Esta información puede ayudarle a comprender los niveles de implicación de los usuarios, qué características del bot usan (intenciones) y las preguntas que las personas formulan que el bot no es capaz de responder (destacan las lagunas de conocimiento del bot que podrían solventarse con nuevos artículos de QnAMaker, por ejemplo).</span><span class="sxs-lookup"><span data-stu-id="894a3-129">This insight can help you understand the levels of user engagement, what features of the Bot they are using (intents) along with questions people are asking that the Bot isn't able to answer - highlighting gaps in the Bot's knowledge that could be addressed through new QnAMaker articles for instance.</span></span>

<span data-ttu-id="894a3-130">La integración de Application Insights proporciona datos técnicos/operativos importantes desde el principio, pero también puede usarse para capturar los eventos específicos del bot: mensajes enviados y recibidos y las operaciones de LUIS y QnAMaker.</span><span class="sxs-lookup"><span data-stu-id="894a3-130">Integration of Application Insights provides significant operational/technical insight out of the box but this can also be used to capture specific Bot related events - messages sent and recieved along with LUIS and QnAMaker operations.</span></span>

<span data-ttu-id="894a3-131">La telemetría a nivel de bot está intrínsecamente vinculada a los datos de telemetría técnicos y operativos, por lo que podrá supervisar la respuesta que se envió a un usuario y su pregunta.</span><span class="sxs-lookup"><span data-stu-id="894a3-131">Bot level telemetry is intrinsically linked to technical and operational telemetry enabling you to inspect how a given user question was answered and vice versa.</span></span>

<span data-ttu-id="894a3-132">La combinación de un componente de middleware con una clase de contenedor en torno a las clases de SDK de QnAMaker y LuisRecognizer supone una forma elegante de recopilar un conjunto coherente de eventos.</span><span class="sxs-lookup"><span data-stu-id="894a3-132">A middleware component combined with a wrapper class around the QnAMaker and LuisRecognizer SDK classes provides an elegant way to collect a consistent set of events.</span></span> <span data-ttu-id="894a3-133">Las herramientas de Application Insights pueden usar estos eventos coherentes con herramientas como PowerBI.</span><span class="sxs-lookup"><span data-stu-id="894a3-133">These consistent events can then be used by the Applicatin Insights tooling along with tools like PowerBI.</span></span>

<span data-ttu-id="894a3-134">Con cada proyecto creado con la plantilla del bot de empresa se proporciona un panel de PowerBI de ejemplo.</span><span class="sxs-lookup"><span data-stu-id="894a3-134">An example PowerBI dashboard is provided with each project created using the Enterprise Bot Template.</span></span> <span data-ttu-id="894a3-135">Consulte la sección de [PowerBI](bot-builder-enterprise-template-powerbi.md) para más información.</span><span class="sxs-lookup"><span data-stu-id="894a3-135">See the [PowerBI](bot-builder-enterprise-template-powerbi.md) section for more information.</span></span>

## <a name="dispatcher"></a><span data-ttu-id="894a3-136">Distribuidor</span><span class="sxs-lookup"><span data-stu-id="894a3-136">Dispatcher</span></span>

<span data-ttu-id="894a3-137">Un modelo de diseño clave utilizado para mejorar el rendimiento de la primera ola de experiencias conversacionales era aprovechar Language Understanding (LUIS) y QnAMaker.</span><span class="sxs-lookup"><span data-stu-id="894a3-137">A key design pattern used to good effect in the first wave of covnersational experiences was to leverage Language Understanding (LUIS) and QnAMaker.</span></span> <span data-ttu-id="894a3-138">LUIS podría entrenarse con tareas que el bot pudiera hacer para el usuario final y QnAMaker se entrenaría con conocimiento más general.</span><span class="sxs-lookup"><span data-stu-id="894a3-138">LUIS would be trained with tasks that your Bot could do for an end user and QnAMaker would be trained with more general knowledge.</span></span>

<span data-ttu-id="894a3-139">Todas las grabaciones de voz entrantes (preguntas) se enrutarían a LUIS para el análisis.</span><span class="sxs-lookup"><span data-stu-id="894a3-139">All incoming utterances (questions) would be routed to LUIS for analysis.</span></span> <span data-ttu-id="894a3-140">Si la intención de una grabación de voz no se identificara, se marcaría como None.</span><span class="sxs-lookup"><span data-stu-id="894a3-140">If the intent of a given utterance was not identified it was marked as a None intent.</span></span> <span data-ttu-id="894a3-141">Entonces se usaría QnAMaker para intentar encontrar una respuesta para el usuario final.</span><span class="sxs-lookup"><span data-stu-id="894a3-141">QnAMaker was then used to try and find an answer for the end-user.</span></span>

<span data-ttu-id="894a3-142">Si bien este modelo funcionó bien, dos escenarios clave pueden suponer problemas.</span><span class="sxs-lookup"><span data-stu-id="894a3-142">Whilst this pattern worked well there were two key scenarios where problems could be experienced.</span></span>

- <span data-ttu-id="894a3-143">Si las grabaciones de voz del modelo LUIS y QnAMaker se solapan ligeramente (en ocasiones ocurre), esto provocaría un comportamiento extraño en el que LUIS intentaría procesar una pregunta que debería haberse dirigido a QnAMaker.</span><span class="sxs-lookup"><span data-stu-id="894a3-143">If  utterances in the LUIS model and QnAMaker overlapped sometimes slightly, this could lead to strange behavior where LUIS may try to process a question when it should have been directed to QnaMaker.</span></span>
- <span data-ttu-id="894a3-144">Con dos o más modelos LUIS, el bot tendría que invocarlos a todos y realizar una especie de comparación de evaluación de las intenciones para determinar dónde enviar la grabación de voz concreta.</span><span class="sxs-lookup"><span data-stu-id="894a3-144">When there were two or more LUIS models a Bot would have to invoke each one and perform some form of  intent evaluation comparison to identify where to send a given utterance.</span></span> <span data-ttu-id="894a3-145">Como no existe comparación eficaz de puntuación de referencia común entre modelos, la experiencia del usuario empeora.</span><span class="sxs-lookup"><span data-stu-id="894a3-145">As there is no common baseline score comparison across models didn't work effectively leading to a poor user experience.</span></span>

<span data-ttu-id="894a3-146">El [distribuidor](https://docs.microsoft.com/en-us/azure/bot-service/bot-builder-tutorial-dispatch?view=azure-bot-service-4.0&tabs=csaddref%2Ccsbotconfig) es una solución elegante a en este caso, ya que extrae las grabaciones de voz de los modelos LUIS configurados y las preguntas de QnAMaker y crea un modelo LUIS de distribución central.</span><span class="sxs-lookup"><span data-stu-id="894a3-146">The [Dispatcher](https://docs.microsoft.com/en-us/azure/bot-service/bot-builder-tutorial-dispatch?view=azure-bot-service-4.0&tabs=csaddref%2Ccsbotconfig) provides an elegant solution to this by extracting utterances from each configured LUIS model and questions from QnAMaker and creating a central dispatch LUIS model.</span></span>

<span data-ttu-id="894a3-147">Así, el bot puede identificar rápidamente el modelo LUIS o el componente que debe administrar una grabación determinada y garantiza que los datos de QnAMaker se consideran en el máximo nivel de intención, sin procesarlos únicamente como con intención None como antes.</span><span class="sxs-lookup"><span data-stu-id="894a3-147">This enables a Bot to quickly identify which LUIS model or component should handle a given utterance and ensures QnAMaker data is considered at the top level of intent processing not just the None intent as before.</span></span>

<span data-ttu-id="894a3-148">Esta herramienta de distribución también facilita la evaluación al resaltar la confusión y superponer los modelos LUIS y las bases de conocimiento de QnAMaker para destacar los problemas antes de la implementación.</span><span class="sxs-lookup"><span data-stu-id="894a3-148">This Dispatch tool also enables evaluation which will highlight confusion and overlap across LUIS models and QnAMaker knowledgebases highlighting issues before deployment.</span></span>

<span data-ttu-id="894a3-149">El distribuidor se usa en el núcleo de cada proyecto que se crea con la plantilla del bot de empresa.</span><span class="sxs-lookup"><span data-stu-id="894a3-149">The Dispatcher is used at the core of each project created using the Enterprise Bot Template.</span></span> <span data-ttu-id="894a3-150">El modelo de distribuidor se usa en la clase `MainDialog` para identificar si el destino es un modelo de LUIS o QnA.</span><span class="sxs-lookup"><span data-stu-id="894a3-150">The Dispatch model is used within the `MainDialog` class to identify whether the target is a LUIS model or QnA.</span></span> <span data-ttu-id="894a3-151">En el caso de LUIS, se invoca el modelo LUIS secundario para que se devuelva la intención y las entidades como de costumbre.</span><span class="sxs-lookup"><span data-stu-id="894a3-151">In the case of LUIS, the secondary LUIS model is invoked returning the intent and entities as usual.</span></span>

## <a name="qnamaker"></a><span data-ttu-id="894a3-152">QnAMaker</span><span class="sxs-lookup"><span data-stu-id="894a3-152">QnAMaker</span></span>

<span data-ttu-id="894a3-153">[QnAMaker](https://www.qnamaker.ai/) ofrece a personas que no sean desarrolladores conocimientos generales en forma de parejas de preguntas y respuestas.</span><span class="sxs-lookup"><span data-stu-id="894a3-153">[QnAMaker](https://www.qnamaker.ai/) provides the ability for non-developers to curate general knowledge in the format of question and answer pairs.</span></span> <span data-ttu-id="894a3-154">Este conocimiento puede importarse desde orígenes de datos de preguntas frecuentes, manuales de productos e interactivamente desde el portal de QnaMaker.</span><span class="sxs-lookup"><span data-stu-id="894a3-154">This knowledge can be imported from FAQ data sources, product manuals and interactively within the QnaMaker portal.</span></span>

<span data-ttu-id="894a3-155">En la carpeta de QnA de CogSvcModels se proporciona un conjunto de entradas de QnA de ejemplo en formato de archivo [LU](https://github.com/Microsoft/botbuilder-tools/blob/master/packages/Ludown/docs/lu-file-format.md).</span><span class="sxs-lookup"><span data-stu-id="894a3-155">An example set of QnA entries is provided in the [LU](https://github.com/Microsoft/botbuilder-tools/blob/master/packages/Ludown/docs/lu-file-format.md) file format within the QnA folder of CogSvcModels.</span></span> <span data-ttu-id="894a3-156">Después, se usa [LuDown](https://github.com/Microsoft/botbuilder-tools/tree/master/packages/Ludown) como parte del script de implementación para crear un archivo JSON de QnAMaker que la CLI de [QnAMaker](https://github.com/Microsoft/botbuilder-tools/tree/master/packages/QnAMaker) (línea de comandos) usará después para publicar elementos en la base de conocimiento de QnAMaker.</span><span class="sxs-lookup"><span data-stu-id="894a3-156">[LuDown](https://github.com/Microsoft/botbuilder-tools/tree/master/packages/Ludown) is then used as part of the deployment script to create a QnAMaker JSON file which the [QnAMaker](https://github.com/Microsoft/botbuilder-tools/tree/master/packages/QnAMaker) CLI (command line) tool then uses to publish items to the QnAMaker knowledgebase.</span></span>
