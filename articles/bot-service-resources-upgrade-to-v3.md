---
title: Actualización de un bot a Bot Framework API v3 | Microsoft Docs
description: Aprenda a actualizar su bot a Bot Framework API v3.
author: RobStand
ms.author: kamrani
manager: kamrani
ms.topic: article
ms.prod: bot-framework
ms.date: 12/13/2017
ms.openlocfilehash: ca54abf89f8967b2b109895326d13a601030fdec
ms.sourcegitcommit: f576981342fb3361216675815714e24281e20ddf
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 07/18/2018
ms.locfileid: "39305297"
---
# <a name="upgrade-your-bot-to-bot-framework-api-v3"></a><span data-ttu-id="b6e4e-103">Actualización de un bot a Bot Framework API v3</span><span class="sxs-lookup"><span data-stu-id="b6e4e-103">Upgrade your bot to Bot Framework API v3</span></span>

<span data-ttu-id="b6e4e-104">En el evento Build 2016, Microsoft anunció Microsoft Bot Framework y su iteración inicial de Bot Connector API, junto con los SDK de Bot Builder y Bot Connector.</span><span class="sxs-lookup"><span data-stu-id="b6e4e-104">At Build 2016 Microsoft announced the Microsoft Bot Framework and its initial iteration of the Bot Connector API, along with Bot Builder and Bot Connector SDKs.</span></span> <span data-ttu-id="b6e4e-105">Desde entonces, hemos estado recopilando sus comentarios y trabajando activamente para mejorar la API REST y los SDK.</span><span class="sxs-lookup"><span data-stu-id="b6e4e-105">Since then, we've been collecting your feedback and actively working to improve the REST API and SDKs.</span></span>

<span data-ttu-id="b6e4e-106">En julio de 2016, se lanzó Bot Framework API v3 y Bot Framework API v1 ha quedado en desuso.</span><span class="sxs-lookup"><span data-stu-id="b6e4e-106">In July 2016, Bot Framework API v3 was released and Bot Framework API v1 was deprecated.</span></span> <span data-ttu-id="b6e4e-107">Los bots que usan API v1 han dejado de funcionar en Skype en diciembre de 2016 y en todos los canales restantes el 23 de febrero de 2017.</span><span class="sxs-lookup"><span data-stu-id="b6e4e-107">Bots that use API v1 ceased to function on Skype in December 2016 and on all remaining channels on February 23, 2017.</span></span> <span data-ttu-id="b6e4e-108">Si ha creado un bot con API v1 y quiere que funcione de nuevo, debe actualizar a la API v3 siguiendo las instrucciones de este artículo.</span><span class="sxs-lookup"><span data-stu-id="b6e4e-108">If you created a bot using API v1 and want to make it functional again, you must upgrade it to API v3 by following the instructions in this article.</span></span> <span data-ttu-id="b6e4e-109">Para asegurarse de que comprende el proceso de actualización de fin a fin, lea este artículo completamente antes de comenzar.</span><span class="sxs-lookup"><span data-stu-id="b6e4e-109">To ensure that you understand the upgrade process from end-to-end, read through this article completely before you begin.</span></span> 

## <a name="step-1-get-your-app-id-and-password-from-the-bot-framework-portal"></a><span data-ttu-id="b6e4e-110">Paso 1: Obtención del identificador y la contraseña de la aplicación del portal de Bot Framework</span><span class="sxs-lookup"><span data-stu-id="b6e4e-110">Step 1: Get your App ID and password from the Bot Framework Portal</span></span>

<span data-ttu-id="b6e4e-111">Inicie sesión en el [portal de Bot Framework](https://dev.botframework.com/), haga clic en **My bots** (Mis bots) y seleccione su bot para abrir su panel.</span><span class="sxs-lookup"><span data-stu-id="b6e4e-111">Sign in to the [Bot Framework Portal](https://dev.botframework.com/), click **My bots**, then select your bot to open its dashboard.</span></span> <span data-ttu-id="b6e4e-112">A continuación, haga clic en el vínculo **SETTINGS** (CONFIGURACIÓN) que se encuentra cerca de la esquina superior derecha de la página.</span><span class="sxs-lookup"><span data-stu-id="b6e4e-112">Next, click the **SETTINGS** link that is located near the top-right corner of the page.</span></span> 

<span data-ttu-id="b6e4e-113">En la sección **Configuration** (Configuración) de la página de configuración, examine el contenido del campo **App ID** (Id. de aplicación) y continúe con los pasos siguientes según si este campo está o no ya rellenado.</span><span class="sxs-lookup"><span data-stu-id="b6e4e-113">Within the **Configuration** section of the settings page, examine the contents of the **App ID** field and proceed with next steps depending on whether or not the **App ID** field is already populated.</span></span>

### <a name="case-1-app-id-field-is-already-populated"></a><span data-ttu-id="b6e4e-114">Caso 1: El campo de identificador de aplicación está ya rellenado</span><span class="sxs-lookup"><span data-stu-id="b6e4e-114">Case 1: App ID field is already populated</span></span>

<span data-ttu-id="b6e4e-115">Si el campo **App ID** (Id. de aplicación) está ya rellenado, realice estos pasos:</span><span class="sxs-lookup"><span data-stu-id="b6e4e-115">If the **App ID** field is already populated, complete these steps:</span></span>

1. <span data-ttu-id="b6e4e-116">Haga clic en **Manage Microsoft App ID and password** (Administrar id. y contraseña de aplicación de Microsoft).</span><span class="sxs-lookup"><span data-stu-id="b6e4e-116">Click **Manage Microsoft App ID and password**.</span></span>  
<span data-ttu-id="b6e4e-117">![Configuración](~/media/upgrade/manage-app-id.png)</span><span class="sxs-lookup"><span data-stu-id="b6e4e-117">![Configuration](~/media/upgrade/manage-app-id.png)</span></span>

2. <span data-ttu-id="b6e4e-118">Haga clic en **Generate New Password** (Generar nueva contraseña).</span><span class="sxs-lookup"><span data-stu-id="b6e4e-118">Click **Generate New Password**.</span></span>  
<span data-ttu-id="b6e4e-119">![Generación de nueva contraseña](~/media/upgrade/generate-new-password.png)</span><span class="sxs-lookup"><span data-stu-id="b6e4e-119">![Generate new password](~/media/upgrade/generate-new-password.png)</span></span>

3. <span data-ttu-id="b6e4e-120">Copie y guarde la nueva contraseña junto con el identificador de aplicación de MSA; necesitará estos valores en el futuro.</span><span class="sxs-lookup"><span data-stu-id="b6e4e-120">Copy and save the new password along with the MSA App ID; you will need these values in the future.</span></span>  
![Contraseña nueva](~/media/upgrade/new-password-generated.png)

### <a name="case-2-app-id-field-is-empty"></a><span data-ttu-id="b6e4e-122">Caso 2: El campo de identificador de aplicación está vacío</span><span class="sxs-lookup"><span data-stu-id="b6e4e-122">Case 2: App ID field is empty</span></span>

<span data-ttu-id="b6e4e-123">Si el campo **App ID** (Id. de aplicación) está vacío, realice estos pasos:</span><span class="sxs-lookup"><span data-stu-id="b6e4e-123">If the **App ID** field is empty, complete these steps:</span></span>

1. <span data-ttu-id="b6e4e-124">Haga clic en **Create Microsoft App ID and password** (Crear id. y contraseña de aplicación de Microsoft).</span><span class="sxs-lookup"><span data-stu-id="b6e4e-124">Click **Create Microsoft App ID and password**.</span></span>  
   <span data-ttu-id="b6e4e-125">![Creación de identificador y contraseña de aplicación](~/media/upgrade/generate-appid-and-password.png)</span><span class="sxs-lookup"><span data-stu-id="b6e4e-125">![Create App ID and password](~/media/upgrade/generate-appid-and-password.png)</span></span>
   > [!IMPORTANT]
   > <span data-ttu-id="b6e4e-126">No seleccione aún el botón de radio **Versión 3.0** (Versión 3.0).</span><span class="sxs-lookup"><span data-stu-id="b6e4e-126">Do not select the **Version 3.0** radio button yet.</span></span> <span data-ttu-id="b6e4e-127">Lo hará más adelante, una vez que haya [actualizado su código de bot](#update-code).</span><span class="sxs-lookup"><span data-stu-id="b6e4e-127">You will do this later, after you have [updated your bot code](#update-code).</span></span></div>

2. <span data-ttu-id="b6e4e-128">Haga clic en **Generate a password to continue** (Generar una contraseña para continuar).</span><span class="sxs-lookup"><span data-stu-id="b6e4e-128">Click **Generate a password to continue**.</span></span>  
   <span data-ttu-id="b6e4e-129">![Generación de la contraseña de aplicación](~/media/upgrade/generate-a-password-to-continue.png)</span><span class="sxs-lookup"><span data-stu-id="b6e4e-129">![Generate app password](~/media/upgrade/generate-a-password-to-continue.png)</span></span>

3. <span data-ttu-id="b6e4e-130">Copie y guarde la nueva contraseña junto con el identificador de aplicación de MSA; necesitará estos valores en el futuro.</span><span class="sxs-lookup"><span data-stu-id="b6e4e-130">Copy and save the new password along with the MSA App Id; you will need these values in the future.</span></span>  
   ![Contraseña nueva](~/media/upgrade/new-password-generated.png)

4. <span data-ttu-id="b6e4e-132">Haga clic en **Finish and go back to Bot Framework** (Finalizar y volver a Bot Framework).</span><span class="sxs-lookup"><span data-stu-id="b6e4e-132">Click **Finish and go back to Bot Framework**.</span></span>  
   <span data-ttu-id="b6e4e-133">![Finalización y vuelta al portal](~/media/upgrade/finish-and-go-back-to-bot-framework.png)</span><span class="sxs-lookup"><span data-stu-id="b6e4e-133">![Finish and go back to Portal](~/media/upgrade/finish-and-go-back-to-bot-framework.png)</span></span>

5. <span data-ttu-id="b6e4e-134">De nuevo en la página de configuración del bot en el portal de Bot Framework, desplácese al final de la página y haga clic en **Save changes** (Guardar cambios).</span><span class="sxs-lookup"><span data-stu-id="b6e4e-134">Back on the bot settings page in the Bot Framework Portal, scroll to the bottom of the page and click **Save changes**.</span></span>  
   <span data-ttu-id="b6e4e-135">![Guardar cambios](~/media/upgrade/save-changes.png)</span><span class="sxs-lookup"><span data-stu-id="b6e4e-135">![Save changes](~/media/upgrade/save-changes.png)</span></span>

## <a id="update-code"></a> <span data-ttu-id="b6e4e-136">Paso 2: Actualización del código de bot a la versión 3.0</span><span class="sxs-lookup"><span data-stu-id="b6e4e-136">Step 2: Update your bot code to version 3.0</span></span>

<span data-ttu-id="b6e4e-137">Para actualizar el código de bot a la versión 3.0, siga estos pasos:</span><span class="sxs-lookup"><span data-stu-id="b6e4e-137">To update your bot code to version 3.0, complete these steps:</span></span>

1. <span data-ttu-id="b6e4e-138">Actualice a la versión más reciente del [SDK de Bot Builder](https://github.com/Microsoft/BotBuilder) correspondiente al lenguaje de su bot.</span><span class="sxs-lookup"><span data-stu-id="b6e4e-138">Update to the latest version of the [Bot Builder SDK](https://github.com/Microsoft/BotBuilder) for your bot's language.</span></span>
2. <span data-ttu-id="b6e4e-139">Actualice el código para aplicar los cambios necesarios, según las instrucciones siguientes.</span><span class="sxs-lookup"><span data-stu-id="b6e4e-139">Update your code to apply the necessary changes, according the guidance below.</span></span>
3. <span data-ttu-id="b6e4e-140">Use [Bot Framework Emulator](~/bot-service-debug-emulator.md) para probar el bot localmente y luego en la nube.</span><span class="sxs-lookup"><span data-stu-id="b6e4e-140">Use the [Bot Framework Emulator](~/bot-service-debug-emulator.md) to test your bot locally and then in the cloud.</span></span>

<span data-ttu-id="b6e4e-141">En las secciones siguientes se describen las principales diferencias entre API v1 y API v3.</span><span class="sxs-lookup"><span data-stu-id="b6e4e-141">The following sections describe the key differences between API v1 and API v3.</span></span> <span data-ttu-id="b6e4e-142">Después de haber actualizado el código a API v3, [actualice la configuración de bot](#step-3) en el portal de Bot Framework para finalizar el proceso de actualización.</span><span class="sxs-lookup"><span data-stu-id="b6e4e-142">After you have updated your code to API v3, you can finish the upgrade process by [updating your bot settings](#step-3) in the Bot Framework Portal.</span></span>

### <a name="botbuilder-and-connector-are-now-one-sdk"></a><span data-ttu-id="b6e4e-143">BotBuilder y Connector son ahora un SDK</span><span class="sxs-lookup"><span data-stu-id="b6e4e-143">BotBuilder and Connector are now one SDK</span></span>

<span data-ttu-id="b6e4e-144">En lugar de tener que instalar distintos SDK para Builder y Connector mediante varios paquetes NuGet (o módulos NPM), ahora puede obtener ambas bibliotecas en un único SDK de Bot Builder:</span><span class="sxs-lookup"><span data-stu-id="b6e4e-144">Instead of having to install separate SDKs for the Builder and Connector by using multiple NuGet packages (or NPM modules), you can now get both libraries in a single Bot Builder SDK:</span></span>

- <span data-ttu-id="b6e4e-145">SDK de Bot Builder para. NET: paquete NuGet `Microsoft.Bot.Builder`</span><span class="sxs-lookup"><span data-stu-id="b6e4e-145">Bot Builder SDK for .NET: `Microsoft.Bot.Builder` NuGet package</span></span>
- <span data-ttu-id="b6e4e-146">SDK de Bot Builder para Node.js: módulo de NPM `botbuilder`</span><span class="sxs-lookup"><span data-stu-id="b6e4e-146">Bot Builder SDK for Node.js: `botbuilder` NPM module</span></span>

<span data-ttu-id="b6e4e-147">El SDK independiente `Microsoft.Bot.Connector` está ahora obsoleto y ya no es objeto de mantenimiento.</span><span class="sxs-lookup"><span data-stu-id="b6e4e-147">The standalone `Microsoft.Bot.Connector` SDK is now obsolete and is no longer being maintained.</span></span>

### <a name="message-is-now-activity"></a><span data-ttu-id="b6e4e-148">Message es ahora Activity</span><span class="sxs-lookup"><span data-stu-id="b6e4e-148">Message is now Activity</span></span>

<span data-ttu-id="b6e4e-149">El objeto `Message` se ha reemplazado por el objeto `Activity` en API v3.</span><span class="sxs-lookup"><span data-stu-id="b6e4e-149">The `Message` object has been replaced with the `Activity` object in API v3.</span></span> <span data-ttu-id="b6e4e-150">El tipo de actividad más común es **message**, pero hay otros tipos de actividades que se pueden usar para comunicar distintos tipos de información a un bot o canal.</span><span class="sxs-lookup"><span data-stu-id="b6e4e-150">The most common type of activity is **message**, but there are other activity types that can be used to communicate various types of information to a bot or channel.</span></span> <span data-ttu-id="b6e4e-151">Para más información sobre los mensajes, consulte [Creación de mensajes](~/dotnet/bot-builder-dotnet-create-messages.md) y [Envío y recepción de actividades](~/dotnet/bot-builder-dotnet-connector.md).</span><span class="sxs-lookup"><span data-stu-id="b6e4e-151">For more information about messages, see [Create messages](~/dotnet/bot-builder-dotnet-create-messages.md) and [Send and receive activities](~/dotnet/bot-builder-dotnet-connector.md).</span></span>

### <a name="activity-types--events"></a><span data-ttu-id="b6e4e-152">Eventos y tipos de actividad</span><span class="sxs-lookup"><span data-stu-id="b6e4e-152">Activity types & events</span></span>

<span data-ttu-id="b6e4e-153">Algunos eventos han cambiado de nombre o se han refactorizado en API v3.</span><span class="sxs-lookup"><span data-stu-id="b6e4e-153">Some events have been renamed and/or refactored in API v3.</span></span> <span data-ttu-id="b6e4e-154">Además, se ha agregado una nueva enumeración `ActivityTypes` al conector para eliminar la necesidad de recordar tipos de actividad específicos.</span><span class="sxs-lookup"><span data-stu-id="b6e4e-154">In addition, a new `ActivityTypes` enumeration has been added to the Connector to eliminate the need to remember specific activity types.</span></span>

- <span data-ttu-id="b6e4e-155">El tipo de actividad `conversationUpdate` reemplaza Bot/Usuario Agregado/Quitado A/De Conversación por un único método.</span><span class="sxs-lookup"><span data-stu-id="b6e4e-155">The `conversationUpdate` Activity type replaces Bot/User Added/Removed To/From Conversation with a single method.</span></span>
- <span data-ttu-id="b6e4e-156">El nuevo tipo de actividad `typing` permite a su bot indicar que está compilando una respuesta y saber cuándo el usuario está escribiendo una respuesta.</span><span class="sxs-lookup"><span data-stu-id="b6e4e-156">The new `typing` Activity type enables your bot to indicate that it is compiling a response and to know when the user is typing a response.</span></span>
- <span data-ttu-id="b6e4e-157">El nuevo tipo de actividad `contactRelationUpdate` permite a su bot saber si se ha agregado a la lista de contactos del usuario o quitado de esta.</span><span class="sxs-lookup"><span data-stu-id="b6e4e-157">The new `contactRelationUpdate` Activity type enables your bot to know if it has been added to or removed from user's contact list.</span></span>

<span data-ttu-id="b6e4e-158">Cuando el bot recibe una actividad `conversationUpdate`, la propiedad `MembersRemoved` y la propiedad `MembersAdded` indican quién se agregó a la conversación o se quitó de esta.</span><span class="sxs-lookup"><span data-stu-id="b6e4e-158">When your bot receives a `conversationUpdate` activity, the `MembersRemoved` property and `MembersAdded` property will indicate who was added to or removed from the conversation.</span></span> <span data-ttu-id="b6e4e-159">Cuando el bot recibe una actividad `contactRelationUpdate`, la propiedad `Action` indica si el usuario agregó el bot a la lista de contactos o lo quitó de esta.</span><span class="sxs-lookup"><span data-stu-id="b6e4e-159">When your bot receives a `contactRelationUpdate` activity, the `Action` property will indicate whether the user added the bot to or removed the bot from their contact list.</span></span> <span data-ttu-id="b6e4e-160">Para más información sobre los tipos de actividad, consulte [Introducción a las actividades](~/dotnet/bot-builder-dotnet-activities.md).</span><span class="sxs-lookup"><span data-stu-id="b6e4e-160">For more information about activity types, see [Activities overview](~/dotnet/bot-builder-dotnet-activities.md).</span></span>

### <a name="addressing-messages"></a><span data-ttu-id="b6e4e-161">Direccionamiento de mensajes</span><span class="sxs-lookup"><span data-stu-id="b6e4e-161">Addressing messages</span></span>

<span data-ttu-id="b6e4e-162">El lugar donde se especifica la información de remitente, destinatario y canal dentro de un mensaje ha cambiado ligeramente en API v3:</span><span class="sxs-lookup"><span data-stu-id="b6e4e-162">Where the sender, recipient, and channel information is specified within a message has changed slightly in API v3:</span></span>

|<span data-ttu-id="b6e4e-163">Campo de API v1</span><span class="sxs-lookup"><span data-stu-id="b6e4e-163">API v1 field</span></span> | <span data-ttu-id="b6e4e-164">Campo de API v3</span><span class="sxs-lookup"><span data-stu-id="b6e4e-164">API v3 field</span></span>|
|--------|--------|
| <span data-ttu-id="b6e4e-165">Objeto `From`</span><span class="sxs-lookup"><span data-stu-id="b6e4e-165">`From` object</span></span> | <span data-ttu-id="b6e4e-166">Objeto `From`</span><span class="sxs-lookup"><span data-stu-id="b6e4e-166">`From` object</span></span> |
| <span data-ttu-id="b6e4e-167">Objeto `To`</span><span class="sxs-lookup"><span data-stu-id="b6e4e-167">`To` object</span></span> | <span data-ttu-id="b6e4e-168">Objeto `Recipient`</span><span class="sxs-lookup"><span data-stu-id="b6e4e-168">`Recipient` object</span></span> |
| <span data-ttu-id="b6e4e-169">Propiedad `ChannelConversationID`</span><span class="sxs-lookup"><span data-stu-id="b6e4e-169">`ChannelConversationID` property</span></span> | <span data-ttu-id="b6e4e-170">Objeto `Conversation`</span><span class="sxs-lookup"><span data-stu-id="b6e4e-170">`Conversation` object</span></span>|
| <span data-ttu-id="b6e4e-171">Propiedad `ChannelId`</span><span class="sxs-lookup"><span data-stu-id="b6e4e-171">`ChannelId` property</span></span> | <span data-ttu-id="b6e4e-172">Propiedad `ChannelId`</span><span class="sxs-lookup"><span data-stu-id="b6e4e-172">`ChannelId` property</span></span> |

<span data-ttu-id="b6e4e-173">Para más información sobre el direccionamiento de mensajes, consulte [Envío y recepción de actividades](~/dotnet/bot-builder-dotnet-connector.md).</span><span class="sxs-lookup"><span data-stu-id="b6e4e-173">For more information about addressing messages, see [Send and receive activities](~/dotnet/bot-builder-dotnet-connector.md).</span></span>

### <a name="sending-replies"></a><span data-ttu-id="b6e4e-174">Envío de respuestas</span><span class="sxs-lookup"><span data-stu-id="b6e4e-174">Sending replies</span></span>

<span data-ttu-id="b6e4e-175">En Bot Framework API v3, todas las respuestas al usuario se enviarán de manera asincrónica mediante una solicitud HTTP iniciada por separado, en lugar de en línea con HTTP POST para el mensaje entrante al bot.</span><span class="sxs-lookup"><span data-stu-id="b6e4e-175">In Bot Framework API v3, all replies to the user will be sent asynchronously over a separately initiated HTTP request rather than inline with the HTTP POST for the incoming message to the bot.</span></span> <span data-ttu-id="b6e4e-176">Dado que no se devuelve ningún mensaje en línea al usuario a través de Connector, el tipo de valor devuelto del método POST de su bot será `HttpResponseMessage`.</span><span class="sxs-lookup"><span data-stu-id="b6e4e-176">Since no message will be returned inline to the user through the Connector, the return type of your bot's post method will be `HttpResponseMessage`.</span></span> <span data-ttu-id="b6e4e-177">Esto significa que el bot no "devuelve" de manera sincrónica la cadena que desea enviar al usuario, sino que envía un mensaje de respuesta en cualquier punto del código en lugar de tener que contestar en respuesta al POST entrante.</span><span class="sxs-lookup"><span data-stu-id="b6e4e-177">This means that your bot does not synchronously "return" the string that you wish to send to the user, but instead sends a reply message at any point in your code instead of having to reply back as a response to the incoming POST.</span></span> <span data-ttu-id="b6e4e-178">Ambos métodos enviarán un mensaje a una conversación:</span><span class="sxs-lookup"><span data-stu-id="b6e4e-178">These two methods will both send a message to a conversation:</span></span>

- `SendToConversation`
- `ReplyToConversation`

<span data-ttu-id="b6e4e-179">El método `SendToConversation` anexará el mensaje especificado al final de la conversación, mientras que el método `ReplyToConversation` agregará (si las conversaciones lo admiten) el mensaje especificado como una respuesta directa a un mensaje anterior en la conversación.</span><span class="sxs-lookup"><span data-stu-id="b6e4e-179">The `SendToConversation` method will append the specified message to the end of the conversation, while the `ReplyToConversation` method will (for conversations that support it) add the specified message as a direct reply to a prior message in the conversation.</span></span> <span data-ttu-id="b6e4e-180">Para más información sobre estos métodos, consulte [Envío y recepción de actividades](~/dotnet/bot-builder-dotnet-connector.md).</span><span class="sxs-lookup"><span data-stu-id="b6e4e-180">For more information about these methods, see [Send and receive activities](~/dotnet/bot-builder-dotnet-connector.md).</span></span>

### <a name="starting-conversations"></a><span data-ttu-id="b6e4e-181">Inicio de conversaciones</span><span class="sxs-lookup"><span data-stu-id="b6e4e-181">Starting conversations</span></span>

<span data-ttu-id="b6e4e-182">En Bot Framework API v3, puede iniciar una conversación bien con el nuevo método `CreateDirectConversation` para iniciar una conversación privada con un único usuario, o con el nuevo método `CreateConversation` para iniciar una conversación en grupo con varios usuarios.</span><span class="sxs-lookup"><span data-stu-id="b6e4e-182">In Bot Framework API v3, you can start a conversation by either using the new method `CreateDirectConversation` to start a private conversation with a single user or by using the new method `CreateConversation` to start a group conversation with multiple users.</span></span> <span data-ttu-id="b6e4e-183">Para más información sobre cómo iniciar conversaciones, consulte [Envío y recepción de actividades](~/dotnet/bot-builder-dotnet-connector.md#start-a-conversation).</span><span class="sxs-lookup"><span data-stu-id="b6e4e-183">For more information about starting conversations, see [Send and receive activities](~/dotnet/bot-builder-dotnet-connector.md#start-a-conversation).</span></span>

### <a name="attachments-and-options"></a><span data-ttu-id="b6e4e-184">Opciones y datos adjuntos</span><span class="sxs-lookup"><span data-stu-id="b6e4e-184">Attachments and options</span></span>

<span data-ttu-id="b6e4e-185">Bot Framework API v3 introduce una implementación más sólida de datos adjuntos y tarjetas.</span><span class="sxs-lookup"><span data-stu-id="b6e4e-185">Bot Framework API v3 introduces a more robust implementation of attachments and cards.</span></span> <span data-ttu-id="b6e4e-186">El tipo `Options` ya no se admite en API v3 y en su lugar se ha reemplazado por las tarjetas.</span><span class="sxs-lookup"><span data-stu-id="b6e4e-186">The `Options` type is no longer supported in API v3 and has instead been replaced by cards.</span></span> <span data-ttu-id="b6e4e-187">Para más información sobre cómo agregar datos adjuntos a mensajes mediante. NET, consulte [Incorporación de datos adjuntos de elementos multimedia a mensajes](~/dotnet/bot-builder-dotnet-add-media-attachments.md) e [Incorporación de tarjetas enriquecidas a mensajes](~/dotnet/bot-builder-dotnet-add-rich-card-attachments.md).</span><span class="sxs-lookup"><span data-stu-id="b6e4e-187">For more information about adding attachments to messages using .NET, see [Add media attachments to messages](~/dotnet/bot-builder-dotnet-add-media-attachments.md) and [Add rich card attachments to messages](~/dotnet/bot-builder-dotnet-add-rich-card-attachments.md).</span></span>

### <a name="bot-data-storage-bot-state"></a><span data-ttu-id="b6e4e-188">Almacenamiento de datos de bot (estado del bot)</span><span class="sxs-lookup"><span data-stu-id="b6e4e-188">Bot data storage (bot state)</span></span>

<span data-ttu-id="b6e4e-189">En Bot Framework API v1, la API para administrar los datos de estado del bot se incluyó en la API de mensajería.</span><span class="sxs-lookup"><span data-stu-id="b6e4e-189">In Bot Framework API v1, the API for managing bot state data was folded into the messaging API.</span></span> <span data-ttu-id="b6e4e-190">En Bot Framework API v3, estas API son distintas.</span><span class="sxs-lookup"><span data-stu-id="b6e4e-190">In Bot Framework API v3, these APIs are separate.</span></span> <span data-ttu-id="b6e4e-191">Ahora, debe usar el servicio Bot State para obtener datos de estado (en lugar de suponer que se incluirán en el objeto `Message`) y para almacenar datos de estado (en lugar de pasarlos como parte del objeto `Message`).</span><span class="sxs-lookup"><span data-stu-id="b6e4e-191">Now, you must use the Bot State service to get state data (instead of assuming that it will be included within the `Message` object) and to store state data (instead of passing it as part of the `Message` object).</span></span> <span data-ttu-id="b6e4e-192">Para información sobre cómo administrar los datos de estado del bot mediante el servicio Bot State, consulte [Administración de datos de estado](~/dotnet/bot-builder-dotnet-state.md).</span><span class="sxs-lookup"><span data-stu-id="b6e4e-192">For information about managing bot state data using the Bot State service, [Manage state data](~/dotnet/bot-builder-dotnet-state.md).</span></span>

> [!IMPORTANT]
> <span data-ttu-id="b6e4e-193">No se recomienda State Service API de Bot Framework para entornos de producción y es posible que se encuentre en desuso en una versión futura.</span><span class="sxs-lookup"><span data-stu-id="b6e4e-193">The Bot Framework State Service API is not recommended for production environments, and may be deprecated in a future release.</span></span> <span data-ttu-id="b6e4e-194">Se recomienda actualizar el código de bot para usar el almacenamiento en memoria para realizar pruebas o usar una de las **extensiones de Azure** para bots de producción.</span><span class="sxs-lookup"><span data-stu-id="b6e4e-194">It is recommended that you update your bot code to use the in-memory storage for testing purposes or use one of the **Azure Extensions** for production bots.</span></span> <span data-ttu-id="b6e4e-195">Para más información, consulte el tema **Administración de datos de estado** para la implementación de [.NET](~/dotnet/bot-builder-dotnet-state.md) o [Node](~/nodejs/bot-builder-nodejs-state.md).</span><span class="sxs-lookup"><span data-stu-id="b6e4e-195">For more information, see the **Manage state data** topic for [.NET](~/dotnet/bot-builder-dotnet-state.md) or [Node](~/nodejs/bot-builder-nodejs-state.md) implementation.</span></span>

### <a name="webconfig-changes"></a><span data-ttu-id="b6e4e-196">Cambios de Web.config</span><span class="sxs-lookup"><span data-stu-id="b6e4e-196">Web.config changes</span></span>

<span data-ttu-id="b6e4e-197">Bot Framework API v1 almacenaba las propiedades de autenticación con estas claves en **Web.Config**:</span><span class="sxs-lookup"><span data-stu-id="b6e4e-197">Bot Framework API v1 stored the authentication properties with these keys in **Web.Config**:</span></span>

- `AppID`
- `AppSecret`

<span data-ttu-id="b6e4e-198">Bot Framework API v3 almacena las propiedades de autenticación con estas claves en **Web.Config**:</span><span class="sxs-lookup"><span data-stu-id="b6e4e-198">Bot Framework API v3 stores the authentication properties with these keys in **Web.Config**:</span></span>

- `MicrosoftAppID`
- `MicrosoftAppPassword`

## <a id="step-3"></a> <span data-ttu-id="b6e4e-199">Paso 3: Actualización de la configuración del bot en el portal de Bot Framework</span><span class="sxs-lookup"><span data-stu-id="b6e4e-199">Step 3: Update your bot settings in the Bot Framework Portal</span></span>

<span data-ttu-id="b6e4e-200">Después de haber actualizado el código de bot a API v3 y haberlo implementado en la nube, realice los siguientes pasos para finalizar el proceso de actualización:</span><span class="sxs-lookup"><span data-stu-id="b6e4e-200">After you have upgraded your bot code to API v3 and deployed it to the cloud, finish the upgrade process by completing these steps:</span></span> 

1. <span data-ttu-id="b6e4e-201">Inicie sesión en el [portal de Bot Framework](https://dev.botframework.com/).</span><span class="sxs-lookup"><span data-stu-id="b6e4e-201">Sign in to the [Bot Framework Portal](https://dev.botframework.com/).</span></span>

2. <span data-ttu-id="b6e4e-202">Haga clic en **My bots** (Mis bots) y seleccione el bot para abrir su panel.</span><span class="sxs-lookup"><span data-stu-id="b6e4e-202">Click **My bots** and select your bot to open its dashboard.</span></span> 

3. <span data-ttu-id="b6e4e-203">Haga clic en el vínculo **SETTINGS** (CONFIGURACIÓN) que se encuentra cerca de la esquina superior derecha de la página.</span><span class="sxs-lookup"><span data-stu-id="b6e4e-203">Click the **SETTINGS** link that is located near the top-right corner of the page.</span></span> 

4. <span data-ttu-id="b6e4e-204">En **Version 3.0** (Versión 3.0) dentro de la sección **Configuration** (Configuración), pegue el punto de conexión del bot en el campo **Messaging endpoint** (Punto de conexión de mensajería).</span><span class="sxs-lookup"><span data-stu-id="b6e4e-204">Under **Version 3.0** within the **Configuration** section, paste your bot's endpoint into the **Messaging endpoint** field.</span></span>  
<span data-ttu-id="b6e4e-205">![Configuración de la versión 3](~/media/upgrade/paste-new-v3-enpoint-url.png)</span><span class="sxs-lookup"><span data-stu-id="b6e4e-205">![Version 3 configuration](~/media/upgrade/paste-new-v3-enpoint-url.png)</span></span>

5. <span data-ttu-id="b6e4e-206">Seleccione el botón de radio **Versión 3.0** (Versión 3.0).</span><span class="sxs-lookup"><span data-stu-id="b6e4e-206">Select the **Version 3.0** radio button.</span></span>  
<span data-ttu-id="b6e4e-207">![Selección de la versión 3.0](~/media/upgrade/switch-to-v3-endpoint.png)</span><span class="sxs-lookup"><span data-stu-id="b6e4e-207">![Select version 3.0](~/media/upgrade/switch-to-v3-endpoint.png)</span></span>

6. <span data-ttu-id="b6e4e-208">Desplácese a la parte inferior de la página y haga clic en **Save changes** (Guardar cambios).</span><span class="sxs-lookup"><span data-stu-id="b6e4e-208">Scroll to the bottom of the page and click **Save changes**.</span></span>  
<span data-ttu-id="b6e4e-209">![Guardar cambios](~/media/upgrade/save-changes.png)</span><span class="sxs-lookup"><span data-stu-id="b6e4e-209">![Save changes](~/media/upgrade/save-changes.png)</span></span>