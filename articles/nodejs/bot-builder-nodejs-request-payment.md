---
title: Solicitud de pago | Microsoft Docs
description: Obtenga información sobre cómo enviar una solicitud de pago mediante el Bot Builder SDK para Node.js.
author: v-ducvo
ms.author: v-ducvo
manager: kamrani
ms.topic: article
ms.prod: bot-framework
ms.date: 12/13/2017
monikerRange: azure-bot-service-3.0
ms.openlocfilehash: 1e0c262c3a8dbef6430d51dab79a2d7c3cda938c
ms.sourcegitcommit: f576981342fb3361216675815714e24281e20ddf
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 07/18/2018
ms.locfileid: "39306260"
---
# <a name="request-payment"></a><span data-ttu-id="27bcc-103">Solicitud de pago</span><span class="sxs-lookup"><span data-stu-id="27bcc-103">Request payment</span></span>
> [!div class="op_single_selector"]
> - [.NET](../dotnet/bot-builder-dotnet-request-payment.md)
> - [Node.js](../nodejs/bot-builder-nodejs-request-payment.md)

<span data-ttu-id="27bcc-106">Si su bot permite a los usuarios comprar artículos, puede solicitar el pago mediante la inclusión de un tipo especial de botón dentro de un [tarjeta enriquecida](bot-builder-nodejs-send-rich-cards.md).</span><span class="sxs-lookup"><span data-stu-id="27bcc-106">If your bot enables users to purchase items, it can request payment by including a special type of button within a [rich card](bot-builder-nodejs-send-rich-cards.md).</span></span> <span data-ttu-id="27bcc-107">En este artículo se describe cómo enviar una solicitud de pago mediante el Bot Builder SDK para Node.js.</span><span class="sxs-lookup"><span data-stu-id="27bcc-107">This article describes how to send a payment request using the Bot Builder SDK for Node.js.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="27bcc-108">Requisitos previos</span><span class="sxs-lookup"><span data-stu-id="27bcc-108">Prerequisites</span></span>

<span data-ttu-id="27bcc-109">Para poder enviar una solicitud de pago mediante el Bot Builder SDK para Node.js, debe completar estas tareas previas.</span><span class="sxs-lookup"><span data-stu-id="27bcc-109">Before you can send a payment request using the Bot Builder SDK for Node.js, you must complete these prerequisite tasks.</span></span>

### <a name="register-and-configure-your-bot"></a><span data-ttu-id="27bcc-110">Registrar y configurar el bot</span><span class="sxs-lookup"><span data-stu-id="27bcc-110">Register and configure your bot</span></span>

<span data-ttu-id="27bcc-111">Actualice las variables de entorno del bot para `MicrosoftAppId` y `MicrosoftAppPassword` a los valores de identificador y contraseña de la aplicación que se generaron para el bot durante el proceso de [registro](~/bot-service-quickstart-registration.md).</span><span class="sxs-lookup"><span data-stu-id="27bcc-111">Update your bot's environment variables for `MicrosoftAppId` and `MicrosoftAppPassword` to the app ID and password values that were generated for your bot during the [registration](~/bot-service-quickstart-registration.md) process.</span></span> 

> [!NOTE]
> Para buscar **AppID** y **AppPassword** del bot, consulte [MicrosoftAppID y MicrosoftAppPassword](~/bot-service-manage-overview.md#microsoftappid-and-microsoftapppassword).

### <a name="create-and-configure-merchant-account"></a><span data-ttu-id="27bcc-113">Crear y configurar la cuenta de comerciante</span><span class="sxs-lookup"><span data-stu-id="27bcc-113">Create and configure merchant account</span></span>

1. <span data-ttu-id="27bcc-114"><a href="https://dashboard.stripe.com/register" target="_blank">Cree y active una cuenta de Stripe si todavía no tiene una.</a></span><span class="sxs-lookup"><span data-stu-id="27bcc-114"><a href="https://dashboard.stripe.com/register" target="_blank">Create and activate a Stripe account if you don't have one already.</a></span></span>

2. <span data-ttu-id="27bcc-115"><a href="https://seller.microsoft.com/en-us/dashboard/registration/seller/?accountprogram=botframework" target="_blank">Inicie sesión en el Centro de vendedores con su cuenta Microsoft.</a></span><span class="sxs-lookup"><span data-stu-id="27bcc-115"><a href="https://seller.microsoft.com/en-us/dashboard/registration/seller/?accountprogram=botframework" target="_blank">Sign in to Seller Center with your Microsoft account.</a></span></span>

3. <span data-ttu-id="27bcc-116">En el Centro de vendedores, conecte su cuenta con Stripe.</span><span class="sxs-lookup"><span data-stu-id="27bcc-116">Within Seller Center, connect your account with Stripe.</span></span>

4. <span data-ttu-id="27bcc-117">En el Centro de vendedores, vaya al panel y copie el valor de **MerchantID**.</span><span class="sxs-lookup"><span data-stu-id="27bcc-117">Within Seller Center, navigate to the Dashboard and copy the value of **MerchantID**.</span></span>

5. <span data-ttu-id="27bcc-118">Actualice la variable de entorno `PAYMENTS_MERCHANT_ID` al valor que ha copiado del panel del Centro de vendedores.</span><span class="sxs-lookup"><span data-stu-id="27bcc-118">Update the `PAYMENTS_MERCHANT_ID` environment variable to the value that you copied from the Seller Center Dashboard.</span></span> 

[!INCLUDE [Payment process overview](../includes/snippet-payment-process-overview.md)]

## <a name="payment-bot-sample"></a><span data-ttu-id="27bcc-119">Ejemplo del Bot de pago</span><span class="sxs-lookup"><span data-stu-id="27bcc-119">Payment Bot sample</span></span>

<span data-ttu-id="27bcc-120">El ejemplo de <a href="https://github.com/Microsoft/BotBuilder-Samples/tree/master/Node/sample-payments" target="_blank">Bot de pago</a> proporciona un ejemplo de un bot que envía una solicitud de pago mediante Node.js.</span><span class="sxs-lookup"><span data-stu-id="27bcc-120">The <a href="https://github.com/Microsoft/BotBuilder-Samples/tree/master/Node/sample-payments" target="_blank">Payment Bot</a> sample provides an example of a bot that sends a payment request by using Node.js.</span></span> <span data-ttu-id="27bcc-121">Para ver este bot de ejemplo en acción, puede <a href="https://webchat.botframework.com/embed/paymentsample?s=d39Bk7JOMzQ.cwA.Rig.dumLki9bs3uqfWFMjXPn5PFnQVmT2VAVR1Zl1iPi07k" target="_blank">probarlo en chat web</a>, <a href="https://join.skype.com/bot/9fbc0f17-43eb-40fe-bf3b-af151e6ce45e" target="_blank">agregarlo como contacto de Skype</a>, o descargar el ejemplo de bot de pago y ejecutarlo localmente con Bot Framework Emulator.</span><span class="sxs-lookup"><span data-stu-id="27bcc-121">To see this sample bot in action, you can <a href="https://webchat.botframework.com/embed/paymentsample?s=d39Bk7JOMzQ.cwA.Rig.dumLki9bs3uqfWFMjXPn5PFnQVmT2VAVR1Zl1iPi07k" target="_blank">try it out in web chat</a>, <a href="https://join.skype.com/bot/9fbc0f17-43eb-40fe-bf3b-af151e6ce45e" target="_blank">add it as a Skype contact</a>, or download the payment bot sample and run it locally using the Bot Framework Emulator.</span></span> 

> [!NOTE]
> Para completar el proceso de pago de un extremo a otro mediante el ejemplo de **Bot de pago** en un chat web o Skype, debe especificar una tarjeta de crédito o de débito válidas desde la cuenta de Microsoft (es decir, una tarjeta válida de un emisor de tarjetas de Estados Unidos). No se le cobrará a la tarjeta y el CVV de la tarjeta no se comprobará, ya que el ejemplo del **Bot de pago** se ejecuta en modo de prueba (es decir, `PAYMENTS_LIVEMODE` está establecido en `false` en **.env**).

<span data-ttu-id="27bcc-124">En las secciones siguientes de este artículo se describen las tres partes del proceso de pago, en el contexto del ejemplo del **Bot de pago**.</span><span class="sxs-lookup"><span data-stu-id="27bcc-124">The next few sections of this article describe the three parts of the payment process, in the context of the **Payment Bot** sample.</span></span>

## <a id="request-payment"></a> <span data-ttu-id="27bcc-125">Solicitar el pago</span><span class="sxs-lookup"><span data-stu-id="27bcc-125">Requesting payment</span></span>

<span data-ttu-id="27bcc-126">Para que el bot solicite el pago a un usuario, puede enviar un mensaje que contenga una [tarjeta enriquecida](bot-builder-nodejs-send-rich-cards.md) con un botón que especifique `type` de "pago".</span><span class="sxs-lookup"><span data-stu-id="27bcc-126">Your bot can request payment from a user by sending a message that contains a [rich card](bot-builder-nodejs-send-rich-cards.md) with a button that specifies `type` of "payment".</span></span> <span data-ttu-id="27bcc-127">En este fragmento de código del ejemplo del **Bot de pago** se crea un mensaje que contiene una tarjeta principal con un botón **Buy** donde el usuario puede hacer clic (o pulsar) para iniciar el proceso de pago.</span><span class="sxs-lookup"><span data-stu-id="27bcc-127">This code snippet from the **Payment Bot** sample creates a message that contains a Hero card with a **Buy** button that the user can click (or tap) to initiate the payment process.</span></span> 

[!code-javascript[Request payment](../includes/code/node-request-payment.js#requestPayment)]

<span data-ttu-id="27bcc-128">En este ejemplo, el tipo del botón se especifica como `payments.PaymentActionType`, que define la aplicación como "pago".</span><span class="sxs-lookup"><span data-stu-id="27bcc-128">In this example, the button's type is specified as `payments.PaymentActionType`, which the app defines as "payment".</span></span> <span data-ttu-id="27bcc-129">El valor del botón se rellena con la función `createPaymentRequest`, que devuelve un objeto `PaymentRequest` que contiene información sobre los métodos de pago admitidos, detalles y opciones.</span><span class="sxs-lookup"><span data-stu-id="27bcc-129">The button's value is populated by the `createPaymentRequest` function, which returns a `PaymentRequest` object that contains information about supported payment methods, details, and options.</span></span> <span data-ttu-id="27bcc-130">Para obtener más información acerca de los detalles de implementación, consulte **app.js** dentro del ejemplo del <a href="https://github.com/Microsoft/BotBuilder-Samples/tree/master/Node/sample-payments" target="_blank">Bot de pago</a>.</span><span class="sxs-lookup"><span data-stu-id="27bcc-130">For more information about implementation details, see **app.js** within the <a href="https://github.com/Microsoft/BotBuilder-Samples/tree/master/Node/sample-payments" target="_blank">Payment Bot</a> sample.</span></span>

<span data-ttu-id="27bcc-131">Esta captura de pantalla muestra la tarjeta principal prominente (con el botón **Buy**) generada por el fragmento de código anterior.</span><span class="sxs-lookup"><span data-stu-id="27bcc-131">This screenshot shows the Hero card (with **Buy** button) that's generated by the code snippet above.</span></span> 
 
![Bot de ejemplo de pagos](../media/payments-bot-buy.png) 

> [!IMPORTANT]
> Cualquier usuario que tenga acceso al botón **Buy** puede usarlo para iniciar el proceso de pago. En el contexto de una conversación grupal, no es posible designar un botón para su uso solo por un usuario específico. 

## <a id="user-experience"></a> <span data-ttu-id="27bcc-135">Experiencia del usuario</span><span class="sxs-lookup"><span data-stu-id="27bcc-135">User experience</span></span>

<span data-ttu-id="27bcc-136">Cuando un usuario hace clic en el botón **Buy**, se lo dirige a la experiencia web de pago para que proporcione toda la información necesaria de pago, de envío y de contacto a través de su cuenta de Microsoft.</span><span class="sxs-lookup"><span data-stu-id="27bcc-136">When a user clicks the **Buy** button, he or she is directed to the payment web experience to provide all required payment, shipping, and contact information via their Microsoft account.</span></span> 

![Pago de Microsoft](../media/microsoft-payment.png)

### <a name="http-callbacks"></a><span data-ttu-id="27bcc-138">Devoluciones de llamadas HTTP</span><span class="sxs-lookup"><span data-stu-id="27bcc-138">HTTP callbacks</span></span>

<span data-ttu-id="27bcc-139">Las devoluciones de llamada HTTP se enviarán al bot para indicar que debe realizar determinadas operaciones.</span><span class="sxs-lookup"><span data-stu-id="27bcc-139">HTTP callbacks will be sent to your bot to indicate that it should perform certain operations.</span></span> <span data-ttu-id="27bcc-140">Cada devolución de llamada será un evento que contiene estos valores de propiedad:</span><span class="sxs-lookup"><span data-stu-id="27bcc-140">Each callback will be an event that contains these property values:</span></span> 

| <span data-ttu-id="27bcc-141">Propiedad</span><span class="sxs-lookup"><span data-stu-id="27bcc-141">Property</span></span> | <span data-ttu-id="27bcc-142">Valor</span><span class="sxs-lookup"><span data-stu-id="27bcc-142">Value</span></span> |
|----|----|
| `type` | <span data-ttu-id="27bcc-143">invoke</span><span class="sxs-lookup"><span data-stu-id="27bcc-143">invoke</span></span> | 
| `name` | <span data-ttu-id="27bcc-144">Indica el tipo de operación que debe realizar el bot (p. ej., actualización de la dirección de envío, actualización de la opción de envío, finalización del pago).</span><span class="sxs-lookup"><span data-stu-id="27bcc-144">Indicates the type of operation that the bot should perform (e.g., shipping address update, shipping option update, payment complete).</span></span> | 
| `value` | <span data-ttu-id="27bcc-145">La carga útil de la solicitud en formato JSON.</span><span class="sxs-lookup"><span data-stu-id="27bcc-145">The request payload in JSON format.</span></span> | 
| `relatesTo` |  <span data-ttu-id="27bcc-146">Describe el canal y el usuario que están asociados con la solicitud de pago.</span><span class="sxs-lookup"><span data-stu-id="27bcc-146">Describes the channel and user that are associated with the payment request.</span></span> | 

> [!NOTE]
> `invoke` es un tipo de evento especial que está reservado para uso en Microsoft Bot Framework. El remitente de un evento `invoke` esperará que su bot confirme la devolución de llamada mediante el envío de una respuesta HTTP.

## <a id="process-callbacks"></a> <span data-ttu-id="27bcc-149">Procesamiento de las devoluciones de llamada</span><span class="sxs-lookup"><span data-stu-id="27bcc-149">Processing callbacks</span></span>

[!INCLUDE [Process callbacks overview](../includes/snippet-payment-process-callbacks-overview.md)]

### <a name="shipping-address-update-and-shipping-option-update-callbacks"></a><span data-ttu-id="27bcc-150">Devoluciones de llamada de actualización de dirección de envío y actualización de opción de envío</span><span class="sxs-lookup"><span data-stu-id="27bcc-150">Shipping Address Update and Shipping Option Update callbacks</span></span>

<span data-ttu-id="27bcc-151">Cuando se recibe una devolución de llamada de actualización de dirección de envío o de actualización de opción de envío, se indicará al bot el estado actual de los detalles de pago del cliente en la propiedad `value` del evento.</span><span class="sxs-lookup"><span data-stu-id="27bcc-151">When receiving a Shipping Address Update or a Shipping Option Update callback, your bot will be provided with the current state of the payment details from the client in the event's `value` property.</span></span>
<span data-ttu-id="27bcc-152">Como comerciante, debe tratar estas devoluciones de llamada como estáticas; dados los detalles de pago de entrada, calculará algunos detalles de pago de salida, y se producirá un error si el estado de entrada proporcionado por el cliente no es válido por algún motivo.</span><span class="sxs-lookup"><span data-stu-id="27bcc-152">As a merchant, you should treat these callbacks as static, given input payment details you will calculate some output payment details and fail if the input state provided by the client is invalid for any reason.</span></span> <span data-ttu-id="27bcc-153">Si el bot determina que la información especificada es válida tal cual, simplemente envíe el código de estado HTTP `200 OK` junto con los detalles de pago sin modificar.</span><span class="sxs-lookup"><span data-stu-id="27bcc-153">If the bot determines the given information is valid as-is, simply send HTTP status code `200 OK` along with the unmodified payment details.</span></span> <span data-ttu-id="27bcc-154">Como alternativa, el bot puede enviar el código de estado HTTP `200 OK` junto con los detalles de pago actualizados que deben aplicarse antes de que se puede procesar el pedido.</span><span class="sxs-lookup"><span data-stu-id="27bcc-154">Alternatively, the bot may send HTTP status code `200 OK` along with an updated payment details that should be applied before the order can be processed.</span></span> <span data-ttu-id="27bcc-155">En algunos casos, el bot puede determinar que la información actualizada no es válida y que el pedido no puede procesarse tal cual.</span><span class="sxs-lookup"><span data-stu-id="27bcc-155">In some cases, your bot may determine that the updated information is invalid and the order cannot be processed as-is.</span></span> <span data-ttu-id="27bcc-156">Por ejemplo, la dirección de envío del usuario puede especificar un país al que el proveedor del producto realiza envíos.</span><span class="sxs-lookup"><span data-stu-id="27bcc-156">For example, the user's shipping address may specify a country to which the product supplier does not ship.</span></span> <span data-ttu-id="27bcc-157">En ese caso, el bot puede enviar el código de estado HTTP `200 OK` y un mensaje que rellena la propiedad de error del objeto de detalles de pago.</span><span class="sxs-lookup"><span data-stu-id="27bcc-157">In that case, the bot may send HTTP status code `200 OK` and a message populating the error property of the payment details object.</span></span> <span data-ttu-id="27bcc-158">El envío de cualquier código de estado HTTP en el rango de `400` o `500` producirá un error genérico para el cliente.</span><span class="sxs-lookup"><span data-stu-id="27bcc-158">Sending any HTTP status code in the `400` or `500` range to will result in a generic error  for the customer.</span></span>

### <a name="payment-complete-callbacks"></a><span data-ttu-id="27bcc-159">Devoluciones de llamada de finalización de pago</span><span class="sxs-lookup"><span data-stu-id="27bcc-159">Payment Complete callbacks</span></span>

<span data-ttu-id="27bcc-160">Al recibir una devolución de llamada de finalización de pago, el bot le proporcionará una copia de la solicitud de pago inicial, sin modificar, así como los objetos de la respuesta de pago en la propiedad `value` del evento.</span><span class="sxs-lookup"><span data-stu-id="27bcc-160">When receiving a Payment Complete callback, your bot will be provided with a copy of the initial, unmodified payment request as well as the payment response objects in the event's `value` property.</span></span> <span data-ttu-id="27bcc-161">El objeto de respuesta de pago contendrá las selecciones finales realizadas por el cliente junto con un token de pago.</span><span class="sxs-lookup"><span data-stu-id="27bcc-161">The payment response object will contain the final selections made by the customer along with a payment token.</span></span> <span data-ttu-id="27bcc-162">El bot debe tener la oportunidad de recalcular la solicitud de pago final en función de la solicitud de pago inicial y las selecciones finales del cliente.</span><span class="sxs-lookup"><span data-stu-id="27bcc-162">Your bot should take the opportunity to recalculate the final payment request based on the initial payment request and the customer's final selections.</span></span> <span data-ttu-id="27bcc-163">Suponiendo que se determina que las selecciones del cliente son válidas, el bot debería comprobar el importe y la moneda en el encabezado del token de pago para asegurarse de que coincidan con la solicitud de pago final.</span><span class="sxs-lookup"><span data-stu-id="27bcc-163">Assuming the customer's selections are determined to be valid, the bot should verify the amount and currency in the payment token header to ensure that they match the final payment request.</span></span>  <span data-ttu-id="27bcc-164">Si el bot decide cobrar al cliente, solo debe cobrar el importe en el encabezado del token de pago, ya que este es el precio que confirmó el cliente.</span><span class="sxs-lookup"><span data-stu-id="27bcc-164">If the bot decides to charge the customer it should only charge the amount in the payment token header as this is the price the customer confirmed.</span></span> <span data-ttu-id="27bcc-165">Si hay una discrepancia entre los valores que espera el bot y los valores que recibió en la devolución de llamada de finalización de pago, se puede producir un error en la solicitud de pago mediante el envío del código de estado HTTP `200 OK`, además de establecer el campo de resultados en `failure`.</span><span class="sxs-lookup"><span data-stu-id="27bcc-165">If there is a mismatch between the values that the bot expects and the values that it received in the Payment Complete callback, it can fail the payment request by sending HTTP status code `200 OK` along with setting the result field to `failure`.</span></span>   

<span data-ttu-id="27bcc-166">Además de comprobar los detalles de pago, el bot también debe comprobar que el pedido puede cumplirse, antes de iniciar el procesamiento de pagos.</span><span class="sxs-lookup"><span data-stu-id="27bcc-166">In addition to verifying payment details, the bot should also verify that the order can be fulfilled, before it initiates payment processing.</span></span> <span data-ttu-id="27bcc-167">Por ejemplo, puede que desee comprobar que los elementos que se compran siguen estando en existencias.</span><span class="sxs-lookup"><span data-stu-id="27bcc-167">For example, it may want to verify that the item(s) being purchased are still available in stock.</span></span> <span data-ttu-id="27bcc-168">Si los valores son correctos y el procesador de pago ha cargado correctamente el token de pago, a continuación, el bot debería responder con el código de estado HTTP `200 OK`, además de establecer el campo de resultados en `success` a fin de que la experiencia web de pago muestre la confirmación de pago.</span><span class="sxs-lookup"><span data-stu-id="27bcc-168">If the values are correct and your payment processor has successfully charged the payment token, then the bot should respond with HTTP status code `200 OK` along with setting the result field to `success` in order for the payment web experience to display the payment confirmation.</span></span> <span data-ttu-id="27bcc-169">El token de pago que recibe el bot solo puede usarse una vez, por parte del comerciante que lo ha solicitado, y debe enviarse a Stripe (el único procesador de pagos que admite actualmente Bot Framework).</span><span class="sxs-lookup"><span data-stu-id="27bcc-169">The payment token that the bot receives can only be used once, by the merchant that requested it, and must be submitted to Stripe (the only payment processor that the Bot Framework currently supports).</span></span> <span data-ttu-id="27bcc-170">El envío de cualquier código de estado HTTP en el rango de `400` o `500` producirá un error genérico para el cliente.</span><span class="sxs-lookup"><span data-stu-id="27bcc-170">Sending any HTTP status code in the `400` or `500` range to will result in a generic error for the customer.</span></span>

<span data-ttu-id="27bcc-171">En este fragmento de código del ejemplo del **Bot de pago** se procesan las devoluciones de llamada que recibe el bot.</span><span class="sxs-lookup"><span data-stu-id="27bcc-171">This code snippet from the **Payment Bot** sample processes the callbacks that the bot receives.</span></span> 

[!code-javascript[Request payment](../includes/code/node-request-payment.js#processCallback)]

<span data-ttu-id="27bcc-172">En este ejemplo, el bot examina la propiedad `name` del evento entrante para identificar el tipo de operación que debe realizarse y, a continuación, llama a los métodos adecuados para procesar la devolución de llamada.</span><span class="sxs-lookup"><span data-stu-id="27bcc-172">In this example, the bot examines the `name` property of the incoming event to identify the type of operation it needs to perform, and then calls the appropriate method(s) to process the callback.</span></span> <span data-ttu-id="27bcc-173">Para obtener más información acerca de los detalles de implementación, consulte **app.js** dentro del ejemplo del <a href="https://github.com/Microsoft/BotBuilder-Samples/tree/master/Node/sample-payments" target="_blank">Bot de pago</a>.</span><span class="sxs-lookup"><span data-stu-id="27bcc-173">For more information about implementation details, see **app.js** within the <a href="https://github.com/Microsoft/BotBuilder-Samples/tree/master/Node/sample-payments" target="_blank">Payment Bot</a> sample.</span></span>

## <a name="testing-a-payment-bot"></a><span data-ttu-id="27bcc-174">Probar un bot de pago</span><span class="sxs-lookup"><span data-stu-id="27bcc-174">Testing a payment bot</span></span>

[!INCLUDE [Test a payment bot](../includes/snippet-payment-test-bot.md)]

<span data-ttu-id="27bcc-175">En el ejemplo del <a href="https://github.com/Microsoft/BotBuilder-Samples/tree/master/Node/sample-payments" target="_blank">Bot de pago</a>, la variable de entorno `PAYMENTS_LIVEMODE` en **.env** determina si las devoluciones de llamada de finalización de pago contendrán tokens de pago emulados o tokens de pago reales.</span><span class="sxs-lookup"><span data-stu-id="27bcc-175">In the <a href="https://github.com/Microsoft/BotBuilder-Samples/tree/master/Node/sample-payments" target="_blank">Payment Bot</a> sample, the `PAYMENTS_LIVEMODE` environment variable in **.env** determines whether Payment Complete callbacks will contain emulated payment tokens or real payment tokens.</span></span> <span data-ttu-id="27bcc-176">Si `PAYMENTS_LIVEMODE` está establecido en `false`, se agrega un encabezado a la solicitud de pago saliente del bot para indicar que el bot está en modo de prueba, y la devolución de llamada de finalización de pago contendrá un token de pago emulado que no se puede cargar.</span><span class="sxs-lookup"><span data-stu-id="27bcc-176">If `PAYMENTS_LIVEMODE` is set to `false`, a header is added to the bot's outbound payment request to indicate that the bot is in test mode, and the Payment Complete callback will contain an emulated payment token that cannot be charged.</span></span> <span data-ttu-id="27bcc-177">Si `PAYMENTS_LIVEMODE` está establecido en `true`, el encabezado que indica que el bot está en modo de prueba se omite de la solicitud de pago saliente del bot, y la devolución de llamada de finalización de pago contendrá un token de pago real que el bot enviará a Stripe para el procesamiento del pago.</span><span class="sxs-lookup"><span data-stu-id="27bcc-177">If `PAYMENTS_LIVEMODE` is set to `true`, the header which indicates that the bot is in test mode is omitted from the bot's outbound payment request, and the Payment Complete callback will contain a real payment token that the bot will submit to Stripe for payment processing.</span></span> <span data-ttu-id="27bcc-178">Se trata de una transacción real que genera cargos en el instrumento de pago especificado.</span><span class="sxs-lookup"><span data-stu-id="27bcc-178">This will be a real transaction that results in charges to the specified payment instrument.</span></span> 

## <a name="additional-resources"></a><span data-ttu-id="27bcc-179">Recursos adicionales</span><span class="sxs-lookup"><span data-stu-id="27bcc-179">Additional resources</span></span>

- <span data-ttu-id="27bcc-180"><a href="https://github.com/Microsoft/BotBuilder-Samples/tree/master/Node/sample-payments" target="_blank">Ejemplo del Bot de pago</a></span><span class="sxs-lookup"><span data-stu-id="27bcc-180"><a href="https://github.com/Microsoft/BotBuilder-Samples/tree/master/Node/sample-payments" target="_blank">Payment Bot sample</a></span></span>
- [<span data-ttu-id="27bcc-181">Incorporación de tarjetas enriquecidas a mensajes</span><span class="sxs-lookup"><span data-stu-id="27bcc-181">Add rich card attachments to messages</span></span>](bot-builder-nodejs-send-rich-cards.md)
- <span data-ttu-id="27bcc-182"><a href="http://www.w3.org/Payments/" target="_blank">Pagos web en W3C</a></span><span class="sxs-lookup"><span data-stu-id="27bcc-182"><a href="http://www.w3.org/Payments/" target="_blank">Web Payments at W3C</a></span></span> 
