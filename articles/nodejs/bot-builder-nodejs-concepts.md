---
title: Conceptos clave del SDK de Bot Builder para Node.js | Microsoft Docs
description: Comprenda los conceptos clave y las herramientas para la compilación e implementación de los bots de conversación disponibles en el SDK de Bot Builder para Node.js.
author: DeniseMak
ms.author: v-demak
manager: kamrani
ms.topic: article
ms.prod: bot-framework
ms.date: 12/13/2017
monikerRange: azure-bot-service-3.0
ms.openlocfilehash: fd81b9dfe5d3e16096ffd6ab25c1ee23ff77f79f
ms.sourcegitcommit: 2dc75701b169d822c9499e393439161bc87639d2
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 08/24/2018
ms.locfileid: "42904933"
---
# <a name="key-concepts-in-the-bot-builder-sdk-for-nodejs"></a><span data-ttu-id="7e11d-103">Conceptos clave del SDK de Bot Builder para Node.js</span><span class="sxs-lookup"><span data-stu-id="7e11d-103">Key concepts in the Bot Builder SDK for Node.js</span></span>

[!INCLUDE [pre-release-label](../includes/pre-release-label-v3.md)]

> [!div class="op_single_selector"]
> - [.NET](../dotnet/bot-builder-dotnet-concepts.md)
> - [Node.js](../nodejs/bot-builder-nodejs-concepts.md)

<span data-ttu-id="7e11d-106">En este artículo se presentan los conceptos clave del SDK de Bot Builder para Node.js.</span><span class="sxs-lookup"><span data-stu-id="7e11d-106">This article introduces key concepts in the Bot Builder SDK for Node.js.</span></span> <span data-ttu-id="7e11d-107">Consulte la [información general sobre Bot Framework](../overview-introduction-bot-framework.md) para una introducción a Bot Framework.</span><span class="sxs-lookup"><span data-stu-id="7e11d-107">For an introduction to Bot Framework, see [Bot Framework overview](../overview-introduction-bot-framework.md).</span></span>

## <a name="connector"></a><span data-ttu-id="7e11d-108">Conector</span><span class="sxs-lookup"><span data-stu-id="7e11d-108">Connector</span></span>

<span data-ttu-id="7e11d-109">Bot Framework Connector es un servicio que conecta el bot a varios *canales*, que son clientes como Skype, Facebook, Slack y SMS.</span><span class="sxs-lookup"><span data-stu-id="7e11d-109">The Bot Framework Connector is a service that connects your bot to multiple *channels*, which are clients like Skype, Facebook, Slack, and SMS.</span></span> <span data-ttu-id="7e11d-110">Connector facilita la comunicación entre el bot y el usuario mediante la retransmisión de mensajes del bot al canal y viceversa.</span><span class="sxs-lookup"><span data-stu-id="7e11d-110">The Connector facilitates communication between bot and user by relaying messages from bot to channel and from channel to bot.</span></span> <span data-ttu-id="7e11d-111">La lógica del bot está hospedada como un servicio web que recibe mensajes de los usuarios a través del servicio Connector y las respuestas del bot se envían a Connector mediante HTTPS POST.</span><span class="sxs-lookup"><span data-stu-id="7e11d-111">Your bot's logic is hosted as a web service that receives messages from users through the Connector service, and your bot's replies are sent to the Connector using HTTPS POST.</span></span> 

<span data-ttu-id="7e11d-112">El SDK de Bot Builder para Node.js proporciona las clases [UniversalBot][UniversalBot] y [ChatConnector][ChatConnector] para configurar el bot para que envíe y reciba mensajes a través de Bot Framework Connector.</span><span class="sxs-lookup"><span data-stu-id="7e11d-112">The Bot Builder SDK for Node.js provides the [UniversalBot][UniversalBot] and [ChatConnector][ChatConnector] classes for configuring the bot to send and receive messages through the Bot Framework Connector.</span></span> <span data-ttu-id="7e11d-113">La clase `UniversalBot` conforma los cerebros del bot.</span><span class="sxs-lookup"><span data-stu-id="7e11d-113">The `UniversalBot` class forms the brains of your bot.</span></span> <span data-ttu-id="7e11d-114">Es responsable de administrar todas las conversaciones que el bot tiene con un usuario.</span><span class="sxs-lookup"><span data-stu-id="7e11d-114">It's responsible for managing all the conversations your bot has with a user.</span></span> <span data-ttu-id="7e11d-115">La clase `ChatConnector` conecta el bot al servicio de Bot Framework Connector.</span><span class="sxs-lookup"><span data-stu-id="7e11d-115">The `ChatConnector` class connects your bot to the Bot Framework Connector Service.</span></span>
<span data-ttu-id="7e11d-116">Si quiere ver un ejemplo que muestra cómo usar estas clases, consulte [Creación de un bot con el SDK de Bot Builder para Node.js](bot-builder-nodejs-quickstart.md).</span><span class="sxs-lookup"><span data-stu-id="7e11d-116">For an example that demonstrates using these classes, see [Create a bot with the Bot Builder SDK for Node.js](bot-builder-nodejs-quickstart.md).</span></span>

<span data-ttu-id="7e11d-117">El conector también normaliza los mensajes que envía el bot a canales de modo que pueda desarrollar el bot independientemente de la plataforma.</span><span class="sxs-lookup"><span data-stu-id="7e11d-117">The Connector also normalizes the messages that the bot sends to channels so that you can develop your bot in a platform-agnostic way.</span></span> <span data-ttu-id="7e11d-118">Normalizar un mensaje implica convertirlo del esquema de Bot Framework al esquema del canal.</span><span class="sxs-lookup"><span data-stu-id="7e11d-118">Normalizing a message involves converting it from the Bot Framework’s schema into the channel’s schema.</span></span> <span data-ttu-id="7e11d-119">En casos donde el canal no admite todos los aspectos del esquema de Framework, el conector intentará convertir el mensaje a un formato compatible con el canal.</span><span class="sxs-lookup"><span data-stu-id="7e11d-119">In cases where the channel does not support all aspects of the framework’s schema, the Connector will try to convert the message to a format that the channel supports.</span></span> <span data-ttu-id="7e11d-120">Por ejemplo, si el bot envía al canal SMS un mensaje que contiene una tarjeta con los botones de acción, el conector puede presentar la tarjeta como imagen e incluir las acciones como vínculos en el texto del mensaje.</span><span class="sxs-lookup"><span data-stu-id="7e11d-120">For example, if the bot sends a message that contains a card with action buttons to the SMS channel, the Connector may render the card as an image and include the actions as links in the message’s text.</span></span> <span data-ttu-id="7e11d-121">El [Inspector de canales][ChannelInspector] es una herramienta web que muestra cómo el conector presenta los mensajes en distintos canales.</span><span class="sxs-lookup"><span data-stu-id="7e11d-121">The [Channel Inspector][ChannelInspector] is a web tool that shows you how the Connector renders messages on various channels.</span></span>

<span data-ttu-id="7e11d-122">`ChatConnector` requiere configurar un punto de conexión de API dentro del bot.</span><span class="sxs-lookup"><span data-stu-id="7e11d-122">The `ChatConnector` requires an API endpoint to be setup within your bot.</span></span> <span data-ttu-id="7e11d-123">Con el SDK de Node.js, esto habitualmente se logra al instalar el módulo `restify` de Node.js.</span><span class="sxs-lookup"><span data-stu-id="7e11d-123">With the Node.js SDK, this is usually accomplished by installing the `restify` Node.js module.</span></span> <span data-ttu-id="7e11d-124">También se pueden crear bots para la consola con [ConsoleConnector][ConsoleConnector], que no requiere ningún punto de conexión de API.</span><span class="sxs-lookup"><span data-stu-id="7e11d-124">Bots can also be created for the console using the [ConsoleConnector][ConsoleConnector], which does not require an API endpoint.</span></span>

## <a name="messages"></a><span data-ttu-id="7e11d-125">error de Hadoop</span><span class="sxs-lookup"><span data-stu-id="7e11d-125">Messages</span></span>

<span data-ttu-id="7e11d-126">Los mensajes pueden constar de texto que se mostrará, texto que se dirá, datos adjuntos, tarjetas enriquecidas y acciones sugeridas.</span><span class="sxs-lookup"><span data-stu-id="7e11d-126">Messages can consist of text to be displayed, text to be spoken, attachments, rich cards, and suggested actions.</span></span> <span data-ttu-id="7e11d-127">Puede usar el método [session.send][SessionSend] para enviar mensajes en respuesta a un mensaje del usuario.</span><span class="sxs-lookup"><span data-stu-id="7e11d-127">You use the [session.send][SessionSend] method to send messages in response to a message from the user.</span></span> <span data-ttu-id="7e11d-128">El bot puede llamar a `send` tantas veces como desee en respuesta a un mensaje del usuario.</span><span class="sxs-lookup"><span data-stu-id="7e11d-128">Your bot may call `send` as many times as it likes in response to a message from the user.</span></span> <span data-ttu-id="7e11d-129">Para ver un ejemplo que muestre esto, consulte [Respond to user messages][RespondMessages] (Respuesta a mensajes de usuario).</span><span class="sxs-lookup"><span data-stu-id="7e11d-129">For an example that demonstrates this, see [Respond to user messages][RespondMessages].</span></span>

<span data-ttu-id="7e11d-130">Para ver un ejemplo que muestra cómo enviar una tarjeta gráfica enriquecida con botones interactivos en los que el usuario hace clic para iniciar una acción, consulte [Add rich cards to messages](bot-builder-nodejs-send-rich-cards.md) (Incorporación de tarjetas enriquecidas a mensajes).</span><span class="sxs-lookup"><span data-stu-id="7e11d-130">For an example that demonstrates how to send a rich graphical card containing interactive buttons that the user clicks to initiate an action, see [Add rich cards to messages](bot-builder-nodejs-send-rich-cards.md).</span></span> <span data-ttu-id="7e11d-131">Para ver un ejemplo que muestra cómo enviar y recibir datos adjuntos, consulte [Send attachments](bot-builder-nodejs-send-receive-attachments.md) (Envío de datos adjuntos).</span><span class="sxs-lookup"><span data-stu-id="7e11d-131">For an example that demonstrates how to send and receive attachments, see [Send attachments](bot-builder-nodejs-send-receive-attachments.md).</span></span> <span data-ttu-id="7e11d-132">Para ver un ejemplo que muestra cómo enviar un mensaje que especifica el texto que el bot dirá en un canal habilitado para voz, consulte [Add speech to messages](bot-builder-nodejs-text-to-speech.md) (Incorporación de voz a mensajes).</span><span class="sxs-lookup"><span data-stu-id="7e11d-132">For an example that demonstrates how to send a message that specifies text to be spoken by your bot on a speech-enabled channel, see [Add speech to messages](bot-builder-nodejs-text-to-speech.md).</span></span> <span data-ttu-id="7e11d-133">Para ver un ejemplo que muestra cómo enviar acciones sugeridas, consulte [Send suggested actions](bot-builder-nodejs-send-suggested-actions.md) (Envío de acciones sugeridas).</span><span class="sxs-lookup"><span data-stu-id="7e11d-133">For an example that demonstrates how to send suggested actions, see [Send suggested actions](bot-builder-nodejs-send-suggested-actions.md).</span></span>

## <a name="dialogs"></a><span data-ttu-id="7e11d-134">Diálogos</span><span class="sxs-lookup"><span data-stu-id="7e11d-134">Dialogs</span></span>
<span data-ttu-id="7e11d-135">Los diálogos ayudan a organizar la lógica de la conversación en el bot y son fundamentales para [diseñar el flujo de la conversación](../bot-service-design-conversation-flow.md).</span><span class="sxs-lookup"><span data-stu-id="7e11d-135">Dialogs help you organize the conversational logic in your bot and are fundamental to [designing conversation flow](../bot-service-design-conversation-flow.md).</span></span> <span data-ttu-id="7e11d-136">Para ver una introducción a los diálogos, consulte [Manage a conversation with dialogs](bot-builder-nodejs-dialog-manage-conversation.md) (Administración de una conversación con diálogos).</span><span class="sxs-lookup"><span data-stu-id="7e11d-136">For an introduction to dialogs, see [Manage a conversation with dialogs](bot-builder-nodejs-dialog-manage-conversation.md).</span></span>

## <a name="actions"></a><span data-ttu-id="7e11d-137">Acciones</span><span class="sxs-lookup"><span data-stu-id="7e11d-137">Actions</span></span>
<span data-ttu-id="7e11d-138">Querrá diseñar el bot de manera que pueda controlar interrupciones como solicitudes de cancelación o ayuda en cualquier momento durante el flujo de la conversación.</span><span class="sxs-lookup"><span data-stu-id="7e11d-138">You'll want to design your bot to be able to handle interruptions like requests for cancellation or help at any time during the conversation flow.</span></span> <span data-ttu-id="7e11d-139">El SDK de Bot Builder para Node.js proporciona controladores de mensajes globales que desencadenan acciones como la cancelación o la invocación de otros diálogos.</span><span class="sxs-lookup"><span data-stu-id="7e11d-139">The Bot Builder SDK for Node.js provides global message handlers that trigger actions like cancellation or invoking other dialogs.</span></span> <span data-ttu-id="7e11d-140">Consulte [Control de acciones del usuario](bot-builder-nodejs-dialog-actions.md) para ver ejemplos de cómo usar los controladores [triggerAction][triggerAction].</span><span class="sxs-lookup"><span data-stu-id="7e11d-140">See [Handle user actions](bot-builder-nodejs-dialog-actions.md) for examples of how to use [triggerAction][triggerAction] handlers.</span></span>
<!--[Handling cancel](bot-builder-nodejs-manage-conversation-flow.md#handling-cancel), [Confirming interruptions](bot-builder-nodejs-manage-conversation-flow.md#confirming-interruptions) and-->


## <a name="recognizers"></a><span data-ttu-id="7e11d-141">Reconocedores</span><span class="sxs-lookup"><span data-stu-id="7e11d-141">Recognizers</span></span>
<span data-ttu-id="7e11d-142">Cuando los usuarios piden algo al bot, como "ayuda" o "buscar noticias", el bot debe entender qué es lo que pide el usuario y luego realizar la acción correspondiente.</span><span class="sxs-lookup"><span data-stu-id="7e11d-142">When users ask your bot for something, like "help" or "find news", your bot needs to understand what the user is asking for and then take the appropriate action.</span></span> <span data-ttu-id="7e11d-143">Puede diseñar el bot de manera que reconozca las intenciones en función de la información del usuario y que asocie esa intención con acciones.</span><span class="sxs-lookup"><span data-stu-id="7e11d-143">You can design your bot to recognize intents based on the user’s input and associate that intent with actions.</span></span> 

<span data-ttu-id="7e11d-144">Puede usar el reconocedor integrado de expresiones regulares que el SDK de Bot Builder proporciona, llamar a un servicio externo (como la API de LUIS) o implementar un reconocedor personalizado para determinar la intención del usuario.</span><span class="sxs-lookup"><span data-stu-id="7e11d-144">You can use the built-in regular expression recognizer that the Bot Builder SDK provides, call an external service such as the LUIS API, or implement a custom recognizer to determine the user's intent.</span></span> <span data-ttu-id="7e11d-145">Consulte [Recognize user intent](bot-builder-nodejs-recognize-intent-messages.md) (Reconocimiento de intenciones del usuario) para ver ejemplos que muestran cómo agregar reconocedores al bot y usarlos para desencadenar acciones.</span><span class="sxs-lookup"><span data-stu-id="7e11d-145">See [Recognize user intent](bot-builder-nodejs-recognize-intent-messages.md) for examples that demonstrate how to add recognizers to your bot and use them to trigger actions.</span></span>


## <a name="saving-state"></a><span data-ttu-id="7e11d-146">Almacenamiento del estado</span><span class="sxs-lookup"><span data-stu-id="7e11d-146">Saving State</span></span>

<span data-ttu-id="7e11d-147">Una clave del diseño correcto de bots consiste en realizar el seguimiento del contexto de una conversación, para que el bot recuerde cosas como la última pregunta que hizo el usuario.</span><span class="sxs-lookup"><span data-stu-id="7e11d-147">A key to good bot design is to track the context of a conversation, so that your bot remembers things like the last question the user asked.</span></span> <span data-ttu-id="7e11d-148">Los bots creados con el SDK de Bot Builder están diseñados para no tener estado, con el fin de que se puedan escalar fácilmente para ejecutarse en varios nodos de ejecución.</span><span class="sxs-lookup"><span data-stu-id="7e11d-148">Bots built using Bot Builder SDK are designed to be be stateless so that they can easily be scaled to run across multiple compute nodes.</span></span> <span data-ttu-id="7e11d-149">Bot Framework proporciona un sistema de almacenamiento que almacena datos de bot de manera que el servicio web del bot se puede escalar.</span><span class="sxs-lookup"><span data-stu-id="7e11d-149">The Bot Framework provides a storage system that stores bot data, so that the bot web service can be scaled.</span></span> <span data-ttu-id="7e11d-150">Debido a esto, generalmente debe evitar guardar el estado con un cierre de función o una variable global.</span><span class="sxs-lookup"><span data-stu-id="7e11d-150">Because of that you should generally avoid saving state using a global variable or function closure.</span></span> <span data-ttu-id="7e11d-151">Si lo hace, generará problemas cuando intente escalar horizontalmente el bot.</span><span class="sxs-lookup"><span data-stu-id="7e11d-151">Doing so will create issues when you want to scale out your bot.</span></span> <span data-ttu-id="7e11d-152">En su lugar, use las propiedades siguientes del objeto [session][Session] del bot para guardar los datos relativos a un usuario o una conversación:</span><span class="sxs-lookup"><span data-stu-id="7e11d-152">Instead, use the following properties of your bot's [session][Session] object to save data relative to a user or conversation:</span></span>

* <span data-ttu-id="7e11d-153">**userData** almacena información globalmente para el usuario a través de todas las conversaciones.</span><span class="sxs-lookup"><span data-stu-id="7e11d-153">**userData** stores information globally for the user across all conversations.</span></span>
* <span data-ttu-id="7e11d-154">**conversationData** almacena información globalmente para una sola conversación.</span><span class="sxs-lookup"><span data-stu-id="7e11d-154">**conversationData** stores information globally for a single conversation.</span></span> <span data-ttu-id="7e11d-155">Estos datos son visibles para todos los participantes de la conversación, por lo que debe tener cuidado al almacenar datos en esta propiedad.</span><span class="sxs-lookup"><span data-stu-id="7e11d-155">This data is visible to everyone within the conversation so exercise with care when storing data to this property.</span></span> <span data-ttu-id="7e11d-156">Esta opción está habilitada de manera predeterminada y puede deshabilitarla con la configuración [persistConversationData][PersistConversationData] del bot.</span><span class="sxs-lookup"><span data-stu-id="7e11d-156">It’s enabled by default and you can disable it using the bot's [persistConversationData][PersistConversationData] setting.</span></span>
* <span data-ttu-id="7e11d-157">**privateConversationData** almacena información globalmente para una sola conversación, pero se trata de datos privados específicos para el usuario actual.</span><span class="sxs-lookup"><span data-stu-id="7e11d-157">**privateConversationData** stores information globally for a single conversation but it is private data specific to the current user.</span></span> <span data-ttu-id="7e11d-158">Estos datos abarcan todos los diálogos, por lo que resulta útil para almacenar el estado temporal que quiere limpiar cuando termina la conversación.</span><span class="sxs-lookup"><span data-stu-id="7e11d-158">This data spans all dialogs so it’s useful for storing temporary state that you want cleaned up when the conversation ends.</span></span>
* <span data-ttu-id="7e11d-159">**dialogData** conserva la información de una instancia de diálogo único.</span><span class="sxs-lookup"><span data-stu-id="7e11d-159">**dialogData** persists information for a single dialog instance.</span></span> <span data-ttu-id="7e11d-160">Esto es esencial para almacenar la información temporal entre los pasos de una [cascada](bot-builder-nodejs-dialog-waterfall.md) en un diálogo.</span><span class="sxs-lookup"><span data-stu-id="7e11d-160">This is essential for storing temporary information in between the steps of a [waterfall](bot-builder-nodejs-dialog-waterfall.md) in a dialog.</span></span>

<span data-ttu-id="7e11d-161">Para ver ejemplos que muestran cómo usar estas propiedades para almacenar y recuperar datos, consulte [Manage state data](bot-builder-nodejs-state.md) (Administración de datos de estado).</span><span class="sxs-lookup"><span data-stu-id="7e11d-161">For examples that demonstrate how to use these properties to store and retrieve data, see [Manage state data](bot-builder-nodejs-state.md).</span></span>

## <a name="natural-language-understanding"></a><span data-ttu-id="7e11d-162">Comprensión del lenguaje natural</span><span class="sxs-lookup"><span data-stu-id="7e11d-162">Natural language understanding</span></span>

<span data-ttu-id="7e11d-163">Bot Builder le permite usar LUIS para agregar la comprensión del lenguaje natural al bot con la clase [LuisRecognizer][LuisRecognizer].</span><span class="sxs-lookup"><span data-stu-id="7e11d-163">Bot Builder lets you use LUIS to add natural language understanding to your bot using the [LuisRecognizer][LuisRecognizer] class.</span></span> <span data-ttu-id="7e11d-164">Puede agregar una instancia de **LuisRecognizer** que hace referencia al modelo de lenguaje publicado y luego agregar controladores para que realicen acciones en respuesta a las expresiones del usuario.</span><span class="sxs-lookup"><span data-stu-id="7e11d-164">You can add an instance of a **LuisRecognizer** that references your published language model and then add handlers to take actions in response to the user's utterances.</span></span> <span data-ttu-id="7e11d-165">Vea este tutorial de 10 minutos para ver a LUIS en acción:</span><span class="sxs-lookup"><span data-stu-id="7e11d-165">To see LUIS in action watch the following 10 minute tutorial:</span></span>

* <span data-ttu-id="7e11d-166">[Tutorial de Microsoft LUIS][LUISVideo] (vídeo)</span><span class="sxs-lookup"><span data-stu-id="7e11d-166">[Microsoft LUIS Tutorial][LUISVideo] (video)</span></span>

## <a name="next-steps"></a><span data-ttu-id="7e11d-167">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="7e11d-167">Next steps</span></span>
> [!div class="nextstepaction"]
> [Introducción a los diálogos](bot-builder-nodejs-dialog-overview.md)



[PersistConversationData]: https://docs.botframework.com/en-us/node/builder/chat-reference/interfaces/_botbuilder_d_.iuniversalbotsettings.html#persistconversationdata
[UniversalBot]: https://docs.botframework.com/en-us/node/builder/chat-reference/classes/_botbuilder_d_.universalbot.html
[ChatConnector]: https://docs.botframework.com/en-us/node/builder/chat-reference/classes/_botbuilder_d_.chatconnector.html
[ConsoleConnector]: https://docs.botframework.com/en-us/node/builder/chat-reference/classes/_botbuilder_d_.consoleconnector.html

[ChannelInspector]: ../bot-service-channel-inspector.md

[Session]: https://docs.botframework.com/en-us/node/builder/chat-reference/classes/_botbuilder_d_.session.html
[SessionSend]: https://docs.botframework.com/en-us/node/builder/chat-reference/classes/_botbuilder_d_.session#send

[triggerAction]: https://docs.botframework.com/en-us/node/builder/chat-reference/classes/_botbuilder_d_.dialog.html#triggeraction
[waterfall]: bot-builder-nodejs-prompts.md

[RespondMessages]:bot-builder-nodejs-use-default-message-handler.md

[LUISRecognizer]: https://docs.botframework.com/en-us/node/builder/chat-reference/classes/_botbuilder_d_.luisrecognizer
[LUISVideo]: https://vimeo.com/145499419
