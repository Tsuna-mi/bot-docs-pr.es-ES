---
title: Solución de problemas de bots | Microsoft Docs
description: Solución de problemas generales de desarrollo de bots con las preguntas técnicas más frecuentes.
author: DeniseMak
ms.author: v-demak
manager: kamrani
ms.topic: article
ms.prod: bot-framework
ms.date: 09/26/2018
ms.openlocfilehash: 410f50f02dcea2bb64ccf0389e20f5cb76e2fd6b
ms.sourcegitcommit: 3cb288cf2f09eaede317e1bc8d6255becf1aec61
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 09/27/2018
ms.locfileid: "47389844"
---
# <a name="troubleshooting-general-problems"></a><span data-ttu-id="12fb4-103">Solución de problemas generales</span><span class="sxs-lookup"><span data-stu-id="12fb4-103">Troubleshooting general problems</span></span>
<span data-ttu-id="12fb4-104">Estas preguntas más frecuentes pueden ayudarle a solucionar problemas comunes de desarrollo de bots o problemas de funcionamiento.</span><span class="sxs-lookup"><span data-stu-id="12fb4-104">These frequently asked questions can help you to troubleshoot common bot development or operational issues.</span></span>

## <a name="how-can-i-troubleshoot-issues-with-my-bot"></a><span data-ttu-id="12fb4-105">¿Cómo puedo solucionar problemas con mi bot?</span><span class="sxs-lookup"><span data-stu-id="12fb4-105">How can I troubleshoot issues with my bot?</span></span>

1. <span data-ttu-id="12fb4-106">Depure el código de fuente del bot con [Visual Studio Code](debug-bots-locally-vscode.md) o [Visual Studio](https://docs.microsoft.com/en-us/visualstudio/debugger/navigating-through-code-with-the-debugger?view=vs-2017).</span><span class="sxs-lookup"><span data-stu-id="12fb4-106">Debug your bot's source code with [Visual Studio Code](debug-bots-locally-vscode.md) or [Visual Studio](https://docs.microsoft.com/en-us/visualstudio/debugger/navigating-through-code-with-the-debugger?view=vs-2017).</span></span>
2. <span data-ttu-id="12fb4-107">Pruebe el bot con el [emulador](bot-service-debug-emulator.md) antes de implementarlo en la nube.</span><span class="sxs-lookup"><span data-stu-id="12fb4-107">Test your bot using the [emulator](bot-service-debug-emulator.md) before you deploy it to the cloud.</span></span>
3. <span data-ttu-id="12fb4-108">Implemente el bot en una plataforma de hospedaje en la nube como Azure y, a continuación, pruebe la conectividad con el bot mediante el control de chat web integrado en el panel del bot en el <a href="https://dev.botframework.com" target="_blank">portal de Bot Framework</a>.</span><span class="sxs-lookup"><span data-stu-id="12fb4-108">Deploy your bot to a cloud hosting platform such as Azure and then test connectivity to your bot by using the built-in web chat control on your bot's dashboard in the <a href="https://dev.botframework.com" target="_blank">Bot Framework Portal</a>.</span></span> <span data-ttu-id="12fb4-109">Si tiene problemas con el bot después de implementarlo en Azure, puede consultar este artículo de blog: [Understanding Azure troubleshooting and support](https://azure.microsoft.com/en-us/blog/understanding-azure-troubleshooting-and-support/) (Descripción de la solución de problemas de Azure y soporte técnico).</span><span class="sxs-lookup"><span data-stu-id="12fb4-109">If you encounter issues with your bot after you deploy it to Azure, you might consider using this blog article: [Understanding Azure troubleshooting and support](https://azure.microsoft.com/en-us/blog/understanding-azure-troubleshooting-and-support/).</span></span>
4. <span data-ttu-id="12fb4-110">Descarte la [autenticación][TroubleshootingAuth] como un posible problema.</span><span class="sxs-lookup"><span data-stu-id="12fb4-110">Rule out [authentication][TroubleshootingAuth] as a possible issue.</span></span>
5. <span data-ttu-id="12fb4-111">Pruebe el bot en Skype.</span><span class="sxs-lookup"><span data-stu-id="12fb4-111">Test your bot on Skype.</span></span> <span data-ttu-id="12fb4-112">Esto le ayudará a validar la experiencia del usuario de un extremo a otro.</span><span class="sxs-lookup"><span data-stu-id="12fb4-112">This will help you to validate the end-to-end user experience.</span></span>
6. <span data-ttu-id="12fb4-113">Considere la posibilidad de probar el bot en canales que tienen requisitos de autenticación adicionales, como Direct Line o Web Chat.</span><span class="sxs-lookup"><span data-stu-id="12fb4-113">Consider testing your bot on channels that have additional authentication requirements such as Direct Line or Web Chat.</span></span>

## <a name="how-can-i-troubleshoot-authentication-issues"></a><span data-ttu-id="12fb4-114">¿Cómo puedo solucionar los problemas de autenticación?</span><span class="sxs-lookup"><span data-stu-id="12fb4-114">How can I troubleshoot authentication issues?</span></span>

<span data-ttu-id="12fb4-115">Para más información acerca de cómo solucionar problemas de autenticación con el bot, consulte [Solución de problemas de autenticación de Bot Framework][TroubleshootingAuth].</span><span class="sxs-lookup"><span data-stu-id="12fb4-115">For details about troubleshooting authentication issues with your bot, see [troubleshooting][TroubleshootingAuth] Bot Framework authentication.</span></span>

## <a name="im-using-the-bot-builder-sdk-for-net-how-can-i-troubleshoot-issues-with-my-bot"></a><span data-ttu-id="12fb4-116">Estoy usando Bot Builder SDK para .NET.</span><span class="sxs-lookup"><span data-stu-id="12fb4-116">I'm using the Bot Builder SDK for .NET.</span></span> <span data-ttu-id="12fb4-117">¿Cómo puedo solucionar problemas con mi bot?</span><span class="sxs-lookup"><span data-stu-id="12fb4-117">How can I troubleshoot issues with my bot?</span></span>

<span data-ttu-id="12fb4-118">**Busque las excepciones.**</span><span class="sxs-lookup"><span data-stu-id="12fb4-118">**Look for exceptions.**</span></span>  
<span data-ttu-id="12fb4-119">En Visual Studio 2017, vaya a **Depurar** > **Windows** > **Configuración de excepciones**.</span><span class="sxs-lookup"><span data-stu-id="12fb4-119">In Visual Studio 2017, go to **Debug** > **Windows** > **Exception Settings**.</span></span> <span data-ttu-id="12fb4-120">En la ventana **Configuración de excepciones**, seleccione la casilla de verificación **Interrumpir cuando se produzcan** junto a **Excepciones de Common Language Runtime**.</span><span class="sxs-lookup"><span data-stu-id="12fb4-120">In the **Exceptions Settings** window, select the **Break When Thrown** checkbox next to **Common Language Runtime Exceptions**.</span></span> <span data-ttu-id="12fb4-121">También puede ver la salida del diagnóstico en la ventana de salida cuando hay excepciones iniciadas o no controladas.</span><span class="sxs-lookup"><span data-stu-id="12fb4-121">You may also see diagnostics output in your Output window when there are thrown or unhandled exceptions.</span></span>

<span data-ttu-id="12fb4-122">**Examine la pila de llamadas.**</span><span class="sxs-lookup"><span data-stu-id="12fb4-122">**Look at the call stack.**</span></span>  
<span data-ttu-id="12fb4-123">En Visual Studio, puede elegir si depura [Solo mi código](https://msdn.microsoft.com/en-us/library/dn457346.aspx) o no.</span><span class="sxs-lookup"><span data-stu-id="12fb4-123">In Visual Studio, you can choose whether or you are debugging [Just My Code](https://msdn.microsoft.com/en-us/library/dn457346.aspx) or not.</span></span> <span data-ttu-id="12fb4-124">Examinar la pila de llamadas completa puede proporcionar información adicional sobre los problemas.</span><span class="sxs-lookup"><span data-stu-id="12fb4-124">Examining the full call stack may provide additional insight into any issues.</span></span>

<span data-ttu-id="12fb4-125">**Asegúrese de que todos los métodos de diálogo finalizan con un plan para tratar el mensaje siguiente.**</span><span class="sxs-lookup"><span data-stu-id="12fb4-125">**Ensure all dialog methods end with a plan to handle the next message.**</span></span>  
<span data-ttu-id="12fb4-126">Todos los métodos `IDialog` deberían finalizarse con `IDialogStack.Call`, `IDialogStack.Wait` o `IDialogStack.Done`.</span><span class="sxs-lookup"><span data-stu-id="12fb4-126">All `IDialog` methods should complete with `IDialogStack.Call`, `IDialogStack.Wait`, or `IDialogStack.Done`.</span></span> <span data-ttu-id="12fb4-127">Estos métodos `IDialogStack` se exponen mediante el elemento `IDialogContext` que se pasa a cada método `IDialog`.</span><span class="sxs-lookup"><span data-stu-id="12fb4-127">These `IDialogStack` methods are exposed through the `IDialogContext` that is passed to every `IDialog` method.</span></span> <span data-ttu-id="12fb4-128">Al llamar a `IDialogStack.Forward` y usar los avisos del sistema con los métodos estáticos `PromptDialog`, se llamará a uno de estos métodos en su implementación.</span><span class="sxs-lookup"><span data-stu-id="12fb4-128">Calling `IDialogStack.Forward` and using the system prompts through the `PromptDialog` static methods will call one of these methods in their implementation.</span></span>

<span data-ttu-id="12fb4-129">**Asegúrese de que todos los diálogos son serializables.**</span><span class="sxs-lookup"><span data-stu-id="12fb4-129">**Ensure that all dialogs are serializable.**</span></span>  
<span data-ttu-id="12fb4-130">Esto puede ser tan simple como utilizar el atributo `[Serializable]` en las implementaciones de `IDialog`.</span><span class="sxs-lookup"><span data-stu-id="12fb4-130">This can be as simple as using the `[Serializable]` attribute on your `IDialog` implementations.</span></span> <span data-ttu-id="12fb4-131">Sin embargo, tenga en cuenta que los cierres de método anónimos no son serializables si hacen referencia a su entorno externo para capturar variables.</span><span class="sxs-lookup"><span data-stu-id="12fb4-131">However, be aware that anonymous method closures are not serializable if they reference their outside environment to capture variables.</span></span> <span data-ttu-id="12fb4-132">Bot Framework admite un suplente de serialización basado en reflexión para ayudar a serializar los tipos que no están marcados como serializables.</span><span class="sxs-lookup"><span data-stu-id="12fb4-132">The Bot Framework supports a reflection-based serialization surrogate to help serialize types that are not marked as serializable.</span></span>

## <a name="why-doesnt-the-typing-activity-do-anything"></a><span data-ttu-id="12fb4-133">¿Por qué la actividad de escritura no hace nada?</span><span class="sxs-lookup"><span data-stu-id="12fb4-133">Why doesn't the Typing activity do anything?</span></span>
<span data-ttu-id="12fb4-134">Algunos canales no admiten actualizaciones de escritura transitorias en su cliente.</span><span class="sxs-lookup"><span data-stu-id="12fb4-134">Some channels do not support transient typing updates in their client.</span></span>

## <a name="what-is-the-difference-between-the-connector-library-and-builder-library-in-the-sdk"></a><span data-ttu-id="12fb4-135">¿Cuál es la diferencia entre la biblioteca Connector y la biblioteca Builder en el SDK?</span><span class="sxs-lookup"><span data-stu-id="12fb4-135">What is the difference between the Connector library and Builder library in the SDK?</span></span>

<span data-ttu-id="12fb4-136">La biblioteca Connector es la exposición de la API REST.</span><span class="sxs-lookup"><span data-stu-id="12fb4-136">The Connector library is the exposition of the REST API.</span></span> <span data-ttu-id="12fb4-137">La biblioteca Builder agrega el modelo de programación de diálogos conversacionales y otras características como avisos, cascadas, cadenas y relleno guiado de formularios.</span><span class="sxs-lookup"><span data-stu-id="12fb4-137">The Builder library adds the conversational dialog programming model and other features such as prompts, waterfalls, chains, and guided form completion.</span></span> <span data-ttu-id="12fb4-138">La biblioteca Builder también proporciona acceso a servicios de Cognitive Services como LUIS.</span><span class="sxs-lookup"><span data-stu-id="12fb4-138">The Builder library also provides access to cognitive services such as LUIS.</span></span>

## <a name="what-causes-an-error-with-http-status-code-429-too-many-requests"></a><span data-ttu-id="12fb4-139">¿Qué provoca un error con código de estado HTTP 429 "Demasiadas solicitudes"?</span><span class="sxs-lookup"><span data-stu-id="12fb4-139">What causes an error with HTTP status code 429 "Too Many Requests"?</span></span>

<span data-ttu-id="12fb4-140">Una respuesta de error con código de estado HTTP 429 indica que se han emitido demasiadas solicitudes en un período de tiempo determinado.</span><span class="sxs-lookup"><span data-stu-id="12fb4-140">An error response with HTTP status code 429 indicates that too many requests have been issued in a given amount of time.</span></span> <span data-ttu-id="12fb4-141">El cuerpo de la respuesta debe incluir una explicación del problema y también puede especificar el intervalo mínimo necesario entre solicitudes.</span><span class="sxs-lookup"><span data-stu-id="12fb4-141">The body of the response should include an explanation of the problem and may also specify the minimum required interval between requests.</span></span> <span data-ttu-id="12fb4-142">Un posible origen de este error es [ngrok](https://ngrok.com/).</span><span class="sxs-lookup"><span data-stu-id="12fb4-142">One possible source for this error is [ngrok](https://ngrok.com/).</span></span> <span data-ttu-id="12fb4-143">Si está en un plan gratuito y alcanza los límites de ngrok, vaya a la página de precios y límites en su sitio web para más [opciones](https://ngrok.com/product#pricing).</span><span class="sxs-lookup"><span data-stu-id="12fb4-143">If you are on a free plan and running into ngrok's limits, go to the pricing and limits page on their website for more [options](https://ngrok.com/product#pricing).</span></span> 
 

## <a name="how-can-i-run-background-tasks-in-aspnet"></a><span data-ttu-id="12fb4-144">¿Cómo puedo ejecutar tareas en segundo plano en ASP.NET?</span><span class="sxs-lookup"><span data-stu-id="12fb4-144">How can I run background tasks in ASP.NET?</span></span> 

<span data-ttu-id="12fb4-145">En algunos casos, es posible que desee iniciar una tarea asincrónica que espera unos segundos y, a continuación, ejecuta algún código para borrar el perfil de usuario o restablecer el estado de la conversación o el diálogo.</span><span class="sxs-lookup"><span data-stu-id="12fb4-145">In some cases, you may want to initiate an asynchronous task that waits for a few seconds and then executes some code to clear the user profile or reset conversation/dialog state.</span></span> <span data-ttu-id="12fb4-146">Para más información sobre cómo lograr esto, consulte [Cómo ejecutar tareas en segundo plano en ASP.NET](https://www.hanselman.com/blog/HowToRunBackgroundTasksInASPNET.aspx).</span><span class="sxs-lookup"><span data-stu-id="12fb4-146">For details about how to achieve this, see [How to run Background Tasks in ASP.NET](https://www.hanselman.com/blog/HowToRunBackgroundTasksInASPNET.aspx).</span></span> <span data-ttu-id="12fb4-147">En particular, considere el uso de [HostingEnvironment.QueueBackgroundWorkItem](https://msdn.microsoft.com/en-us/library/dn636893(v=vs.110).aspx).</span><span class="sxs-lookup"><span data-stu-id="12fb4-147">In particular, consider using [HostingEnvironment.QueueBackgroundWorkItem](https://msdn.microsoft.com/en-us/library/dn636893(v=vs.110).aspx).</span></span> 


## <a name="how-do-user-messages-relate-to-https-method-calls"></a><span data-ttu-id="12fb4-148">¿Cómo se relacionan los mensajes de usuario con las llamadas a métodos HTTPS?</span><span class="sxs-lookup"><span data-stu-id="12fb4-148">How do user messages relate to HTTPS method calls?</span></span>

<span data-ttu-id="12fb4-149">Cuando el usuario envía un mensaje por un canal, el servicio web de Bot Framework emitirá una solicitud HTTPS POST al punto de conexión de servicio web del bot.</span><span class="sxs-lookup"><span data-stu-id="12fb4-149">When the user sends a message over a channel, the Bot Framework web service will issue an HTTPS POST to the bot's web service endpoint.</span></span> <span data-ttu-id="12fb4-150">El bot puede enviar cero, uno o varios mensajes al usuario en ese canal emitiendo una solicitud HTTPS POST independiente a Bot Framework por cada mensaje que envía.</span><span class="sxs-lookup"><span data-stu-id="12fb4-150">The bot may send zero, one, or many messages back to the user on that channel, by issuing a separate HTTPS POST to the Bot Framework for each message that it sends.</span></span>

## <a name="my-bot-is-slow-to-respond-to-the-first-message-it-receives-how-can-i-make-it-faster"></a><span data-ttu-id="12fb4-151">Mi bot es lento para responder al primer mensaje que recibe.</span><span class="sxs-lookup"><span data-stu-id="12fb4-151">My bot is slow to respond to the first message it receives.</span></span> <span data-ttu-id="12fb4-152">¿Cómo puedo hacerlo más rápido?</span><span class="sxs-lookup"><span data-stu-id="12fb4-152">How can I make it faster?</span></span>

<span data-ttu-id="12fb4-153">Los bots son servicios web y algunas plataformas de hospedaje, incluida Azure, ponen automáticamente el servicio en modo de suspensión si no recibe tráfico en un período de tiempo determinado.</span><span class="sxs-lookup"><span data-stu-id="12fb4-153">Bots are web services and some hosting platforms, including Azure, automatically put the service to sleep if it does not receive traffic for a certain period of time.</span></span> <span data-ttu-id="12fb4-154">Si le ocurre esto al bot, este debe comenzar desde cero la próxima vez que recibe un mensaje, lo que hace que su respuesta sea mucho más lenta que si ya se estaba ejecutando.</span><span class="sxs-lookup"><span data-stu-id="12fb4-154">If this happens to your bot, it must restart from scratch the next time it receives a message, which makes its response much slower than if it was already running.</span></span>

<span data-ttu-id="12fb4-155">Algunas plataformas de hospedaje le permiten configurar el servicio para que no entre en suspensión.</span><span class="sxs-lookup"><span data-stu-id="12fb4-155">Some hosting platforms enable you to configure your service so that it will not be put to sleep.</span></span> <span data-ttu-id="12fb4-156">Para hacer esto en Azure, vaya al servicio del bot en [Azure Portal](https://portal.azure.com), seleccione **Configuración de la aplicación** y, a continuación, seleccione **Siempre disponible**.</span><span class="sxs-lookup"><span data-stu-id="12fb4-156">To do this in Azure, navigate to your bot's service in the [Azure Portal](https://portal.azure.com), select **Application settings**, and then select **Always on**.</span></span> <span data-ttu-id="12fb4-157">Esta opción está disponible en la mayoría, pero no para todos los planes de servicio.</span><span class="sxs-lookup"><span data-stu-id="12fb4-157">This option is available in most, but not all, service plans.</span></span>

## <a name="how-can-i-guarantee-message-delivery-order"></a><span data-ttu-id="12fb4-158">¿Cómo puedo garantizar el orden de entrega de los mensajes?</span><span class="sxs-lookup"><span data-stu-id="12fb4-158">How can I guarantee message delivery order?</span></span>

<span data-ttu-id="12fb4-159">Bot Framework conservará el orden de los mensajes tanto como sea posible.</span><span class="sxs-lookup"><span data-stu-id="12fb4-159">The Bot Framework will preserve message ordering as much as possible.</span></span> <span data-ttu-id="12fb4-160">Por ejemplo, si envía un mensaje A y espera la finalización de esa operación HTTP antes de iniciar otra operación HTTP para enviar el mensaje B, Bot Framework comprenderá automáticamente que el mensaje A debe preceder al mensaje B. Sin embargo, en general, el orden de entrega de los mensajes no se puede garantizar puesto que el canal es el responsable último de la entrega de los mensajes y puede reordenar los mensajes.</span><span class="sxs-lookup"><span data-stu-id="12fb4-160">For example, if you send message A and wait for the completion of that HTTP operation before you initiate another HTTP operation to send message B, the Bot Framework will automatically understand that message A should precede message B. However, in general, message delivery order cannot be guaranteed since the channel is ultimately responsible for message delivery and may reorder messages.</span></span> <span data-ttu-id="12fb4-161">Para mitigar el riesgo de que los mensajes se entreguen en orden incorrecto, puede implementar un retraso de tiempo entre los mensajes.</span><span class="sxs-lookup"><span data-stu-id="12fb4-161">To mitigate the risk of messages being delivered in the wrong order, you might choose to implement a time delay between messages.</span></span>

## <a name="how-can-i-intercept-all-messages-between-the-user-and-my-bot"></a><span data-ttu-id="12fb4-162">¿Cómo puedo interceptar todos los mensajes entre el usuario y el bot?</span><span class="sxs-lookup"><span data-stu-id="12fb4-162">How can I intercept all messages between the user and my bot?</span></span>

<span data-ttu-id="12fb4-163">Mediante Bot Builder SDK para .NET, puede proporcionar implementaciones de las interfaces `IPostToBot` e `IBotToUser` al contenedor de inserción de dependencias `Autofac`.</span><span class="sxs-lookup"><span data-stu-id="12fb4-163">Using the Bot Builder SDK for .NET, you can provide implementations of the `IPostToBot` and `IBotToUser` interfaces to the `Autofac` dependency injection container.</span></span> <span data-ttu-id="12fb4-164">Mediante Bot Builder SDK para Node.js, puede usar middleware para el mismo propósito.</span><span class="sxs-lookup"><span data-stu-id="12fb4-164">Using the Bot Builder SDK for Node.js, you can use middleware for much the same purpose.</span></span> <span data-ttu-id="12fb4-165">El repositorio [BotBuilder-Azure](https://github.com/Microsoft/BotBuilder-Azure) contiene bibliotecas de C# y Node.js que registrarán estos datos en una tabla de Azure.</span><span class="sxs-lookup"><span data-stu-id="12fb4-165">The [BotBuilder-Azure](https://github.com/Microsoft/BotBuilder-Azure) repository contains C# and Node.js libraries that will log this data to an Azure table.</span></span>

## <a name="why-are-parts-of-my-message-text-being-dropped"></a><span data-ttu-id="12fb4-166">¿Por qué se eliminan partes del texto del mensaje?</span><span class="sxs-lookup"><span data-stu-id="12fb4-166">Why are parts of my message text being dropped?</span></span>

<span data-ttu-id="12fb4-167">Bot Framework y muchos canales interpretan el texto como si tuviese formato [Markdown](https://en.wikipedia.org/wiki/Markdown).</span><span class="sxs-lookup"><span data-stu-id="12fb4-167">The Bot Framework and many channels interpret text as if it were formatted with [Markdown](https://en.wikipedia.org/wiki/Markdown).</span></span> <span data-ttu-id="12fb4-168">Compruebe si el texto contiene caracteres que se puedan interpretar como sintaxis de Markdown.</span><span class="sxs-lookup"><span data-stu-id="12fb4-168">Check to see if your text contains characters that may be interpreted as Markdown syntax.</span></span>

## <a name="how-can-i-support-multiple-bots-at-the-same-bot-service-endpoint"></a><span data-ttu-id="12fb4-169">¿Cómo puedo admitir varios bots en el mismo punto de conexión de servicio de bots?</span><span class="sxs-lookup"><span data-stu-id="12fb4-169">How can I support multiple bots at the same bot service endpoint?</span></span> 

<span data-ttu-id="12fb4-170">Este [ejemplo](https://github.com/Microsoft/BotBuilder/issues/2258#issuecomment-280506334) muestra cómo configurar el elemento `Conversation.Container` con el elemento `MicrosoftAppCredentials` correcto y usar un simple elemento `MultiCredentialProvider` para autenticar varios identificadores de aplicación y contraseñas.</span><span class="sxs-lookup"><span data-stu-id="12fb4-170">This [sample](https://github.com/Microsoft/BotBuilder/issues/2258#issuecomment-280506334) shows how to configure the `Conversation.Container` with the right `MicrosoftAppCredentials` and use a simple `MultiCredentialProvider` to authenticate multiple App IDs and passwords.</span></span>

## <a name="identifiers"></a><span data-ttu-id="12fb4-171">Identifiers (Identificadores)</span><span class="sxs-lookup"><span data-stu-id="12fb4-171">Identifiers</span></span>

## <a name="how-do-identifiers-work-in-the-bot-framework"></a><span data-ttu-id="12fb4-172">¿Cómo funcionan los identificadores en Bot Framework?</span><span class="sxs-lookup"><span data-stu-id="12fb4-172">How do identifiers work in the Bot Framework?</span></span>

<span data-ttu-id="12fb4-173">Para más información acerca de los identificadores en Bot Framework, consulte la [Guía de identificadores de Bot Framework][BotFrameworkIDGuide].</span><span class="sxs-lookup"><span data-stu-id="12fb4-173">For details about identifiers in the Bot Framework, see the Bot Framework [guide to identifiers][BotFrameworkIDGuide].</span></span>

## <a name="how-can-i-get-access-to-the-user-id"></a><span data-ttu-id="12fb4-174">¿Cómo se puede obtener acceso al identificador de usuario?</span><span class="sxs-lookup"><span data-stu-id="12fb4-174">How can I get access to the user ID?</span></span>

<span data-ttu-id="12fb4-175">Los SMS y los mensajes de correo electrónico proporcionarán el identificador de usuario sin procesar en la propiedad `from.Id`.</span><span class="sxs-lookup"><span data-stu-id="12fb4-175">SMS and email messages will provide the raw user ID in the `from.Id` property.</span></span> <span data-ttu-id="12fb4-176">En los mensajes de Skype, la propiedad `from.Id` contendrá un identificador único para el usuario que difiere del identificador de Skype del usuario.</span><span class="sxs-lookup"><span data-stu-id="12fb4-176">In Skype messages, the `from.Id` property will contain a unique ID for the user which differs from the user's Skype ID.</span></span> <span data-ttu-id="12fb4-177">Si necesita conectarse a una cuenta existente, puede usar una tarjeta de inicio de sesión e implementar su propio flujo de OAuth para conectar el identificador de usuario con el identificador de usuario de su propio servicio.</span><span class="sxs-lookup"><span data-stu-id="12fb4-177">If you need to connect to an existing account, you can use a sign-in card and implement your own OAuth flow to connect the user ID to your own service's user ID.</span></span>

## <a name="why-are-my-facebook-user-names-not-showing-anymore"></a><span data-ttu-id="12fb4-178">¿Por qué ya no se muestran los nombres de usuario de Facebook?</span><span class="sxs-lookup"><span data-stu-id="12fb4-178">Why are my Facebook user names not showing anymore?</span></span>

<span data-ttu-id="12fb4-179">¿Ha cambiado la contraseña de Facebook?</span><span class="sxs-lookup"><span data-stu-id="12fb4-179">Did you change your Facebook password?</span></span> <span data-ttu-id="12fb4-180">Si lo ha hecho, invalidará el token de acceso y deberá actualizar la configuración del bot para el canal de Facebook Messenger en el <a href="https://dev.botframework.com" target="_blank">portal de Bot Framework</a>.</span><span class="sxs-lookup"><span data-stu-id="12fb4-180">Doing so will invalidate the access token, and you will need to update your bot's configuration settings for the Facebook Messenger channel in the <a href="https://dev.botframework.com" target="_blank">Bot Framework Portal</a>.</span></span>

## <a name="why-is-my-kik-bot-replying-im-sorry-i-cant-talk-right-now"></a><span data-ttu-id="12fb4-181">¿Por qué mi bot de Kik responde "Lo siento, no puedo hablar en este momento"?</span><span class="sxs-lookup"><span data-stu-id="12fb4-181">Why is my Kik bot replying "I'm sorry, I can't talk right now"?</span></span>

<span data-ttu-id="12fb4-182">Los bots en desarrollo en Kik permiten 50 suscriptores.</span><span class="sxs-lookup"><span data-stu-id="12fb4-182">Bots in development on Kik are allowed 50 subscribers.</span></span> <span data-ttu-id="12fb4-183">Después de que 50 usuarios únicos hayan interactuado con el bot, cualquier nuevo usuario que intente charlar con el bot recibirá el mensaje "Lo siento, no puedo hablar en este momento."</span><span class="sxs-lookup"><span data-stu-id="12fb4-183">After 50 unique users have interacted with your bot, any new user that attempts to chat with your bot will receive the message "I'm sorry, I can't talk right now."</span></span> <span data-ttu-id="12fb4-184">Para más información, consulte la [Documentación de Kik](https://botsupport.kik.com/hc/en-us/articles/225764648-How-can-I-share-my-bot-with-Kik-users-while-in-development-).</span><span class="sxs-lookup"><span data-stu-id="12fb4-184">For more information, see [Kik documentation](https://botsupport.kik.com/hc/en-us/articles/225764648-How-can-I-share-my-bot-with-Kik-users-while-in-development-).</span></span>

## <a name="how-can-i-use-authenticated-services-from-my-bot"></a><span data-ttu-id="12fb4-185">¿Cómo puedo usar servicios autenticados desde mi bot?</span><span class="sxs-lookup"><span data-stu-id="12fb4-185">How can I use authenticated services from my bot?</span></span>

<span data-ttu-id="12fb4-186">Para la autenticación de Azure Active Directory, consulte la adición de autenticación [V3](https://docs.microsoft.com/en-us/azure/bot-service/bot-builder-tutorial-authentication?view=azure-bot-service-3.0&tabs=csharp) | [V4](https://docs.microsoft.com/en-us/azure/bot-service/bot-builder-tutorial-authentication?view=azure-bot-service-4.0&tabs=csharp).</span><span class="sxs-lookup"><span data-stu-id="12fb4-186">For Azure Active Directory authentication, see the adding authentication [V3](https://docs.microsoft.com/en-us/azure/bot-service/bot-builder-tutorial-authentication?view=azure-bot-service-3.0&tabs=csharp) | [V4](https://docs.microsoft.com/en-us/azure/bot-service/bot-builder-tutorial-authentication?view=azure-bot-service-4.0&tabs=csharp).</span></span> 

> [!NOTE] 
> <span data-ttu-id="12fb4-187">Si agrega funcionalidades de seguridad y autenticación al bot, debe asegurarse de que los patrones que implementa en el código cumplen con los estándares de seguridad adecuados para la aplicación.</span><span class="sxs-lookup"><span data-stu-id="12fb4-187">If you add authentication and security functionality to your bot, you should ensure that the patterns you implement in your code comply with the security standards that are appropriate for your application.</span></span>

## <a name="how-can-i-limit-access-to-my-bot-to-a-pre-determined-list-of-users"></a><span data-ttu-id="12fb4-188">¿Cómo puedo limitar el acceso al bot a una lista predefinida de usuarios?</span><span class="sxs-lookup"><span data-stu-id="12fb4-188">How can I limit access to my bot to a pre-determined list of users?</span></span>

<span data-ttu-id="12fb4-189">Algunos canales, como SMS y el correo electrónico, proporcionan direcciones sin ámbito.</span><span class="sxs-lookup"><span data-stu-id="12fb4-189">Some channels, such as SMS and email, provide unscoped addresses.</span></span> <span data-ttu-id="12fb4-190">En estos casos, los mensajes del usuario contendrán el identificador de usuario sin procesar en la propiedad `from.Id`.</span><span class="sxs-lookup"><span data-stu-id="12fb4-190">In these cases, messages from the user will contain the raw user ID in the `from.Id` property.</span></span>

<span data-ttu-id="12fb4-191">Otros canales, como Skype, Facebook y Slack, proporcionan direcciones de ámbito o con inquilinos de forma que se impide que un bot pueda predecir el identificador de un usuario antes de tiempo.</span><span class="sxs-lookup"><span data-stu-id="12fb4-191">Other channels, such as Skype, Facebook, and Slack, provide either scoped or tenanted addresses in a way that prevents a bot from being able to predict a user’s ID ahead of time.</span></span> <span data-ttu-id="12fb4-192">En estos casos, deberá autenticar al usuario mediante un vínculo de inicio de sesión o un secreto compartido para determinar si están o no autorizados para usar el bot.</span><span class="sxs-lookup"><span data-stu-id="12fb4-192">In these cases, you will need to authenticate the user via a login link or shared secret in order to determine whether or not they are authorized to use the bot.</span></span>

## <a name="why-does-my-direct-line-11-conversation-start-over-after-every-message"></a><span data-ttu-id="12fb4-193">¿Por qué mi conversación de Direct Line 1.1 se inicia después de cada mensaje?</span><span class="sxs-lookup"><span data-stu-id="12fb4-193">Why does my Direct Line 1.1 conversation start over after every message?</span></span>

<span data-ttu-id="12fb4-194">Si la conversación de Direct Line se inicia después de cada mensaje, probablemente falta la propiedad `from` o tiene valor `null` en los mensajes que el cliente de Direct Line envió al bot.</span><span class="sxs-lookup"><span data-stu-id="12fb4-194">If your Direct Line conversation appears to start over after every message, the `from` property is likely missing or `null` in messages that your Direct Line client sent to the bot.</span></span> <span data-ttu-id="12fb4-195">Cuando un cliente de Direct Line envía un mensaje sin la propiedad `from` o con valor `null`, el servicio de Direct Line asigna automáticamente un identificador, por lo que todos los mensajes que envía el cliente parecerán provenir de un usuario nuevo y diferente.</span><span class="sxs-lookup"><span data-stu-id="12fb4-195">When a Direct Line client sends a message with the `from` property either missing or `null`, the Direct Line service automatically allocates an ID, so every message that the client sends will appear to originate from a new, different user.</span></span>

<span data-ttu-id="12fb4-196">Para solucionar este problema, establezca la propiedad `from` en cada mensaje que envía el cliente de Direct Line en un valor estable que identifique de forma única al usuario que envía el mensaje.</span><span class="sxs-lookup"><span data-stu-id="12fb4-196">To fix this, set the `from` property in each message that the Direct Line client sends to a stable value that uniquely represents the user who is sending the message.</span></span> <span data-ttu-id="12fb4-197">Por ejemplo, si un usuario ya ha iniciado sesión en una página web o aplicación, podría usar ese identificador de usuario existente como el valor de la propiedad `from` en los mensajes que envía el usuario.</span><span class="sxs-lookup"><span data-stu-id="12fb4-197">For example, if a user is already signed-in to a webpage or app, you might use that existing user ID as the value of the `from` property in messages that the user sends.</span></span> <span data-ttu-id="12fb4-198">Como alternativa, puede generar un identificador de usuario aleatorio en la carga de la página o en la carga de la aplicación, almacenar ese identificador en una cookie o en un estado de dispositivo y usar este identificador como el valor de la propiedad `from` en los mensajes que envía el usuario.</span><span class="sxs-lookup"><span data-stu-id="12fb4-198">Alternatively, you might choose to generate a random user ID on page-load or on application-load, store that ID in a cookie or device state, and use that ID as the value of the `from` property in messages that the user sends.</span></span>

## <a name="what-causes-the-direct-line-30-service-to-respond-with-http-status-code-502-bad-gateway"></a><span data-ttu-id="12fb4-199">¿Qué hace que el servicio de Direct Line 3.0 responda con código de estado HTTP 502 "Puerta de enlace incorrecta"?</span><span class="sxs-lookup"><span data-stu-id="12fb4-199">What causes the Direct Line 3.0 service to respond with HTTP status code 502 "Bad Gateway"?</span></span>
<span data-ttu-id="12fb4-200">Direct Line 3.0 devuelve el código de estado HTTP 502 cuando intenta ponerse en contacto con el bot pero la solicitud no finaliza correctamente.</span><span class="sxs-lookup"><span data-stu-id="12fb4-200">Direct Line 3.0 returns HTTP status code 502 when it tries to contact your bot but the request does not complete successfully.</span></span> <span data-ttu-id="12fb4-201">Este error indica que el bot devolvió un error o que la solicitud ha agotado el tiempo de espera. Para más información sobre los errores que genera el bot, vaya al panel del bot en el <a href="https://dev.botframework.com" target="_blank">portal de Bot Framework</a> y haga clic en el vínculo "Problemas" del canal afectado.</span><span class="sxs-lookup"><span data-stu-id="12fb4-201">This error indicates that either the bot returned an error or the request timed out. For more information about errors that your bot generates, go to the bot's dashboard within the <a href="https://dev.botframework.com" target="_blank">Bot Framework Portal</a> and click the "Issues" link for the affected channel.</span></span> <span data-ttu-id="12fb4-202">Si ha configurado Application Insights para el bot, también puede encontrar allí información detallada del error.</span><span class="sxs-lookup"><span data-stu-id="12fb4-202">If you have Application Insights configured for your bot, you can also find detailed error information there.</span></span> 

## <a name="what-is-the-idialogstackforward-method-in-the-bot-builder-sdk-for-net"></a><span data-ttu-id="12fb4-203">¿Qué es el método IDialogStack.Forward en Bot Builder SDK para. NET?</span><span class="sxs-lookup"><span data-stu-id="12fb4-203">What is the IDialogStack.Forward method in the Bot Builder SDK for .NET?</span></span>

<span data-ttu-id="12fb4-204">El propósito principal de `IDialogStack.Forward` consiste en reutilizar un diálogo secundario existente que suele ser "reactivo", donde el diálogo secundario (en `IDialog.StartAsync`) espera un elemento `T` de un objeto con un controlador `ResumeAfter`.</span><span class="sxs-lookup"><span data-stu-id="12fb4-204">The primary purpose of `IDialogStack.Forward` is to reuse an existing child dialog that is often "reactive", where the child dialog (in `IDialog.StartAsync`) waits for an object `T` with some `ResumeAfter` handler.</span></span> <span data-ttu-id="12fb4-205">En particular, si tiene un diálogo secundario que espera un elemento `IMessageActivity` `T`, puede reenviar el elemento `IMessageActivity` entrante (que se recibió en algún diálogo primario) mediante el uso del método `IDialogStack.Forward`.</span><span class="sxs-lookup"><span data-stu-id="12fb4-205">In particular, if you have a child dialog that waits for an `IMessageActivity` `T`, you can forward the incoming `IMessageActivity` (already received by some parent dialog) by using the `IDialogStack.Forward` method.</span></span> <span data-ttu-id="12fb4-206">Por ejemplo, para reenviar un elemento `IMessageActivity` entrante a un elemento `LuisDialog`, llame a `IDialogStack.Forward` para insertar el elemento `LuisDialog` en la pila de diálogos, ejecute el código de `LuisDialog.StartAsync` hasta que se programe una espera para el mensaje siguiente y, a continuación, alimente de inmediato la espera con el elemento `IMessageActivity` reenviado.</span><span class="sxs-lookup"><span data-stu-id="12fb4-206">For example, to forward an incoming `IMessageActivity` to a `LuisDialog`, call `IDialogStack.Forward` to push the `LuisDialog` onto the dialog stack, run the code in `LuisDialog.StartAsync` until it schedules a wait for the next message, and then immediately satisfy that wait with the forwarded `IMessageActivity`.</span></span>

<span data-ttu-id="12fb4-207">`T` suele ser un elemento `IMessageActivity`, puesto que `IDialog.StartAsync` normalmente se construye para esperar a ese tipo de actividad.</span><span class="sxs-lookup"><span data-stu-id="12fb4-207">`T` is usually an `IMessageActivity`, since `IDialog.StartAsync` is typically constructed to wait for that type of activity.</span></span> <span data-ttu-id="12fb4-208">Puede usar `IDialogStack.Forward` a un elemento `LuisDialog` como un mecanismo para interceptar los mensajes del usuario para su procesamiento antes de reenviar el mensaje a un elemento `LuisDialog` existente.</span><span class="sxs-lookup"><span data-stu-id="12fb4-208">You might use `IDialogStack.Forward` to a `LuisDialog` as a mechanism to intercept messages from the user for some processing before forwarding the message to an existing `LuisDialog`.</span></span> <span data-ttu-id="12fb4-209">Como alternativa, también puede usar `DispatchDialog` con `ContinueToNextGroup` para ese propósito.</span><span class="sxs-lookup"><span data-stu-id="12fb4-209">Alternatively, you can also use `DispatchDialog` with `ContinueToNextGroup` for that purpose.</span></span>

<span data-ttu-id="12fb4-210">Se espera encontrar el elemento reenviado en el primer controlador `ResumeAfter` (por ejemplo, `LuisDialog.MessageReceived`) que se ha programado por `StartAsync`.</span><span class="sxs-lookup"><span data-stu-id="12fb4-210">You would expect to find the forwarded item in the first `ResumeAfter` handler (e.g. `LuisDialog.MessageReceived`) that is scheduled by `StartAsync`.</span></span>

## <a name="what-is-the-difference-between-proactive-and-reactive"></a><span data-ttu-id="12fb4-211">¿Cuál es la diferencia entre "proactivo" y "reactivo"?</span><span class="sxs-lookup"><span data-stu-id="12fb4-211">What is the difference between "proactive" and "reactive"?</span></span>

<span data-ttu-id="12fb4-212">Desde la perspectiva del bot, "reactivo" significa que el usuario inicia la conversación enviando un mensaje al bot y el bot reacciona respondiendo a ese mensaje.</span><span class="sxs-lookup"><span data-stu-id="12fb4-212">From the perspective of your bot, "reactive" means that the user initiates the conversation by sending a message to the bot, and the bot reacts by responding to that message.</span></span> <span data-ttu-id="12fb4-213">En cambio, "proactivo" significa que el bot inicia la conversación enviando el primer mensaje al usuario.</span><span class="sxs-lookup"><span data-stu-id="12fb4-213">In contrast, "proactive" means that the bot initiates the conversation by sending the first message to the user.</span></span> <span data-ttu-id="12fb4-214">Por ejemplo, un bot puede enviar un mensaje proactivo que notifique al usuario cuando un temporizador expira o se produce un evento.</span><span class="sxs-lookup"><span data-stu-id="12fb4-214">For example, a bot may send a proactive message to notify a user when a timer expires or an event occurs.</span></span>

## <a name="how-can-i-send-proactive-messages-to-the-user"></a><span data-ttu-id="12fb4-215">¿Cómo puedo enviar mensajes proactivos al usuario?</span><span class="sxs-lookup"><span data-stu-id="12fb4-215">How can I send proactive messages to the user?</span></span>

<span data-ttu-id="12fb4-216">Para obtener ejemplos que muestran cómo enviar mensajes proactivos, consulte los [ejemplos de C# V4](https://github.com/Microsoft/BotBuilder-Samples/tree/master/samples/csharp_dotnetcore/16.proactive-messages) y los [ejemplos de Node.js V4](https://github.com/Microsoft/BotBuilder-Samples/tree/master/samples/javascript_nodejs/16.proactive-messages) del repositorio BotBuilder-Samples en GitHub.</span><span class="sxs-lookup"><span data-stu-id="12fb4-216">For examples that show how to send proactive messages, see the [C# V4 samples](https://github.com/Microsoft/BotBuilder-Samples/tree/master/samples/csharp_dotnetcore/16.proactive-messages) and [Node.js V4 samples](https://github.com/Microsoft/BotBuilder-Samples/tree/master/samples/javascript_nodejs/16.proactive-messages) within the BotBuilder-Samples repository on GitHub.</span></span>

## <a name="how-can-i-reference-non-serializable-services-from-my-c-dialogs"></a><span data-ttu-id="12fb4-217">¿Cómo puedo hacer referencia a servicios no serializables desde los diálogos de C#?</span><span class="sxs-lookup"><span data-stu-id="12fb4-217">How can I reference non-serializable services from my C# dialogs?</span></span>

<span data-ttu-id="12fb4-218">Existen varias opciones:</span><span class="sxs-lookup"><span data-stu-id="12fb4-218">There are multiple options:</span></span>

* <span data-ttu-id="12fb4-219">Resolver la dependencia mediante `Autofac` y `FiberModule.Key_DoNotSerialize`.</span><span class="sxs-lookup"><span data-stu-id="12fb4-219">Resolve the dependency through `Autofac` and `FiberModule.Key_DoNotSerialize`.</span></span> <span data-ttu-id="12fb4-220">Esta es la solución más limpia.</span><span class="sxs-lookup"><span data-stu-id="12fb4-220">This is the cleanest solution.</span></span>
* <span data-ttu-id="12fb4-221">Usar los atributos [NonSerialized](https://msdn.microsoft.com/en-us/library/system.nonserializedattribute(v=vs.110).aspx) y [OnDeserialized](https://msdn.microsoft.com/en-us/library/system.runtime.serialization.ondeserializedattribute(v=vs.110).aspx) para restaurar la dependencia en la deserialización.</span><span class="sxs-lookup"><span data-stu-id="12fb4-221">Use [NonSerialized](https://msdn.microsoft.com/en-us/library/system.nonserializedattribute(v=vs.110).aspx) and [OnDeserialized](https://msdn.microsoft.com/en-us/library/system.runtime.serialization.ondeserializedattribute(v=vs.110).aspx) attributes to restore the dependency on deserialization.</span></span> <span data-ttu-id="12fb4-222">Esta es la solución más sencilla.</span><span class="sxs-lookup"><span data-stu-id="12fb4-222">This is the simplest solution.</span></span>
* <span data-ttu-id="12fb4-223">No almacene esa dependencia para que no se serialice.</span><span class="sxs-lookup"><span data-stu-id="12fb4-223">Do not store that dependency, so that it won't be serialized.</span></span> <span data-ttu-id="12fb4-224">No se recomienda esta solución, aunque es técnicamente posible.</span><span class="sxs-lookup"><span data-stu-id="12fb4-224">This solution, while technically feasible, is not recommended.</span></span>
* <span data-ttu-id="12fb4-225">Utilizar el suplente de serialización de reflexión.</span><span class="sxs-lookup"><span data-stu-id="12fb4-225">Use the reflection serialization surrogate.</span></span> <span data-ttu-id="12fb4-226">Esta solución puede no ser posible en algunos casos y tiene el riesgo de serializar demasiado.</span><span class="sxs-lookup"><span data-stu-id="12fb4-226">This solution may not be feasible in some cases and risks serializing too much.</span></span>

::: moniker range="azure-bot-service-3.0"

## <a name="where-is-conversation-state-stored"></a><span data-ttu-id="12fb4-227">¿Donde se almacena el estado de la conversación?</span><span class="sxs-lookup"><span data-stu-id="12fb4-227">Where is conversation state stored?</span></span>

<span data-ttu-id="12fb4-228">Los datos de las bolsas de propiedades de usuario, de conversación y de conversación privada se almacenan mediante la interfaz `IBotState` de Connector.</span><span class="sxs-lookup"><span data-stu-id="12fb4-228">Data in the user, conversation, and private conversation property bags is stored using the Connector's `IBotState` interface.</span></span> <span data-ttu-id="12fb4-229">El identificador del bot determina el ámbito de cada bolsa de propiedades.</span><span class="sxs-lookup"><span data-stu-id="12fb4-229">Each property bag is scoped by the bot's ID.</span></span> <span data-ttu-id="12fb4-230">La bolsa de propiedades de usuario tiene la clave por identificador de usuario, la bolsa de propiedades de conversación tiene la clave por identificador de conversación y la bolsa de propiedades de conversación privada tiene la clave por identificador de usuario e identificador de conversación.</span><span class="sxs-lookup"><span data-stu-id="12fb4-230">The user property bag is keyed by user ID, the conversation property bag is keyed by conversation ID, and the private conversation property bag is keyed by both user ID and conversation ID.</span></span> 

<span data-ttu-id="12fb4-231">Si usa Bot Builder SDK para .NET o Bot Builder SDK para Node.js para crear el bot, la pila de diálogos y los datos de los diálogos se almacenarán automáticamente como entradas en la bolsa de propiedades de conversación privada.</span><span class="sxs-lookup"><span data-stu-id="12fb4-231">If you use the Bot Builder SDK for .NET or the Bot Builder SDK for Node.js to build your bot, the dialog stack and dialog data will both automatically be stored as entries in the private conversation property bag.</span></span> <span data-ttu-id="12fb4-232">La implementación de C# utiliza la serialización binaria y la implementación de Node.js usa la serialización de JSON.</span><span class="sxs-lookup"><span data-stu-id="12fb4-232">The C# implementation uses binary serialization, and the Node.js implementation uses JSON serialization.</span></span>

<span data-ttu-id="12fb4-233">Dos servicios implementan la interfaz REST `IBotState`.</span><span class="sxs-lookup"><span data-stu-id="12fb4-233">The `IBotState` REST interface is implemented by two services.</span></span>

* <span data-ttu-id="12fb4-234">Bot Framework Connector proporciona un servicio en la nube que implementa esta interfaz y almacena los datos en Azure.</span><span class="sxs-lookup"><span data-stu-id="12fb4-234">The Bot Framework Connector provides a cloud service that implements this interface and stores data in Azure.</span></span>  <span data-ttu-id="12fb4-235">Estos datos se cifran en reposo e intencionadamente no expiran.</span><span class="sxs-lookup"><span data-stu-id="12fb4-235">This data is encrypted at rest and does not intentionally expire.</span></span>
* <span data-ttu-id="12fb4-236">El emulador de Bot Framework proporciona una implementación en memoria de esta interfaz para depurar el bot.</span><span class="sxs-lookup"><span data-stu-id="12fb4-236">The Bot Framework Emulator provides an in-memory implementation of this interface for debugging your bot.</span></span> <span data-ttu-id="12fb4-237">Estos datos expiran cuando termina el proceso del emulador.</span><span class="sxs-lookup"><span data-stu-id="12fb4-237">This data expires when the emulator process exits.</span></span>

<span data-ttu-id="12fb4-238">Si desea almacenar estos datos dentro de los centros de datos, puede proporcionar una implementación personalizada del servicio de estado.</span><span class="sxs-lookup"><span data-stu-id="12fb4-238">If you want to store this data within your data centers, you can provide a custom implementation of the state service.</span></span> <span data-ttu-id="12fb4-239">Esto puede hacerse al menos de dos formas:</span><span class="sxs-lookup"><span data-stu-id="12fb4-239">This can be done at least two ways:</span></span>

* <span data-ttu-id="12fb4-240">Utilizar la capa REST para proporcionar un servicio `IBotState` personalizado.</span><span class="sxs-lookup"><span data-stu-id="12fb4-240">Use the REST layer to provide a custom `IBotState` service.</span></span>
* <span data-ttu-id="12fb4-241">Utilizar las interfaces de Builder en la capa de lenguaje (Node.js o C#).</span><span class="sxs-lookup"><span data-stu-id="12fb4-241">Use the Builder interfaces in the language (Node.js or C#) layer.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="12fb4-242">No se recomienda usar Bot Framework State Service API en entornos de producción y es posible que deje de usarse en una versión futura.</span><span class="sxs-lookup"><span data-stu-id="12fb4-242">The Bot Framework State Service API is not recommended for production environments, and may be deprecated in a future release.</span></span> <span data-ttu-id="12fb4-243">Se recomienda actualizar el código del bot para que use el almacenamiento en memoria para realizar pruebas o usar una de las **extensiones de Azure** para bots de producción.</span><span class="sxs-lookup"><span data-stu-id="12fb4-243">It is recommended that you update your bot code to use the in-memory storage for testing purposes or use one of the **Azure Extensions** for production bots.</span></span> <span data-ttu-id="12fb4-244">Para más información, consulte el tema **Administración de datos de estado** para la implementación de [.NET](~/dotnet/bot-builder-dotnet-state.md) o [Node](~/nodejs/bot-builder-nodejs-state.md).</span><span class="sxs-lookup"><span data-stu-id="12fb4-244">For more information, see the **Manage state data** topic for [.NET](~/dotnet/bot-builder-dotnet-state.md) or [Node](~/nodejs/bot-builder-nodejs-state.md) implementation.</span></span>

::: moniker-end

## <a name="what-is-an-etag--how-does-it-relate-to-bot-data-bag-storage"></a><span data-ttu-id="12fb4-245">¿Qué es una ETag?</span><span class="sxs-lookup"><span data-stu-id="12fb4-245">What is an ETag?</span></span>  <span data-ttu-id="12fb4-246">¿Cómo se relaciona con el almacenamiento de las bolsas de datos del bot?</span><span class="sxs-lookup"><span data-stu-id="12fb4-246">How does it relate to bot data bag storage?</span></span>

<span data-ttu-id="12fb4-247">Una [ETag](https://en.wikipedia.org/wiki/HTTP_ETag) es un mecanismo para el [control de simultaneidad optimista](https://en.wikipedia.org/wiki/Optimistic_concurrency_control).</span><span class="sxs-lookup"><span data-stu-id="12fb4-247">An [ETag](https://en.wikipedia.org/wiki/HTTP_ETag) is a mechanism for [optimistic concurrency control](https://en.wikipedia.org/wiki/Optimistic_concurrency_control).</span></span> <span data-ttu-id="12fb4-248">El almacenamiento de las bolsas de datos del bot utiliza ETags para evitar actualizaciones conflictivas de los datos.</span><span class="sxs-lookup"><span data-stu-id="12fb4-248">The bot data bag storage uses ETags to prevent conflicting updates to the data.</span></span> <span data-ttu-id="12fb4-249">Un error de ETag con código de estado HTTP 412 "Error en la condición previa" indica que hubo varias secuencias de "lectura-modificación-escritura" en ejecución simultáneamente para esa bolsa de datos del bot.</span><span class="sxs-lookup"><span data-stu-id="12fb4-249">An ETag error with HTTP status code 412 "Precondition Failed" indicates that there were multiple "read-modify-write" sequences executing concurrently for that bot data bag.</span></span>

<span data-ttu-id="12fb4-250">La pila de diálogos y el estado se almacenan en bolsas de datos del bot.</span><span class="sxs-lookup"><span data-stu-id="12fb4-250">The dialog stack and state are stored in bot data bags.</span></span> <span data-ttu-id="12fb4-251">Por ejemplo, es posible que vea el error de ETag "Error en la condición previa" si el bot todavía está procesando un mensaje anterior cuando recibe un nuevo mensaje para esa conversación.</span><span class="sxs-lookup"><span data-stu-id="12fb4-251">For example, you might see the "Precondition Failed" ETag error if your bot is still processing a previous message when it receives a new message for that conversation.</span></span>

## <a name="what-causes-an-error-with-http-status-code-412-precondition-failed-or-http-status-code-409-conflict"></a><span data-ttu-id="12fb4-252">¿Qué provoca un error con código de estado HTTP 412 "Error en la condición previa" o código de estado HTTP 409 "Conflicto"?</span><span class="sxs-lookup"><span data-stu-id="12fb4-252">What causes an error with HTTP status code 412 "Precondition Failed" or HTTP status code 409 "Conflict"?</span></span>

<span data-ttu-id="12fb4-253">El servicio `IBotState` de Connector se usa para almacenar las bolsas de datos del bot (es decir, las bolsas de datos de usuario, de conversación y de conversación privada, donde la bolsa de datos privada incluye el estado del "flujo de control" de la pila de diálogos).</span><span class="sxs-lookup"><span data-stu-id="12fb4-253">The Connector's `IBotState` service is used to store the bot data bags (i.e., the user, conversation, and private bot data bags, where the private bot data bag includes the dialog stack "control flow" state).</span></span> <span data-ttu-id="12fb4-254">El control de la simultaneidad en el servicio `IBotState` se administra por simultaneidad optimista mediante ETags.</span><span class="sxs-lookup"><span data-stu-id="12fb4-254">Concurrency control in the `IBotState` service is managed by optimistic concurrency via ETags.</span></span> <span data-ttu-id="12fb4-255">Si hay un conflicto de actualización (debido a una actualización simultánea de una única bolsa de datos del bot) durante una secuencia de "lectura-modificación-escritura":</span><span class="sxs-lookup"><span data-stu-id="12fb4-255">If there is an update conflict (due to a concurrent update to a single bot data bag) during a "read-modify-write" sequence, then:</span></span>

* <span data-ttu-id="12fb4-256">Si se conservan las ETags, se produce un error con código de estado HTTP 412 "Error en la condición previa" en el servicio `IBotState`.</span><span class="sxs-lookup"><span data-stu-id="12fb4-256">If ETags are preserved, an error with HTTP status code 412 "Precondition Failed" is thrown from the `IBotState` service.</span></span> <span data-ttu-id="12fb4-257">Este es el comportamiento predeterminado en Bot Builder SDK para .NET.</span><span class="sxs-lookup"><span data-stu-id="12fb4-257">This is the default behavior in the Bot Builder SDK for .NET.</span></span>
* <span data-ttu-id="12fb4-258">Si no se conservan las ETags (es decir, ETag se establece en `\*`), la directiva "la última escritura gana" entrará en vigor, lo que evita el error "Error en la condición previa", pero existe riesgo de pérdida de datos.</span><span class="sxs-lookup"><span data-stu-id="12fb4-258">If ETags are not preserved (i.e., ETag is set to `\*`), then the "last write wins" policy will be in effect, which prevents the "Precondition Failed" error but risks data loss.</span></span> <span data-ttu-id="12fb4-259">Este es el comportamiento predeterminado en Bot Builder SDK para Node.js.</span><span class="sxs-lookup"><span data-stu-id="12fb4-259">This is the default behavior in the Bot Builder SDK for Node.js.</span></span>

## <a name="how-can-i-fix-precondition-failed-412-or-conflict-409-errors"></a><span data-ttu-id="12fb4-260">¿Cómo se pueden corregir los errores "Error en la condición previa" (412) o "Conflicto" (409)?</span><span class="sxs-lookup"><span data-stu-id="12fb4-260">How can I fix "Precondition Failed" (412) or "Conflict" (409) errors?</span></span>

<span data-ttu-id="12fb4-261">Estos errores indican que el bot ha procesado varios mensajes para la misma conversación a la vez.</span><span class="sxs-lookup"><span data-stu-id="12fb4-261">These errors indicate that your bot processed multiple messages for the same conversation at once.</span></span> <span data-ttu-id="12fb4-262">Si el bot se conecta con servicios que requieren mensajes ordenados con precisión, considere la posibilidad de bloquear el estado de la conversación para asegurarse de que los mensajes no se procesan en paralelo.</span><span class="sxs-lookup"><span data-stu-id="12fb4-262">If your bot is connected to services that require precisely ordered messages, you should consider locking the conversation state to make sure messages are not processed in parallel.</span></span> 

::: moniker range="azure-bot-service-3.0"

<span data-ttu-id="12fb4-263">Bot Builder SDK para .NET proporciona un mecanismo (la clase `LocalMutualExclusion`, que implementa `IScope`) para serializar de forma pesimista el tratamiento de una sola conversación con un semáforo en memoria.</span><span class="sxs-lookup"><span data-stu-id="12fb4-263">The Bot Builder SDK for .NET provides a mechanism (class `LocalMutualExclusion` which implements `IScope`) to pessimistically serialize the handling of a single conversations with an in-memory semaphore.</span></span> <span data-ttu-id="12fb4-264">Puede extender esta implementación para que use una concesión de Redis, con el ámbito de la dirección de la conversación.</span><span class="sxs-lookup"><span data-stu-id="12fb4-264">You could extend this implementation to use a Redis lease, scoped by the conversation address.</span></span>

<span data-ttu-id="12fb4-265">Si el bot no está conectado a servicios externos o si el procesamiento de mensajes de la misma conversación en paralelo es aceptable, puede agregar este código para ignorar los conflictos que se produzcan en Bot State API.</span><span class="sxs-lookup"><span data-stu-id="12fb4-265">If your bot is not connected to external services or if processing messages in parallel from the same conversation is acceptable, you can add this code to ignore any collisions that occur in the Bot State API.</span></span> <span data-ttu-id="12fb4-266">Esto permitirá que la última respuesta establezca el estado de la conversación.</span><span class="sxs-lookup"><span data-stu-id="12fb4-266">This will allow the last reply to set the conversation state.</span></span>

```cs
var builder = new ContainerBuilder();
builder
    .Register(c => new CachingBotDataStore(c.Resolve<ConnectorStore>(), CachingBotDataStoreConsistencyPolicy.LastWriteWins))
    .As<IBotDataStore<BotData>>()
    .AsSelf()
    .InstancePerLifetimeScope();
builder.Update(Conversation.Container);
```
::: moniker-end

## <a name="is-there-a-limit-on-the-amount-of-data-i-can-store-using-the-state-api"></a><span data-ttu-id="12fb4-267">¿Hay un límite en la cantidad de datos que puedo almacenar mediante State API?</span><span class="sxs-lookup"><span data-stu-id="12fb4-267">Is there a limit on the amount of data I can store using the State API?</span></span>

<span data-ttu-id="12fb4-268">Sí, cada almacén de estado (es decir, las bolsas de datos de usuario, de conversación y de conversación privada del bot) puede contener hasta 64 KB de datos.</span><span class="sxs-lookup"><span data-stu-id="12fb4-268">Yes, each state store (i.e., user, conversation, and private bot data bag) may contain up to 64kb of data.</span></span> <span data-ttu-id="12fb4-269">Para más información, consulte [Administración de datos de estado][StateAPI].</span><span class="sxs-lookup"><span data-stu-id="12fb4-269">For more information, see [Manage State data][StateAPI].</span></span>

::: moniker range="azure-bot-service-3.0"

## <a name="how-do-i-version-the-bot-data-stored-through-the-state-api"></a><span data-ttu-id="12fb4-270">¿Cómo se determina la versión de los datos del bot almacenados mediante State API?</span><span class="sxs-lookup"><span data-stu-id="12fb4-270">How do I version the bot data stored through the State API?</span></span>

> [!IMPORTANT]
> <span data-ttu-id="12fb4-271">No se recomienda usar Bot Framework State Service API en entornos de producción o bots v4, y es posible que deje de usarse en una versión futura.</span><span class="sxs-lookup"><span data-stu-id="12fb4-271">The Bot Framework State Service API is not recommended for production environments or v4 bots, and may be fully deprecated in a future release.</span></span> <span data-ttu-id="12fb4-272">Se recomienda actualizar el código del bot para que use el almacenamiento en memoria para realizar pruebas o usar una de las **extensiones de Azure** para bots de producción.</span><span class="sxs-lookup"><span data-stu-id="12fb4-272">It is recommended that you update your bot code to use the in-memory storage for testing purposes or use one of the **Azure Extensions** for production bots.</span></span> <span data-ttu-id="12fb4-273">Para más información, consulte el tema [Administración de datos de estado](v4sdk/bot-builder-howto-v4-state.md).</span><span class="sxs-lookup"><span data-stu-id="12fb4-273">For more information, see the [Manage state data](v4sdk/bot-builder-howto-v4-state.md) topic.</span></span>

<span data-ttu-id="12fb4-274">El servicio de estado permite conservar el progreso en los diálogos de una conversación para que un usuario pueda volver a una conversación con un bot más adelante sin perder su posición.</span><span class="sxs-lookup"><span data-stu-id="12fb4-274">The State service enables you to persist progress through the dialogs in a conversation so that a user can return to a conversation with a bot later without losing their position.</span></span> <span data-ttu-id="12fb4-275">Para conservar esto, las bolsas de propiedades de los datos del bot que se almacenan mediante State API no se borran automáticamente cuando se modifica el código del bot.</span><span class="sxs-lookup"><span data-stu-id="12fb4-275">To preserve this, the bot data property bags that are stored via the State API are not automatically cleared when you modify the bot's code.</span></span> <span data-ttu-id="12fb4-276">Debe decidir si se deben borrar o no los datos del bot, en función de si el código modificado es compatible con versiones anteriores de los datos.</span><span class="sxs-lookup"><span data-stu-id="12fb4-276">You should decide whether or not the bot data should be cleared, based upon whether your modified code is compatible with older versions of your data.</span></span> 

* <span data-ttu-id="12fb4-277">Si desea restablecer manualmente la pila de diálogos y el estado de la conversación durante el desarrollo del bot, puede usar el comando ` /deleteprofile` para eliminar los datos de estado.</span><span class="sxs-lookup"><span data-stu-id="12fb4-277">If you want to manually reset the conversation's dialog stack and state during development of your bot, you can use the ` /deleteprofile` command to delete state data.</span></span> <span data-ttu-id="12fb4-278">Asegúrese de incluir el espacio inicial en este comando para impedir que el canal lo interprete.</span><span class="sxs-lookup"><span data-stu-id="12fb4-278">Make sure to include the leading space in this command, to prevent the channel from interpreting it.</span></span>
* <span data-ttu-id="12fb4-279">Después de que el bot se haya implementado en producción, puede controlar la versión de los datos del bot para que si se cambia la versión, se borren los datos de estado asociados.</span><span class="sxs-lookup"><span data-stu-id="12fb4-279">After your bot has been deployed to production, you can version your bot data so that if you bump the version, the associated state data is cleared.</span></span> <span data-ttu-id="12fb4-280">Con Bot Builder SDK para Node.js, esto se puede realizar mediante middleware y con Bot Builder SDK para .NET, se puede realizar con una implementación de `IPostToBot`.</span><span class="sxs-lookup"><span data-stu-id="12fb4-280">With the Bot Builder SDK for Node.js, this can be accomplished using middleware and with the Bot Builder SDK for .NET, this can be accomplished using an `IPostToBot` implementation.</span></span>

> [!NOTE]
> <span data-ttu-id="12fb4-281">Si la pila de diálogos no se puede deserializar correctamente, debido a cambios de formato de la serialización o porque el código ha cambiado demasiado, se restablecerá el estado de la conversación.</span><span class="sxs-lookup"><span data-stu-id="12fb4-281">If the dialog stack cannot be deserialized correctly, due to serialization format changes or because the code has changed too much, the conversation state will be reset.</span></span>

::: moniker-end

## <a name="what-are-the-possible-machine-readable-resolutions-of-the-luis-built-in-date-time-duration-and-set-entities"></a><span data-ttu-id="12fb4-282">¿Cuáles son las posibles resoluciones legibles por máquina de las entidades integradas de fecha, hora, duración y conjunto de LUIS?</span><span class="sxs-lookup"><span data-stu-id="12fb4-282">What are the possible machine-readable resolutions of the LUIS built-in date, time, duration, and set entities?</span></span>

<span data-ttu-id="12fb4-283">Para obtener una lista de ejemplos, consulte la [sección de entidades integradas][LUISPreBuiltEntities] de la documentación de LUIS.</span><span class="sxs-lookup"><span data-stu-id="12fb4-283">For a list of examples, see the [Pre-built entities section][LUISPreBuiltEntities] of the LUIS documentation.</span></span>

## <a name="how-can-i-use-more-than-the-maximum-number-of-luis-intents"></a><span data-ttu-id="12fb4-284">¿Cómo puedo usar más del número máximo de intenciones de LUIS?</span><span class="sxs-lookup"><span data-stu-id="12fb4-284">How can I use more than the maximum number of LUIS intents?</span></span>

<span data-ttu-id="12fb4-285">Puede dividir el modelo y llamar al servicio de LUIS en serie o en paralelo.</span><span class="sxs-lookup"><span data-stu-id="12fb4-285">You might consider splitting up your model and calling the LUIS service in series or parallel.</span></span>

## <a name="how-can-i-use-more-than-one-luis-model"></a><span data-ttu-id="12fb4-286">¿Cómo se puede usar más de un modelo de LUIS?</span><span class="sxs-lookup"><span data-stu-id="12fb4-286">How can I use more than one LUIS model?</span></span>

<span data-ttu-id="12fb4-287">Tanto Bot Builder SDK para Node.js como Bot Builder SDK para .NET admiten llamar a varios modelos de LUIS desde un único diálogo de intenciones de LUIS.</span><span class="sxs-lookup"><span data-stu-id="12fb4-287">Both the Bot Builder SDK for Node.js and the Bot Builder SDK for .NET support calling multiple LUIS models from a single LUIS intent dialog.</span></span> <span data-ttu-id="12fb4-288">Tenga en cuenta las siguientes observaciones:</span><span class="sxs-lookup"><span data-stu-id="12fb4-288">Keep in mind the following caveats:</span></span>

* <span data-ttu-id="12fb4-289">Si usa varios modelos de LUIS, se da por supuesto que los modelos de LUIS tienen conjuntos de intenciones no superpuestos.</span><span class="sxs-lookup"><span data-stu-id="12fb4-289">Using multiple LUIS models assumes the LUIS models have non-overlapping sets of intents.</span></span>
* <span data-ttu-id="12fb4-290">Si usa varios modelos de LUIS, se da por supuesto que las puntuaciones de los distintos modelos son comparables, para seleccionar la "intención más coincidente" entre varios modelos.</span><span class="sxs-lookup"><span data-stu-id="12fb4-290">Using multiple LUIS models assumes the scores from different models are comparable, to select the "best matched intent" across multiple models.</span></span>
* <span data-ttu-id="12fb4-291">Si usa varios modelos de LUIS significa que si una intención coincide con un modelo, también tendrá una alta coincidencia con la intención "none" de los otros modelos.</span><span class="sxs-lookup"><span data-stu-id="12fb4-291">Using multiple LUIS models means that if an intent matches one model, it will also strongly match the "none" intent of the other models.</span></span> <span data-ttu-id="12fb4-292">Puede evitar la selección de la intención "none" en esta situación; Bot Builder SDK para Node.js rebajará automáticamente la puntuación de las intenciones "none" para evitar este problema.</span><span class="sxs-lookup"><span data-stu-id="12fb4-292">You can avoid selecting the "none" intent in this situation; the Bot Builder SDK for Node.js will automatically scale down the score for "none" intents to avoid this issue.</span></span>

## <a name="where-can-i-get-more-help-on-luis"></a><span data-ttu-id="12fb4-293">¿Dónde puedo obtener más ayuda sobre LUIS?</span><span class="sxs-lookup"><span data-stu-id="12fb4-293">Where can I get more help on LUIS?</span></span>

* <span data-ttu-id="12fb4-294">[Introducción a Language Understanding (LUIS): Microsoft Cognitive Services](https://www.youtube.com/watch?v=jWeLajon9M8) (vídeo)</span><span class="sxs-lookup"><span data-stu-id="12fb4-294">[Introduction to Language Understanding (LUIS) - Microsoft Cognitive Services](https://www.youtube.com/watch?v=jWeLajon9M8) (video)</span></span>
* <span data-ttu-id="12fb4-295">[Sesión de aprendizaje avanzado para Language Understanding (LUIS) ](https://www.youtube.com/watch?v=39L0Gv2EcSk) (vídeo)</span><span class="sxs-lookup"><span data-stu-id="12fb4-295">[Advanced Learning Session for Language Understanding (LUIS) ](https://www.youtube.com/watch?v=39L0Gv2EcSk) (video)</span></span>
* [<span data-ttu-id="12fb4-296">Documentación de LUIS</span><span class="sxs-lookup"><span data-stu-id="12fb4-296">LUIS documentation</span></span>](/azure/cognitive-services/LUIS/Home)
* [<span data-ttu-id="12fb4-297">Foro de Language Understanding</span><span class="sxs-lookup"><span data-stu-id="12fb4-297">Language Understanding Forum</span></span>](https://social.msdn.microsoft.com/forums/azure/en-US/home?forum=LUIS) 


## <a name="what-are-some-community-authored-dialogs"></a><span data-ttu-id="12fb4-298">¿Cuáles son algunos de los diálogos creados por la comunidad?</span><span class="sxs-lookup"><span data-stu-id="12fb4-298">What are some community-authored dialogs?</span></span>

* <span data-ttu-id="12fb4-299">[BotAuth](https://www.nuget.org/packages/BotAuth): autenticación de Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="12fb4-299">[BotAuth](https://www.nuget.org/packages/BotAuth) - Azure Active Directory authentication</span></span>
* <span data-ttu-id="12fb4-300">[BestMatchDialog](http://www.garypretty.co.uk/2016/08/01/bestmatchdialog-for-microsoft-bot-framework-now-available-via-nuget/): envío de texto de usuario a métodos de diálogo basado en expresiones regulares</span><span class="sxs-lookup"><span data-stu-id="12fb4-300">[BestMatchDialog](http://www.garypretty.co.uk/2016/08/01/bestmatchdialog-for-microsoft-bot-framework-now-available-via-nuget/) - Regular expression-based dispatch of user text to dialog methods</span></span>

## <a name="what-are-some-community-authored-templates"></a><span data-ttu-id="12fb4-301">¿Cuáles son algunas de las plantillas creadas por la comunidad?</span><span class="sxs-lookup"><span data-stu-id="12fb4-301">What are some community-authored templates?</span></span>

* <span data-ttu-id="12fb4-302">[ES6 BotBuilder](https://github.com/brene/botbuilder-es6-template): plantilla de ES6 de Bot Builder</span><span class="sxs-lookup"><span data-stu-id="12fb4-302">[ES6 BotBuilder](https://github.com/brene/botbuilder-es6-template) - ES6 Bot Builder template</span></span>

## <a name="why-do-i-get-an-authorizationrequestdenied-exception-when-creating-a-bot"></a><span data-ttu-id="12fb4-303">¿Por qué obtengo una excepción Authorization_RequestDenied al crear un bot?</span><span class="sxs-lookup"><span data-stu-id="12fb4-303">Why do I get an Authorization_RequestDenied exception when creating a bot?</span></span>

<span data-ttu-id="12fb4-304">Los permisos para crear bots de Azure Bot Service se administran mediante el portal de Azure Active Directory (AAD).</span><span class="sxs-lookup"><span data-stu-id="12fb4-304">Permission to create Azure Bot Service bots are managed through the Azure Active Directory (AAD) portal.</span></span> <span data-ttu-id="12fb4-305">Si los permisos no están configurados correctamente en el [portal de AAD](http://aad.portal.azure.com), los usuarios obtendrán la excepción **Authorization_RequestDenied** al intentar crear un servicio de bots.</span><span class="sxs-lookup"><span data-stu-id="12fb4-305">If permissions are not properly configured in the [AAD portal](http://aad.portal.azure.com), users will get the **Authorization_RequestDenied** exception when trying to create a bot service.</span></span>

<span data-ttu-id="12fb4-306">En primer lugar, compruebe si es un "Invitado" del directorio:</span><span class="sxs-lookup"><span data-stu-id="12fb4-306">First check whether you are a "Guest" of the directory:</span></span>

1. <span data-ttu-id="12fb4-307">Inicie sesión en [Azure Portal](http://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="12fb4-307">Sign-in to [Azure portal](http://portal.azure.com).</span></span>
2. <span data-ttu-id="12fb4-308">Haga clic en **Todos los servicios** y busque *active*.</span><span class="sxs-lookup"><span data-stu-id="12fb4-308">Click **All services** and search for *active*.</span></span>
3. <span data-ttu-id="12fb4-309">Seleccione **Azure Active Directory**.</span><span class="sxs-lookup"><span data-stu-id="12fb4-309">Select **Azure Active Directory**.</span></span>
4. <span data-ttu-id="12fb4-310">Haga clic en **Usuarios**.</span><span class="sxs-lookup"><span data-stu-id="12fb4-310">Click **Users**.</span></span>
5. <span data-ttu-id="12fb4-311">Busque el usuario en la lista y asegúrese de que el **Tipo de usuario** no es un **Invitado**.</span><span class="sxs-lookup"><span data-stu-id="12fb4-311">Find the user from the list and ensure that the **User Type** is not a **Guest**.</span></span>

![Tipo de usuario de Azure Active Directory](~/media/azure-active-directory/user_type.png)

<span data-ttu-id="12fb4-313">Una vez que haya comprobado que no es un **Invitado**, para asegurarse de que los usuarios de un directorio activo pueden crear el servicio de bots, el administrador de directorio debe configurar las opciones siguientes:</span><span class="sxs-lookup"><span data-stu-id="12fb4-313">Once you verified that you are not a **Guest**, then to ensure that users within an active directory can create bot service, the directory administrator needs to configure the following settings:</span></span>

1. <span data-ttu-id="12fb4-314">Inicie sesión en el [portal de AAD](http://aad.portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="12fb4-314">Sign-in to [AAD portal](http://aad.portal.azure.com).</span></span> <span data-ttu-id="12fb4-315">Vaya a **Usuarios y grupos** y seleccione **Configuración de usuario**.</span><span class="sxs-lookup"><span data-stu-id="12fb4-315">Go to **Users and groups** and select **User settings**.</span></span>
2. <span data-ttu-id="12fb4-316">En la sección **Registro de aplicación**, establezca **Los usuarios pueden registrar aplicaciones** en **Sí**.</span><span class="sxs-lookup"><span data-stu-id="12fb4-316">Under **App registration** section, set **Users can register applications** to **Yes**.</span></span> <span data-ttu-id="12fb4-317">Esto permite a los usuarios del directorio crear el servicio de bots.</span><span class="sxs-lookup"><span data-stu-id="12fb4-317">This allows users in your directory to create bot service.</span></span>
3. <span data-ttu-id="12fb4-318">En la sección **Usuarios externos**, establezca **Los permisos de los usuarios invitados están limitados** en **No**.</span><span class="sxs-lookup"><span data-stu-id="12fb4-318">Under the **External users** section, set **Guest users permissions are limited** to **No**.</span></span> <span data-ttu-id="12fb4-319">Esto permite a los usuarios invitados del directorio crear el servicio de bots.</span><span class="sxs-lookup"><span data-stu-id="12fb4-319">This allows guest users in your directory to create bot service.</span></span>

![Centro de administración de Azure Active Directory](~/media/azure-active-directory/admin_center.png)

## <a name="why-cant-i-migrate-my-bot"></a><span data-ttu-id="12fb4-321">¿Por qué no puedo migrar mi bot?</span><span class="sxs-lookup"><span data-stu-id="12fb4-321">Why can't I migrate my bot?</span></span>

<span data-ttu-id="12fb4-322">Si tiene problemas para migrar el bot, es posible que el bot pertenezca a un directorio que no sea el directorio predeterminado.</span><span class="sxs-lookup"><span data-stu-id="12fb4-322">If you are having issues migrating your bot, it might be because the bot belongs to a directory other than your default directory.</span></span> <span data-ttu-id="12fb4-323">Siga estos pasos:</span><span class="sxs-lookup"><span data-stu-id="12fb4-323">Try these steps:</span></span>

1. <span data-ttu-id="12fb4-324">Desde el directorio de destino, agregue un nuevo usuario (mediante la dirección de correo electrónico) que no sea miembro del directorio predeterminado y conceda al usuario el rol de colaborador en las suscripciones que son el destino de la migración.</span><span class="sxs-lookup"><span data-stu-id="12fb4-324">From the target directory, add a new user (via email address) that is not a member of the default directory, grant the user contributor role on the subscriptions that are the target of the migration.</span></span>

2. <span data-ttu-id="12fb4-325">Desde el [Portal para desarrolladores](https://dev.botframework.com), agregue la dirección de correo electrónico del usuario como copropietario del bot que se va a migrar.</span><span class="sxs-lookup"><span data-stu-id="12fb4-325">From [Dev Portal](https://dev.botframework.com), add the user’s email address as co-owners of the bot that should be migrated.</span></span> <span data-ttu-id="12fb4-326">A continuación, cierre la sesión.</span><span class="sxs-lookup"><span data-stu-id="12fb4-326">Then sign out.</span></span>

3. <span data-ttu-id="12fb4-327">Inicie sesión en el [Portal para desarrolladores](https://dev.botframework.com) como el nuevo usuario y proceda a migrar el bot.</span><span class="sxs-lookup"><span data-stu-id="12fb4-327">Sign in to [Dev Portal](https://dev.botframework.com) as the new user and proceed to migrate the bot.</span></span>

## <a name="where-can-i-get-more-help"></a><span data-ttu-id="12fb4-328">¿Dónde puedo obtener más ayuda?</span><span class="sxs-lookup"><span data-stu-id="12fb4-328">Where can I get more help?</span></span>

* <span data-ttu-id="12fb4-329">Aproveche la información de las preguntas respondidas previamente en [Stack Overflow](https://stackoverflow.com/questions/tagged/botframework) o publique sus propias preguntas utilizando la etiqueta `botframework`.</span><span class="sxs-lookup"><span data-stu-id="12fb4-329">Leverage the information in previously answered questions on [Stack Overflow](https://stackoverflow.com/questions/tagged/botframework), or post your own questions using the `botframework` tag.</span></span> <span data-ttu-id="12fb4-330">Tenga en cuenta que en Stack Overflow deberá escribir un título descriptivo, un resumen conciso del problema y detalles suficientes para reproducir el problema.</span><span class="sxs-lookup"><span data-stu-id="12fb4-330">Please note that Stack Overflow has guidelines such as requiring a descriptive title, a complete and concise problem statement, and sufficient details to reproduce your issue.</span></span> <span data-ttu-id="12fb4-331">Las solicitudes de características o las preguntas demasiado amplias no se tendrán en cuenta; los nuevos usuarios deben visitar el [Centro de ayuda de Stack Overflow](https://stackoverflow.com/help/how-to-ask) para más detalles.</span><span class="sxs-lookup"><span data-stu-id="12fb4-331">Feature requests or overly broad questions are off-topic; new users should visit the [Stack Overflow Help Center](https://stackoverflow.com/help/how-to-ask) for more details.</span></span>
* <span data-ttu-id="12fb4-332">Consulte [problemas de BotBuilder](https://github.com/Microsoft/BotBuilder/issues) en GitHub para obtener información sobre los problemas conocidos con Bot Builder SDK o para notificar un problema nuevo.</span><span class="sxs-lookup"><span data-stu-id="12fb4-332">Consult [BotBuilder issues](https://github.com/Microsoft/BotBuilder/issues) in GitHub for information about known issues with the Bot Builder SDK, or to report a new issue.</span></span>
* <span data-ttu-id="12fb4-333">Aproveche la información del debate de la Comunidad BotBuilder en [Gitter](https://gitter.im/Microsoft/BotBuilder).</span><span class="sxs-lookup"><span data-stu-id="12fb4-333">Leverage the information in the BotBuilder community discussion on [Gitter](https://gitter.im/Microsoft/BotBuilder).</span></span>




[LUISPreBuiltEntities]: /azure/cognitive-services/luis/pre-builtentities
[BotFrameworkIDGuide]: bot-service-resources-identifiers-guide.md
[StateAPI]: ~/rest-api/bot-framework-rest-state.md
[TroubleshootingAuth]: bot-service-troubleshoot-authentication-problems.md

