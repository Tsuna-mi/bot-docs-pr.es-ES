---
title: Diseño y control del flujo de conversación | Microsoft Docs
description: Obtenga información sobre cómo diseñar y controlar el flujo de conversación en el bot para proporcionar una buena experiencia de usuario.
keywords: diseño, control, flujo de conversación, controlar interrupciones, información general
author: v-ducvo
ms.author: v-ducvo
manager: kamrani
ms.topic: article
ms.prod: bot-framework
ms.date: 4/8/2018
ms.openlocfilehash: 6e661d030f49cb8004f122de72de7514e804cb9c
ms.sourcegitcommit: 2dc75701b169d822c9499e393439161bc87639d2
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 08/24/2018
ms.locfileid: "42905544"
---
::: moniker range="azure-bot-service-3.0"

# <a name="design-and-control-conversation-flow"></a><span data-ttu-id="90685-104">Diseño y control del flujo de conversación</span><span class="sxs-lookup"><span data-stu-id="90685-104">Design and control conversation flow</span></span>

[!INCLUDE [pre-release-label](./includes/pre-release-label-v3.md)]

<span data-ttu-id="90685-105">En una aplicación tradicional, la interfaz de usuario (UI) es una serie de pantallas.</span><span class="sxs-lookup"><span data-stu-id="90685-105">In a traditional application, the user interface (UI) is a series of screens.</span></span> 
<span data-ttu-id="90685-106">Una única aplicación o sitio web puede usar una o varias pantallas según sea necesario para intercambiar información con el usuario.</span><span class="sxs-lookup"><span data-stu-id="90685-106">A single app or website can use one or more screens as needed to exchange information with the user.</span></span> 
<span data-ttu-id="90685-107">La mayoría de las aplicaciones se inician con una pantalla principal a la que los usuarios llegan inicialmente y proporcionan características de navegación que conducen a otras pantallas para realizar distintas funciones, como el inicio de un nuevo pedido, la exploración de productos o la búsqueda de ayuda.</span><span class="sxs-lookup"><span data-stu-id="90685-107">Most applications start with a main screen where users initially land and provide navigation that leads to other screens for various functions like starting a new order, browsing products, or looking for help.</span></span>

<span data-ttu-id="90685-108">Al igual que las aplicaciones y sitios web, los bots tienen una interfaz de usuario, pero consta de **diálogos**, en lugar de pantallas.</span><span class="sxs-lookup"><span data-stu-id="90685-108">Like apps and websites, bots have a UI, but it is made up of **dialogs**, rather than screens.</span></span> <span data-ttu-id="90685-109">Los diálogos ayudan a mantener su posición dentro de una conversación, piden datos de entrada a los usuarios cuando es necesario y ejecutan la validación de la entrada.</span><span class="sxs-lookup"><span data-stu-id="90685-109">Dialogs help preserve your place within a conversation, prompt users when needed, and execute input validation.</span></span> <span data-ttu-id="90685-110">Son útiles para administrar conversaciones de varios turnos y recopilar información "basada en formularios" simple para realizar actividades como la reserva de un vuelo.</span><span class="sxs-lookup"><span data-stu-id="90685-110">They are useful for managing multi-turn conversations and simple "forms-based" collections of information to accomplish activities such as booking a flight.</span></span>

<span data-ttu-id="90685-111">Los diálogos permiten al desarrollador del bot separar de forma lógica las diversas áreas de funcionalidad del bot y guiar el flujo de conversación.</span><span class="sxs-lookup"><span data-stu-id="90685-111">Dialogs enable the bot developer to logically separate various areas of bot functionality and guide conversational flow.</span></span> <span data-ttu-id="90685-112">Por ejemplo, puede diseñar un diálogo que contenga la lógica que ayuda al usuario a examinar productos y un diálogo independiente que contenga la lógica que ayuda al usuario a crear un nuevo pedido.</span><span class="sxs-lookup"><span data-stu-id="90685-112">For example, you may design one dialog to contain the logic that helps the user browse for products and a separate dialog to contain the logic that helps the user create a new order.</span></span> 

<span data-ttu-id="90685-113">Los diálogos pueden tener o no interfaces gráficas.</span><span class="sxs-lookup"><span data-stu-id="90685-113">Dialogs may or may not have graphical interfaces.</span></span> <span data-ttu-id="90685-114">Pueden contener botones, texto y otros elementos o estar completamente basados en voz.</span><span class="sxs-lookup"><span data-stu-id="90685-114">They may contain buttons, text, and other elements, or be entirely speech-based.</span></span> <span data-ttu-id="90685-115">Los diálogos también contienen acciones para realizar tareas, como la invocación de otros diálogos o el procesamiento de entrada del usuario.</span><span class="sxs-lookup"><span data-stu-id="90685-115">Dialogs also contain actions to perform tasks such as invoking other dialogs or processing user input.</span></span>

## <a name="using-dialogs-to-manage-conversation-flow"></a><span data-ttu-id="90685-116">Uso de los diálogos para administrar el flujo de conversación</span><span class="sxs-lookup"><span data-stu-id="90685-116">Using dialogs to manage conversation flow</span></span>

[!INCLUDE [Dialog flow example](./includes/snippet-dotnet-manage-conversation-flow-intro.md)]

<span data-ttu-id="90685-117">Para obtener un tutorial detallado de la administración del flujo de conversación mediante diálogos y el SDK de Bot Builder, consulte:</span><span class="sxs-lookup"><span data-stu-id="90685-117">For a detailed walkthrough of managing conversation flow using dialogs and the Bot Builder SDK, see:</span></span>

- <span data-ttu-id="90685-118">[Manage conversation flow with dialogs (.NET)](./dotnet/bot-builder-dotnet-manage-conversation-flow.md) [Administración del flujo de conversación con diálogos (.NET)]</span><span class="sxs-lookup"><span data-stu-id="90685-118">[Manage conversation flow with dialogs (.NET)](./dotnet/bot-builder-dotnet-manage-conversation-flow.md)</span></span>
- <span data-ttu-id="90685-119">[Manage conversation flow with dialogs (Node.js)](./nodejs/bot-builder-nodejs-manage-conversation-flow.md) [Administración del flujo de conversación con diálogos (Node.js)]</span><span class="sxs-lookup"><span data-stu-id="90685-119">[Manage conversation flow with dialogs (Node.js)](./nodejs/bot-builder-nodejs-manage-conversation-flow.md)</span></span>

## <a name="dialog-stack"></a><span data-ttu-id="90685-120">Pila de diálogos</span><span class="sxs-lookup"><span data-stu-id="90685-120">Dialog stack</span></span>

<span data-ttu-id="90685-121">Cuando un diálogo invoca a otro, Bot Builder agrega el diálogo nuevo a la parte superior de la pila de diálogos.</span><span class="sxs-lookup"><span data-stu-id="90685-121">When one dialog invokes another, the Bot Builder adds the new dialog to the top of the dialog stack.</span></span> 
<span data-ttu-id="90685-122">El diálogo que está en la parte superior de la pila es el que controla la conversación.</span><span class="sxs-lookup"><span data-stu-id="90685-122">The dialog that is on top of the stack is in control of the conversation.</span></span> 
<span data-ttu-id="90685-123">Todos los mensajes nuevos enviados por el usuario estarán sujetos a procesamiento por parte de ese diálogo hasta que se cierra o se redirija a otro diálogo.</span><span class="sxs-lookup"><span data-stu-id="90685-123">Every new message sent by the user will be subject to processing by that dialog until it either closes or redirects to another dialog.</span></span> 
<span data-ttu-id="90685-124">Cuando se cierra un diálogo, se quita de la pila y el diálogo anterior de la pila asume el control de la conversación.</span><span class="sxs-lookup"><span data-stu-id="90685-124">When a dialog closes, it's removed from the stack, and the previous dialog in the stack assumes control of the conversation.</span></span> 

> [!IMPORTANT]
> <span data-ttu-id="90685-125">Para poder diseñar de forma eficaz el flujo de conversación de un bot es fundamental comprender el concepto de cómo Bot Builder construye y deconstruye la pila de diálogos mientras los diálogos se invocan entre sí, se cierran, etc.</span><span class="sxs-lookup"><span data-stu-id="90685-125">Understanding the concept of how the dialog stack is constructed and deconstructed by the Bot Builder as dialogs invoke one another, close, and so on is critical to being able to effectively design the conversation flow of a bot.</span></span> 

## <a name="dialogs-stacks-and-humans"></a><span data-ttu-id="90685-126">Diálogos, pilas y humanos</span><span class="sxs-lookup"><span data-stu-id="90685-126">Dialogs, stacks and humans</span></span>

<span data-ttu-id="90685-127">Puede resultar tentador suponer que los usuarios navegarán a través de los diálogos creando una pila de diálogos y que, en algún momento, volverán a la dirección de la que vinieron, desapilando los diálogos uno por uno de forma clara y ordenada.</span><span class="sxs-lookup"><span data-stu-id="90685-127">It may be tempting to assume that users will navigate across dialogs, creating a dialog stack, and at some point will navigate back in the direction they came from, unstacking the dialogs one by one in a neat and orderly way.</span></span> 
<span data-ttu-id="90685-128">Por ejemplo, el usuario comienza en el diálogo raíz, invoca el diálogo de nuevo pedido desde allí y, a continuación, invoca el diálogo de búsqueda de productos.</span><span class="sxs-lookup"><span data-stu-id="90685-128">For example, the user will start at root dialog, invoke the new order dialog from there, and then invoke the product search dialog.</span></span> 
<span data-ttu-id="90685-129">A continuación, el usuario selecciona un producto y lo confirma, saliendo del diálogo de búsqueda de productos, completa el pedido, saliendo del diálogo de nuevo pedido, y vuelve al diálogo raíz.</span><span class="sxs-lookup"><span data-stu-id="90685-129">Then the user will select a product and confirm, exiting the product search dialog, complete the order, exiting the new order dialog, and arrive back at the root dialog.</span></span> 

<span data-ttu-id="90685-130">Aunque sería estupendo si los usuarios siempre recorriesen dicha ruta lógica y lineal, esto se produce raras veces.</span><span class="sxs-lookup"><span data-stu-id="90685-130">Although it would be great if users always traveled such a linear, logical path, it seldom occurs.</span></span> 
<span data-ttu-id="90685-131">Los humanos no se comunican en "pilas".</span><span class="sxs-lookup"><span data-stu-id="90685-131">Humans do not communicate in "stacks."</span></span> <span data-ttu-id="90685-132">Tienden a cambiar de opinión con frecuencia.</span><span class="sxs-lookup"><span data-stu-id="90685-132">They tend to frequently change their minds.</span></span> 
<span data-ttu-id="90685-133">Considere el siguiente ejemplo:</span><span class="sxs-lookup"><span data-stu-id="90685-133">Consider the following example:</span></span> 

![bot](./media/bot-service-design-conversation-flow/stack-issue.png)

<span data-ttu-id="90685-135">Mientras que el bot podría haber construido lógicamente una pila de diálogos, el usuario podría decidir hacer algo completamente diferente o formular una pregunta que no tenga ninguna relación con el tema actual.</span><span class="sxs-lookup"><span data-stu-id="90685-135">While your bot may have logically constructed a stack of dialogs, the user may decide to do something entirely different or ask a question that may be unrelated to the current topic.</span></span> 
<span data-ttu-id="90685-136">En el ejemplo, el usuario hace una pregunta en lugar de facilitar la respuesta afirmativa o negativa que el diálogo espera.</span><span class="sxs-lookup"><span data-stu-id="90685-136">In the example, the user asks a question rather than providing the yes/no response that the dialog expects.</span></span> 
<span data-ttu-id="90685-137">¿Cómo debe responder el diálogo?</span><span class="sxs-lookup"><span data-stu-id="90685-137">How should your dialog respond?</span></span>

- <span data-ttu-id="90685-138">Insistir en que el usuario responda primero a la pregunta.</span><span class="sxs-lookup"><span data-stu-id="90685-138">Insist that the user answer the question first.</span></span> 
- <span data-ttu-id="90685-139">Pasar por alto todo lo que el usuario ha hecho hasta el momento, restablecer la pila de diálogos al completo y empezar desde cero intentando responder a la pregunta del usuario.</span><span class="sxs-lookup"><span data-stu-id="90685-139">Disregard everything that the user had done previously, reset the whole dialog stack, and start from the beginning by attempting to answer the user's question.</span></span> 
- <span data-ttu-id="90685-140">Intentar responder a la pregunta del usuario y, después, regresar a la pregunta con respuesta afirmativa o negativa para intentar reanudar la conversación desde ahí.</span><span class="sxs-lookup"><span data-stu-id="90685-140">Attempt to answer the user's question and then return to that yes/no question and try to resume from there.</span></span> 

<span data-ttu-id="90685-141">No hay una respuesta *correcta* a esta pregunta, ya que la mejor solución dependerá de los aspectos específicos del escenario y de cómo espera el usuario que responda el bot.</span><span class="sxs-lookup"><span data-stu-id="90685-141">There is no one *right* answer to this question, as the best solution will depend upon the specifics of your scenario and how the user would reasonably expect the bot to respond.</span></span> <span data-ttu-id="90685-142">Sin embargo, a medida que la complejidad de la conversación aumenta, los **diálogos** resultan más difíciles de administrar.</span><span class="sxs-lookup"><span data-stu-id="90685-142">However, as your conversation complexity increases **dialogs** become harder to manage.</span></span> <span data-ttu-id="90685-143">Para situaciones de bifurcaciones complejas, puede ser más fácil crear su propio flujo de lógica de control para realizar un seguimiento de la conversación de los usuarios.</span><span class="sxs-lookup"><span data-stu-id="90685-143">For complex branchings situations, it may be easier to create your own flow of control logic to keep track of your user's conversation.</span></span>

## <a name="next-steps"></a><span data-ttu-id="90685-144">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="90685-144">Next steps</span></span>

<span data-ttu-id="90685-145">La administración de la navegación del usuario en los diálogos y el diseño del flujo de conversación de forma que permita a los usuarios lograr sus objetivos (incluso de forma no lineal) son un desafío fundamental del diseño del bot.</span><span class="sxs-lookup"><span data-stu-id="90685-145">Managing the user's navigation across dialogs and designing conversation flow in a manner that enables users to achieve their goals (even in a non-linear fashion) is a fundamental challenge of bot design.</span></span> 
<span data-ttu-id="90685-146">En el [siguiente artículo](./bot-service-design-navigation.md) se revisan algunas dificultades habituales de una navegación mal diseñada y se describen las estrategias para evitar estos problemas.</span><span class="sxs-lookup"><span data-stu-id="90685-146">The [next article](./bot-service-design-navigation.md) reviews some common pitfalls of poorly designed navigation and discusses strategies for avoiding those traps.</span></span> 

::: moniker-end

::: moniker range="azure-bot-service-4.0"
# <a name="design-and-control-conversation-flow"></a><span data-ttu-id="90685-147">Diseño y control del flujo de conversación</span><span class="sxs-lookup"><span data-stu-id="90685-147">Design and control conversation flow</span></span>

<span data-ttu-id="90685-148">En una aplicación tradicional, la interfaz de usuario (UI) consta de una serie de pantallas y una sola aplicación o sitio web puede usar una o varias pantallas según sea necesario para intercambiar información con el usuario.</span><span class="sxs-lookup"><span data-stu-id="90685-148">In a traditional application, the user interface (UI) consists of a series of screens, and a single app or website can use one or more screens as needed to exchange information with the user.</span></span> 
<span data-ttu-id="90685-149">La mayoría de las aplicaciones se inician con una pantalla principal a la que los usuarios llegan inicialmente y esa pantalla proporciona características de navegación que conducen a otras pantallas para realizar distintas funciones, como el inicio de un nuevo pedido, la exploración de productos o la búsqueda de ayuda.</span><span class="sxs-lookup"><span data-stu-id="90685-149">Most applications start with a main screen where users initially land, and that screen provides navigation that leads to other screens for various functions like starting a new order, browsing products, or looking for help.</span></span>

<span data-ttu-id="90685-150">Al igual que las aplicaciones y sitios web, los bots tienen una interfaz de usuario, pero esta consta de **mensajes**, en lugar de pantallas.</span><span class="sxs-lookup"><span data-stu-id="90685-150">Like apps and websites, bots have a UI, but it is made up of **messages** rather than screens.</span></span> <span data-ttu-id="90685-151">Los mensajes pueden contener botones, texto y otros elementos o estar completamente basados en voz.</span><span class="sxs-lookup"><span data-stu-id="90685-151">Messages may contain buttons, text, and other elements, or be entirely speech-based.</span></span> 

<span data-ttu-id="90685-152">Mientras que una aplicación tradicional o un sitio web puede solicitar varios fragmentos de información en una pantalla a la vez, un bot recopilará la misma cantidad de información mediante varios mensajes.</span><span class="sxs-lookup"><span data-stu-id="90685-152">While a traditional application or website can request multiple pieces of information on a screen all at once, a bot will gather the same amount of information using multiple messages.</span></span> <span data-ttu-id="90685-153">De este modo, el proceso de recopilación de información del usuario es una experiencia activa, donde el usuario tiene una conversación activa con el bot.</span><span class="sxs-lookup"><span data-stu-id="90685-153">In this way, the process of gathering information from the user is an active experience; one where the user is having an active conversation with the bot.</span></span> 

<span data-ttu-id="90685-154">Un bot bien diseñado tendrá un flujo de conversación que parece natural.</span><span class="sxs-lookup"><span data-stu-id="90685-154">A well designed bot will have a conversation flow that feels natural.</span></span> <span data-ttu-id="90685-155">El bot debería ser capaz de controlar la conversación principal sin problemas, así como las interrupciones o cambios de temas de las conversaciones correctamente.</span><span class="sxs-lookup"><span data-stu-id="90685-155">The bot should be able to handle the core conversation seemlessly, and be able to handle interruptions or switching topic of conversations gracefully.</span></span> 

## <a name="procedural-conversation-flow"></a><span data-ttu-id="90685-156">Flujo de conversación de procedimientos</span><span class="sxs-lookup"><span data-stu-id="90685-156">Procedural conversation flow</span></span>

<span data-ttu-id="90685-157">Por lo general, la conversación con un bot se centra en torno a la tarea que el bot intenta conseguir, lo cual se denomina flujo de procedimientos.</span><span class="sxs-lookup"><span data-stu-id="90685-157">Conversation with a bot is generally focused around the task a bot is trying to achieve, which is called a procedural flow.</span></span> <span data-ttu-id="90685-158">Aquí es donde el bot hace una serie de preguntas al usuario para recopilar toda la información que necesita para poder procesar la tarea.</span><span class="sxs-lookup"><span data-stu-id="90685-158">This is where the bot asks the user a series of questions to gather all the information it needs before processing the task.</span></span>

<span data-ttu-id="90685-159">En un flujo de conversación de procedimientos, usted define el orden de las preguntas y el bot las formulará en el orden definido.</span><span class="sxs-lookup"><span data-stu-id="90685-159">In a procedural conversation flow, you define the order of the questions and the bot will ask the questions in the order you defined.</span></span> <span data-ttu-id="90685-160">Puede organizar las preguntas en *módulos* lógicos para mantener el código centralizado mientras se centra en guiar la conversación.</span><span class="sxs-lookup"><span data-stu-id="90685-160">You can organize the questions into logical *modules* to keep the code centralized while staying focused on guiding the conversational.</span></span> <span data-ttu-id="90685-161">Por ejemplo, puede diseñar un módulo que contenga la lógica que ayuda al usuario a examinar productos y un módulo independiente que contenga la lógica que ayuda al usuario a crear un nuevo pedido.</span><span class="sxs-lookup"><span data-stu-id="90685-161">For example, you may design one module to contain the logic that helps the user browse for products and a separate module to contain the logic that helps the user create a new order.</span></span> 

<span data-ttu-id="90685-162">Puede estructurar estos módulos para que fluyan como quiera, desde una forma libre a una secuencial.</span><span class="sxs-lookup"><span data-stu-id="90685-162">You can structure these modules to flow in any way you like, ranging from free form to sequential.</span></span> <span data-ttu-id="90685-163">El SDK de Bot Builder ofrece varias bibliotecas que le permiten generar cualquier flujo de conversación que el bot necesite.</span><span class="sxs-lookup"><span data-stu-id="90685-163">The Bot Builder SDK provides several libraries that allows you to construct any conversational flow your bot needs.</span></span> <span data-ttu-id="90685-164">Por ejemplo, la biblioteca `prompts` le permite solicitar entradas a los usuarios, la biblioteca `waterfall` le permite definir una secuencia de pares de preguntas y respuestas, la biblioteca `dialog control` le permite modular la lógica del flujo de conversación, etc. Todas estas bibliotecas están vinculadas entre sí a través de un objeto `dialogs`.</span><span class="sxs-lookup"><span data-stu-id="90685-164">For example, the `prompts` library allows you to ask users for input, the `waterfall` library allows you to define a sequence of question/answer pair, the `dialog control` library allows you to modularized your conversational flow logic, etc. All of these libraries are tied together through a `dialogs` object.</span></span> <span data-ttu-id="90685-165">Echemos un vistazo a cómo se implementan los módulos como `dialogs` para diseñar y administrar flujos de conversación y ver cómo ese flujo es similar al flujo de aplicación tradicional.</span><span class="sxs-lookup"><span data-stu-id="90685-165">Let's take a closer look at how modules are implemented as `dialogs` to design and manage conversation flows and see how that flow is similar to the traditonal application flow.</span></span>

![bot](./media/designing-bots/core/dialogs-screens.png)

<span data-ttu-id="90685-167">En una aplicación tradicional, todo comienza con la **pantalla principal**.</span><span class="sxs-lookup"><span data-stu-id="90685-167">In a traditional application, everything begins with the **main screen**.</span></span>
<span data-ttu-id="90685-168">La **pantalla principal** invoca la **pantalla de nuevo pedido**.</span><span class="sxs-lookup"><span data-stu-id="90685-168">The **main screen** invokes the **new order screen**.</span></span>
<span data-ttu-id="90685-169">La **pantalla de nuevo pedido** permanece en control hasta que se cierra o invoca otras pantallas, como la **pantalla de búsqueda de productos**.</span><span class="sxs-lookup"><span data-stu-id="90685-169">The **new order screen** remains in control until it either closes or invokes other screens, such as the **product search screen**.</span></span> 
<span data-ttu-id="90685-170">Si la **pantalla de nuevo pedido** se cierra, se devuelve al usuario a la **pantalla principal**.</span><span class="sxs-lookup"><span data-stu-id="90685-170">If the **new order screen** closes, the user is returned to the **main screen**.</span></span>

<span data-ttu-id="90685-171">En un bot, todo comienza con el **diálogo raíz**.</span><span class="sxs-lookup"><span data-stu-id="90685-171">In a bot, everything begins with the **root dialog**.</span></span> 
<span data-ttu-id="90685-172">El **diálogo raíz** invoca el **diálogo de nuevo pedido**.</span><span class="sxs-lookup"><span data-stu-id="90685-172">The **root dialog** invokes the **new order dialog**.</span></span> 
<span data-ttu-id="90685-173">En ese momento, el **diálogo de nuevo pedido** toma el control de la conversación y permanece en control hasta que se cierra o invoca otros diálogos, como el **diálogo de búsqueda de productos**.</span><span class="sxs-lookup"><span data-stu-id="90685-173">At that point, the **new order dialog** takes control of the conversation and remains in control until it either closes or invokes other dialogs, such as the **product search dialog**.</span></span> 
<span data-ttu-id="90685-174">Si el **diálogo de nuevo pedido** se cierra, se devuelve el control de la conversación al **diálogo raíz**.</span><span class="sxs-lookup"><span data-stu-id="90685-174">If the **new order dialog** closes, control of the conversation is returned back to the **root dialog**.</span></span>

<span data-ttu-id="90685-175">Consulte el tema conceptual sobre [flujo de conversación](v4sdk/bot-builder-conversations.md) para obtener más información sobre los tipos de conversación.</span><span class="sxs-lookup"><span data-stu-id="90685-175">Check out the conceptual topic on [Conversation flow](v4sdk/bot-builder-conversations.md) for more on types of conversation.</span></span>

## <a name="handle-interruptions"></a><span data-ttu-id="90685-176">Control de las interrupciones</span><span class="sxs-lookup"><span data-stu-id="90685-176">Handle interruptions</span></span>

<span data-ttu-id="90685-177">Puede resultar tentador suponer que los usuarios realizarán tareas de procedimientos una por una de forma clara y ordenada.</span><span class="sxs-lookup"><span data-stu-id="90685-177">It may be tempting to assume that users will perform procedural tasks one by one in a neat and orderly way.</span></span> 
<span data-ttu-id="90685-178">Por ejemplo, en un flujo de conversación de procedimientos mediante `dialogs`, el usuario inicia en el diálogo raíz, invoca el diálogo de nuevo pedido desde allí y, a continuación, invoca el diálogo de búsqueda de productos.</span><span class="sxs-lookup"><span data-stu-id="90685-178">For example, in a procedural conversation flow using `dialogs`, the user will start at root dialog, invoke the new order dialog from there, and then invoke the product search dialog.</span></span> <span data-ttu-id="90685-179">A continuación, el usuario selecciona un producto y lo confirma, saliendo del diálogo de búsqueda de productos, completa el pedido, saliendo del diálogo de nuevo pedido, y vuelve al diálogo raíz.</span><span class="sxs-lookup"><span data-stu-id="90685-179">Then the user will select a product and confirm, exiting the product search dialog, complete the order, exiting the new order dialog, and arrive back at the root dialog.</span></span> 

<span data-ttu-id="90685-180">Aunque sería estupendo si los usuarios siempre recorriesen dicha ruta lógica y lineal, esto se produce raras veces.</span><span class="sxs-lookup"><span data-stu-id="90685-180">Although it would be great if users always traveled such a linear, logical path, it seldom occurs.</span></span> 
<span data-ttu-id="90685-181">Los humanos no se comunican en `dialogs` secuenciales.</span><span class="sxs-lookup"><span data-stu-id="90685-181">Humans do not communicate in sequential `dialogs`.</span></span> <span data-ttu-id="90685-182">Tienden a cambiar de opinión con frecuencia.</span><span class="sxs-lookup"><span data-stu-id="90685-182">They tend to frequently change their minds.</span></span> 
<span data-ttu-id="90685-183">Considere el siguiente ejemplo:</span><span class="sxs-lookup"><span data-stu-id="90685-183">Consider the following example:</span></span> 

![bot](./media/bot-service-design-conversation-flow/stack-issue.png)

<span data-ttu-id="90685-185">Mientras que el bot podría estar centrado en procedimientos, el usuario podría decidir hacer algo completamente diferente o formular una pregunta que no tenga ninguna relación con el tema actual.</span><span class="sxs-lookup"><span data-stu-id="90685-185">While your bot may be precedural centric, the user may decide to do something entirely different or ask a question that may be unrelated to the current topic.</span></span> 
<span data-ttu-id="90685-186">En el ejemplo anterior, el usuario hace una pregunta en lugar de facilitar la respuesta afirmativa o negativa que el bot espera.</span><span class="sxs-lookup"><span data-stu-id="90685-186">In the example above, the user asks a question rather than providing the yes/no response that the bot expects.</span></span> 
<span data-ttu-id="90685-187">¿Cómo debe responder el bot?</span><span class="sxs-lookup"><span data-stu-id="90685-187">How should your bot respond?</span></span>

- <span data-ttu-id="90685-188">Insistir en que el usuario responda primero a la pregunta.</span><span class="sxs-lookup"><span data-stu-id="90685-188">Insist that the user answer the question first.</span></span> 
- <span data-ttu-id="90685-189">Pasar por alto todo lo que el usuario ha hecho hasta el momento, restablecer la pila de diálogos al completo y empezar desde cero intentando responder a la pregunta del usuario.</span><span class="sxs-lookup"><span data-stu-id="90685-189">Disregard everything that the user had done previously, reset the whole dialog stack, and start from the beginning by attempting to answer the user's question.</span></span> 
- <span data-ttu-id="90685-190">Intentar responder a la pregunta del usuario y, después, regresar a la pregunta con respuesta afirmativa o negativa para intentar reanudar la conversación desde ahí.</span><span class="sxs-lookup"><span data-stu-id="90685-190">Attempt to answer the user's question and then return to that yes/no question and try to resume from there.</span></span> 

<span data-ttu-id="90685-191">No hay ninguna respuesta *correcta* a esta pregunta, ya que la mejor solución dependerá de los aspectos concretos del escenario y de cómo espera el usuario que responda el bot.</span><span class="sxs-lookup"><span data-stu-id="90685-191">There is no *right* answer to this question, as the best solution will depend upon the specifics of your scenario and how the user would reasonably expect the bot to respond.</span></span> <span data-ttu-id="90685-192">Para más información, consulte [Handle user interrupt](v4sdk/bot-builder-howto-handle-user-interrupt.md) (Control de las interrupciones del usuario).</span><span class="sxs-lookup"><span data-stu-id="90685-192">For more information see [Handle user interruption](v4sdk/bot-builder-howto-handle-user-interrupt.md).</span></span>

## <a name="next-steps"></a><span data-ttu-id="90685-193">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="90685-193">Next steps</span></span>

<span data-ttu-id="90685-194">La administración de la navegación del usuario en los diálogos y el diseño del flujo de conversación de forma que permita a los usuarios lograr sus objetivos (incluso de forma no lineal) son un desafío fundamental del diseño del bot.</span><span class="sxs-lookup"><span data-stu-id="90685-194">Managing the user's navigation across dialogs and designing conversation flow in a manner that enables users to achieve their goals (even in a non-linear fashion) is a fundamental challenge of bot design.</span></span> 
<span data-ttu-id="90685-195">En el [siguiente artículo](~/bot-service-design-navigation.md) se revisan algunas dificultades habituales de una navegación mal diseñada y se describen las estrategias para evitar estos problemas.</span><span class="sxs-lookup"><span data-stu-id="90685-195">The [next article](~/bot-service-design-navigation.md) reviews some common pitfalls of poorly designed navigation and discusses strategies for avoiding those traps.</span></span> 

::: moniker-end
