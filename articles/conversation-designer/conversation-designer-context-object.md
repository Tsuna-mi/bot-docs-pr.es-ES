---
title: Referencia de API para el objeto de contexto | Microsoft Docs
description: Obtenga información sobre cómo hacer referencia al objeto de contexto en el bot de Conversation Designer.
author: vkannan
manager: kamrani
ms.topic: article
ms.prod: bot-framework
ms.date: 12/13/2017
ROBOTS: NoIndex, NoFollow
ms.openlocfilehash: 5ba70189c16815539524d3c9046da03ed0344b9b
ms.sourcegitcommit: f576981342fb3361216675815714e24281e20ddf
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 07/18/2018
ms.locfileid: "39304810"
---
# <a name="api-reference"></a><span data-ttu-id="e69f6-103">Referencia de API</span><span class="sxs-lookup"><span data-stu-id="e69f6-103">API Reference</span></span>
> [!IMPORTANT]
> <span data-ttu-id="e69f6-104">Conversation Designer aún no está disponible para todos los clientes.</span><span class="sxs-lookup"><span data-stu-id="e69f6-104">Conversation Designer is not available to all customers yet.</span></span> <span data-ttu-id="e69f6-105">Podrá obtener más información sobre la disponibilidad de Conversation Designer a lo largo de este año.</span><span class="sxs-lookup"><span data-stu-id="e69f6-105">More details on availability of Conversation Designer will come later this year.</span></span>

<span data-ttu-id="e69f6-106">Conversation Designer le ofrece la posibilidad de agregar lógica de negocios personalizada al bot.</span><span class="sxs-lookup"><span data-stu-id="e69f6-106">Conversation Designer gives you the ability to add custom business logic to your bot.</span></span> <span data-ttu-id="e69f6-107">Estas funciones de script se implementan en el editor **Scripts**.</span><span class="sxs-lookup"><span data-stu-id="e69f6-107">These script functions are implemented in the **Scripts** editor.</span></span> <span data-ttu-id="e69f6-108">Las funciones se enlazan en varios lugares, como las plantillas de respuesta condicional, los *desencadenadores* o las *acciones* de la tarea, o los estados de diálogo, y todos reciben un objeto `context` de tipo **[IConversationContext]** en sus parámetros de función.</span><span class="sxs-lookup"><span data-stu-id="e69f6-108">The functions are hooked up in various places like the conditional response templates, the task's *triggers* or *actions*, or the dialogue states and they all receives a `context` object that is of type **[IConversationContext]** in their function parameters.</span></span>

<span data-ttu-id="e69f6-109">En el ejemplo de código siguiente se muestra la firma para una función de respuesta condicional con el objeto **contexto** pasado.</span><span class="sxs-lookup"><span data-stu-id="e69f6-109">The following code sample shows the signature for a conditional response function with the **context** object passed in.</span></span>

```javascript
/**
* @param {IConversationContext} context
*/
module.exports.NewConditionalResponse_onRun = function(context) {
    // Business logic here
    return true; // Returns a boolean
}
```

<span data-ttu-id="e69f6-110">A través del objeto `context`, puede obtener acceso a información acerca de la conversación entre el usuario y el bot.</span><span class="sxs-lookup"><span data-stu-id="e69f6-110">Through the `context` object, you can access information regarding the conversation between the user and the bot.</span></span>

## <a name="script-callback-functions"></a><span data-ttu-id="e69f6-111">Funciones de devolución de llamada de script</span><span class="sxs-lookup"><span data-stu-id="e69f6-111">Script callback functions</span></span>

<span data-ttu-id="e69f6-112">Las funciones de devolución de llamada de script personalizadas que cree pueden adoptar muchas formas.</span><span class="sxs-lookup"><span data-stu-id="e69f6-112">The custom script callback functions you create may take many forms.</span></span> <span data-ttu-id="e69f6-113">Mientras que puede darles nombres diferentes, funcionalmente, toman una de las formas siguientes.</span><span class="sxs-lookup"><span data-stu-id="e69f6-113">While you can give them different names, functionally, they take on one of the following forms.</span></span>

| <span data-ttu-id="e69f6-114">Forma</span><span class="sxs-lookup"><span data-stu-id="e69f6-114">Form</span></span> | <span data-ttu-id="e69f6-115">Parámetro</span><span class="sxs-lookup"><span data-stu-id="e69f6-115">Parameter</span></span> | <span data-ttu-id="e69f6-116">Tipo de valor devuelto</span><span class="sxs-lookup"><span data-stu-id="e69f6-116">Return type</span></span> | <span data-ttu-id="e69f6-117">DESCRIPCIÓN</span><span class="sxs-lookup"><span data-stu-id="e69f6-117">Description</span></span> |
| ---- | ---- | ---- | ---- |
| <span data-ttu-id="e69f6-118">Antes de la función de respuesta</span><span class="sxs-lookup"><span data-stu-id="e69f6-118">Before response function</span></span> | <span data-ttu-id="e69f6-119">contexto</span><span class="sxs-lookup"><span data-stu-id="e69f6-119">context</span></span> | <span data-ttu-id="e69f6-120">**void** o **promise**</span><span class="sxs-lookup"><span data-stu-id="e69f6-120">**void** or **promise**</span></span> | <span data-ttu-id="e69f6-121">Función que se ejecuta antes de dar una respuesta.</span><span class="sxs-lookup"><span data-stu-id="e69f6-121">Function that is executed before a response is given.</span></span> |
| <span data-ttu-id="e69f6-122">Función de proceso</span><span class="sxs-lookup"><span data-stu-id="e69f6-122">Process function</span></span> | <span data-ttu-id="e69f6-123">contexto</span><span class="sxs-lookup"><span data-stu-id="e69f6-123">context</span></span> | <span data-ttu-id="e69f6-124">**void** o **promise**</span><span class="sxs-lookup"><span data-stu-id="e69f6-124">**void** or **promise**</span></span> | <span data-ttu-id="e69f6-125">Función que realiza la lógica de negocios.</span><span class="sxs-lookup"><span data-stu-id="e69f6-125">Function that performs business logic.</span></span> |
| <span data-ttu-id="e69f6-126">Función de decisión</span><span class="sxs-lookup"><span data-stu-id="e69f6-126">Decision function</span></span> | <span data-ttu-id="e69f6-127">contexto</span><span class="sxs-lookup"><span data-stu-id="e69f6-127">context</span></span> | <span data-ttu-id="e69f6-128">**string** o **promise**</span><span class="sxs-lookup"><span data-stu-id="e69f6-128">**string** or **promise**</span></span> | <span data-ttu-id="e69f6-129">Función que toma decisiones según la lógica de negocios.</span><span class="sxs-lookup"><span data-stu-id="e69f6-129">Function that makes decisions based on business logic.</span></span> <span data-ttu-id="e69f6-130">La cadena devuelta debe coincidir con una condición de un bloque de [decisión](conversation-designer-dialogues.md#decision-state).</span><span class="sxs-lookup"><span data-stu-id="e69f6-130">The return string should match a condition from a [decision](conversation-designer-dialogues.md#decision-state) block.</span></span> |
| <span data-ttu-id="e69f6-131">Función de reconocimiento de código</span><span class="sxs-lookup"><span data-stu-id="e69f6-131">Code recognizer function</span></span> | <span data-ttu-id="e69f6-132">contexto</span><span class="sxs-lookup"><span data-stu-id="e69f6-132">context</span></span> | <span data-ttu-id="e69f6-133">**boolean** o **promise**</span><span class="sxs-lookup"><span data-stu-id="e69f6-133">**boolean** or **promise**</span></span> | <span data-ttu-id="e69f6-134">Lógica de negocios personalizada que se ejecuta cuando se produce un **desencadenador de script**.</span><span class="sxs-lookup"><span data-stu-id="e69f6-134">Custom business logic that gets run when a **Script trigger** occurs.</span></span> <span data-ttu-id="e69f6-135">Devuelve `true` para indicar una coincidencia.</span><span class="sxs-lookup"><span data-stu-id="e69f6-135">Return `true` to indicate a match.</span></span> <span data-ttu-id="e69f6-136">De lo contrario, devuelve `false` para cancelar la coincidencia.</span><span class="sxs-lookup"><span data-stu-id="e69f6-136">Otherwise, return `false` to cancel the match.</span></span> |
| <span data-ttu-id="e69f6-137">función onRecognize</span><span class="sxs-lookup"><span data-stu-id="e69f6-137">onRecognize function</span></span> | <span data-ttu-id="e69f6-138">contexto</span><span class="sxs-lookup"><span data-stu-id="e69f6-138">context</span></span> | <span data-ttu-id="e69f6-139">**boolean** o **promise**</span><span class="sxs-lookup"><span data-stu-id="e69f6-139">**boolean** or **promise**</span></span> | <span data-ttu-id="e69f6-140">Función que se ejecuta solo si hay una coincidencia de un reconocedor de LUIS.</span><span class="sxs-lookup"><span data-stu-id="e69f6-140">Function that executes only if there is a match from a LUIS recognizer.</span></span> <span data-ttu-id="e69f6-141">Utilice esta función de devolución de llamada para procesar las entidades de LUIS y devolver un valor **booleano** adecuado.</span><span class="sxs-lookup"><span data-stu-id="e69f6-141">Use this callback function to process LUIS entities and return an appropriate **boolean** value.</span></span> <span data-ttu-id="e69f6-142">Devuelve `true` para indicar una coincidencia.</span><span class="sxs-lookup"><span data-stu-id="e69f6-142">Return `true` to indicate a match.</span></span> <span data-ttu-id="e69f6-143">De lo contrario, devuelve `false` para cancelar la coincidencia.</span><span class="sxs-lookup"><span data-stu-id="e69f6-143">Otherwise, return `false` to cancel the match.</span></span> |

## <a name="iconversationcontext-interface"></a><span data-ttu-id="e69f6-144">Interfaz IConversationContext</span><span class="sxs-lookup"><span data-stu-id="e69f6-144">IConversationContext interface</span></span>

<span data-ttu-id="e69f6-145">La interfaz `IConversationContext` realiza un seguimiento de información de la conversación entre el usuario y el bot.</span><span class="sxs-lookup"><span data-stu-id="e69f6-145">The `IConversationContext` interface tracks conversation information between the user and the bot.</span></span> <span data-ttu-id="e69f6-146">Todas las funciones personalizadas que se enlazan a través de Conversation Designer recibirán un objeto `context` como argumento del parámetro.</span><span class="sxs-lookup"><span data-stu-id="e69f6-146">All custom functions that are hooked up through the Conversation Designer will receive a `context` object as parameter argument.</span></span>

## <a name="context-properties"></a><span data-ttu-id="e69f6-147">Propiedades de contexto</span><span class="sxs-lookup"><span data-stu-id="e69f6-147">Context properties</span></span>
<span data-ttu-id="e69f6-148">El objeto `context` expone las siguientes propiedades.</span><span class="sxs-lookup"><span data-stu-id="e69f6-148">The `context` object exposes the following properties.</span></span>

| <span data-ttu-id="e69f6-149">NOMBRE</span><span class="sxs-lookup"><span data-stu-id="e69f6-149">Name</span></span> |  <span data-ttu-id="e69f6-150">Código</span><span class="sxs-lookup"><span data-stu-id="e69f6-150">Code</span></span> | <span data-ttu-id="e69f6-151">DESCRIPCIÓN</span><span class="sxs-lookup"><span data-stu-id="e69f6-151">Description</span></span> |
| ---- | ---- | ---- |
| `request` | `context.request` | <span data-ttu-id="e69f6-152">Obtiene el objeto de la solicitud que contiene la actividad del bot.</span><span class="sxs-lookup"><span data-stu-id="e69f6-152">Get the request object that contains the bot's activity.</span></span>  |
| | `context.request.attachment` | <span data-ttu-id="e69f6-153">Actividad de datos adjuntos que puede contener una tarjeta adaptable.</span><span class="sxs-lookup"><span data-stu-id="e69f6-153">An attachment activity that may contains an adaptive card.</span></span> |
| | `context.request.text` | <span data-ttu-id="e69f6-154">Actividad de texto que contiene el mensaje de texto entrante del cliente.</span><span class="sxs-lookup"><span data-stu-id="e69f6-154">A text activity that contains the incoming text message from the client.</span></span> |
| | `context.request.speak` | <span data-ttu-id="e69f6-155">Actividad de texto que contiene el texto oral (si está disponible) del cliente.</span><span class="sxs-lookup"><span data-stu-id="e69f6-155">A speak activity that contains the spoken text (if available) from the client.</span></span> |
| | `context.request.type` | <span data-ttu-id="e69f6-156">Especifica el tipo de actividad (valor predeterminado: "message").</span><span class="sxs-lookup"><span data-stu-id="e69f6-156">Specifies the activity type (Default: "message").</span></span> |
| `responses` | `context.responses` | <span data-ttu-id="e69f6-157">Mantiene una matriz de actividades que se enviará al cliente al final del estado actual o del código subyacente a la ejecución.</span><span class="sxs-lookup"><span data-stu-id="e69f6-157">Maintains an array of activities that will be sent back to the client at the end of the current state or code behind execution.</span></span> |
| | `context.responses.push` | <span data-ttu-id="e69f6-158">Agrega una actividad a la respuesta.</span><span class="sxs-lookup"><span data-stu-id="e69f6-158">Add an activity to the response.</span></span> |
| `global` | `context.global` | <span data-ttu-id="e69f6-159">Objeto de JavaScript que contiene los datos conversacionales definidos.</span><span class="sxs-lookup"><span data-stu-id="e69f6-159">A JavaScript object that contains conversational data you defined.</span></span> <span data-ttu-id="e69f6-160">Este objeto persiste a lo largo de la conversación.</span><span class="sxs-lookup"><span data-stu-id="e69f6-160">This object persists throughout the conversation.</span></span> |
| `local` | `context.local` | <span data-ttu-id="e69f6-161">Objeto de JavaScript que contiene los datos de la tarea definidos.</span><span class="sxs-lookup"><span data-stu-id="e69f6-161">A JavaScript object that contains task data you defined.</span></span> <span data-ttu-id="e69f6-162">Este objeto persiste mientras dura una tarea específica.</span><span class="sxs-lookup"><span data-stu-id="e69f6-162">This object persists for the duration of a specific task.</span></span> <span data-ttu-id="e69f6-163">Las intenciones de LUIS siempre se devuelven al contexto local.</span><span class="sxs-lookup"><span data-stu-id="e69f6-163">LUIS intents are always returned to the local context.</span></span> <span data-ttu-id="e69f6-164">Si quiere continuar con los resultados de LUIS, considere copiarlos en el contexto `context.global`.</span><span class="sxs-lookup"><span data-stu-id="e69f6-164">If you want to persist LUIS results, consider copying it to the `context.global` context.</span></span> |
| | `context.local['@description']` | <span data-ttu-id="e69f6-165">Devuelve las entidades sin procesar recibidas de LUIS.</span><span class="sxs-lookup"><span data-stu-id="e69f6-165">Returns the raw Entities received from LUIS.</span></span> |
| `sticky` | `context.sticky` | <span data-ttu-id="e69f6-166">Indica el nombre de la tarea actual.</span><span class="sxs-lookup"><span data-stu-id="e69f6-166">Indicates the current task name</span></span> |
| `currentTemplate` | `context.currentTemplate` | <span data-ttu-id="e69f6-167">[Plantilla de respuesta condicional](conversation-designer-response-templates.md#conditional-response-templates) que se llama para las evaluaciones de visualización y habla.</span><span class="sxs-lookup"><span data-stu-id="e69f6-167">A [conditional response template](conversation-designer-response-templates.md#conditional-response-templates) that is called for both the display and speak evaluations.</span></span> <span data-ttu-id="e69f6-168">Este objeto contiene tres propiedades:</span><span class="sxs-lookup"><span data-stu-id="e69f6-168">This object contains three properties:</span></span> <br/><span data-ttu-id="e69f6-169">1. **name**: nombre de la plantilla actual.</span><span class="sxs-lookup"><span data-stu-id="e69f6-169">1. **name**: The name of the current template.</span></span> <br/><span data-ttu-id="e69f6-170">2. **modalityDisplay**: valor booleano que indica que la modalidad está asociada a una evaluación de visualización.</span><span class="sxs-lookup"><span data-stu-id="e69f6-170">2. **modalityDisplay**: A boolean that indicates the modality is associated with a display evaluation.</span></span> <br/><span data-ttu-id="e69f6-171">3. **modalitySpeak**: valor booleano que indica que la modalidad está asociada a una evaluación de habla.</span><span class="sxs-lookup"><span data-stu-id="e69f6-171">3. **modalitySpeak**: A boolean that indicates the modality is associated with a speak evaluation.</span></span> |

## <a name="context-methods"></a><span data-ttu-id="e69f6-172">Métodos de contexto</span><span class="sxs-lookup"><span data-stu-id="e69f6-172">Context methods</span></span>
<span data-ttu-id="e69f6-173">El objeto `context` expone los siguientes métodos.</span><span class="sxs-lookup"><span data-stu-id="e69f6-173">The `context` object exposes the following methods.</span></span>

| <span data-ttu-id="e69f6-174">NOMBRE</span><span class="sxs-lookup"><span data-stu-id="e69f6-174">Name</span></span> | <span data-ttu-id="e69f6-175">Tipo de valor devuelto</span><span class="sxs-lookup"><span data-stu-id="e69f6-175">Return type</span></span> | <span data-ttu-id="e69f6-176">Código</span><span class="sxs-lookup"><span data-stu-id="e69f6-176">Code</span></span> | <span data-ttu-id="e69f6-177">DESCRIPCIÓN</span><span class="sxs-lookup"><span data-stu-id="e69f6-177">Description</span></span> |
| ---- | ---- | ---- | ---- |
| `getCurrentTurn` | <span data-ttu-id="e69f6-178">**número**</span><span class="sxs-lookup"><span data-stu-id="e69f6-178">**number**</span></span> | `context.getCurrentTurn();` | <span data-ttu-id="e69f6-179">Obtiene el giro del fotograma de la parte superior de la pila si está ejecutando una nueva solicitud de confirmación.</span><span class="sxs-lookup"><span data-stu-id="e69f6-179">Get the turn from the Frame on top of the stack if you are executing a reprompt.</span></span> |

## <a name="next-step"></a><span data-ttu-id="e69f6-180">Paso siguiente</span><span class="sxs-lookup"><span data-stu-id="e69f6-180">Next step</span></span>
> [!div class="nextstepaction"]
> [<span data-ttu-id="e69f6-181">Creación de un bot</span><span class="sxs-lookup"><span data-stu-id="e69f6-181">Create a bot</span></span>](conversation-designer-create-bot.md)
